{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/components/addElements.js","src/js/components/newElements.js","src/js/components/popUpContent.js","src/js/main.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","export default class AddElements {\n elementsAdded () {\n\t\t\tconst cartOptions = document.querySelectorAll('.service-item__name');\n\t\t\tcartOptions.forEach(cartOption => {\n\t\t\t\tif (cartOption.innerText === \"Insurance\" || cartOption.innerText === \"Protect your Galaxy with Samsung Care+\") {\n\t\t\t\t\tconst sku = cartOption.parentElement.parentElement.parentElement.parentElement.parentElement.children[2].children[4].innerText;\n\t\t\t\t\tconst insuranceBtn = cartOption.parentElement.nextElementSibling.children[0].children[0].children[1]\n\n\t\t\t\t\tcartOption.innerText = \"Protect your Galaxy with Samsung Care+\";\n\t\t\t\t\tcartOption.nextElementSibling.style.display = 'none';\n     cartOption.nextElementSibling.style.color = '#ffffff';\n\t\t\t\t\tconst htmlContext = `<div class=\"ng-star-inserted service-item__description opti__div\">\n\t\t\t\t\t${(sku.includes('SM-G990') ? `<p class=\"warning__policy\"></p>`\n\t\t\t\t\t: sku.includes('SM-G99') ? '<p class=\"warning__policy\">Try Samsung Care+ free for 30 days (does not renew)</p>'\n\t\t\t\t\t: '')}\n\t\t\t\t\t\t<p>Up to 24 months of worldwide accidental damage insurance for complete peace of mind.</p>\n\t\t\t\t\t\t<p class=\"learn__more__popfeature\">Learn more</p>\n\t\t\t\t\t</div>`\n\t\t\t\t\tcartOption.nextElementSibling.insertAdjacentHTML('afterend',htmlContext)\n\t\t\t\t\tcartOption.parentElement.nextElementSibling.children[0].children[0].children[1].innerText = 'Add Insurance';\n\n\t\t\t\t\t// const learnmoreBtn = document.querySelector('.learn__more__popfeature')\n\t\t\t\t\t// learnmoreBtn.onclick = () => {\n\t\t\t\t\t// \tinsuranceBtn.click();\n\t\t\t\t\t// }\n\n\t\t\t\t\tdocument.querySelectorAll('.learn__more__popfeature').forEach((btn) => {\n\t\t\t\t\t\t\tbtn.onclick = () => {\n\t\t\t\t\t\t\tinsuranceBtn.click();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// const cartOptions = document.querySelectorAll('.service-item__name');\n\t\t\t// cartOptions.forEach(cartOption => {\n\t\t\t// \tif (cartOption.innerText === \"Insurance\" || cartOption.innerText === \"Protect your Galaxy with Samsung Care+\") {\n\n\t\t\t// \t\tlet skus = []\n\t\t\t// \t\tconst allSkus = document.querySelectorAll('.cart-item__sku').forEach((sku) => {skus.push(sku.innerText)});\n\t\t\t// \t\tconst allInsureBtns = document.querySelectorAll('.action-text')\n\t\t\t// \t\tlet insureBtns = allInsureBtns.forEach((insureBtn) => {\n\t\t\t// \t\t\t(insureBtn.innerText.includes('Add') ? insureBtn.innerText = 'Add Insurance' : insureBtn.innerText );\n\t\t\t// \t\t});\n\t\t\t// \t\tconsole.log(insureBtns)\n\t\t\t// \t\tconst insuranceBtn = cartOption.parentElement.nextElementSibling.children[0].children[0].children[1]\n\t\t\t// \t\tcartOption.innerText = \"Protect your Galaxy with Samsung Care+\";\n\t\t\t// \t\tcartOption.nextElementSibling.style.display = 'none';\n\t\t\t// \t\tconsole.log(skus.includes('SM-G99'), skus)\n\n\t\t\t// \t\tconst htmlContext = `<div class=\"ng-star-inserted service-item__description opti__div\">\n\t\t\t// \t\t${(skus.map(s => s.includes('SM-G99')) ? `<p class=\"warning__policy\">Try Samsung Care+ free for 30 days (does not renew)*</p>`: '')}\n\t\t\t// \t\t\t<p>Up to 24 months of worldwide accidental damage insurance for complete peace of mind.</p>\n\t\t\t// \t\t\t<p class=\"learn__more__popfeature\">Learn more</p>\n\t\t\t// \t\t</div>`\n\t\t\t// \t\tcartOption.nextElementSibling.insertAdjacentHTML('afterend',htmlContext);\n\n\t\t\t// \t\tdocument.querySelectorAll('.learn__more__popfeature').forEach((btn) => {\n\n\t\t\t// \t\t\t\tbtn.onclick = () => {\n\t\t\t// \t\t\t\tinsuranceBtn.click();\n\t\t\t// \t\t\t}\n\t\t\t// \t\t})\n\n\t\t\t// \t}\n\n\n\t\t\t// })\n\t\t}\n}","import PopUpContent from \"./popUpContent\";\nexport default class NewElements {\n addingNewElements() {\n  const popUpContent = new PopUpContent();\n  document.querySelector('.opti__div').style.display = 'block';\n\n  (window.innerWidth <= 920) ? popUpContent.iconBtnClick() : '';\n  const samsungCare = document.querySelectorAll('.opti__div');\n\t\t\tsamsungCare.forEach(samsungCare => {\n    if (samsungCare.previousSibling.textContent === 'Add Samsung Care+') {\n        samsungCare.previousSibling.style.display = 'none';\n        const learnmoreBtn = document.querySelector('.learn__more__popfeature');\n\n        learnmoreBtn.onclick = () => {\n          document.querySelector(\"body > app-root > cx-storefront > main > cx-page-layout > cx-page-slot.TokoLeftContent.has-components.ng-star-inserted > cx-cart-details > div > cx-cart-item-list > div > div > cx-cart-item > div > div.cart-item__services > app-cart-added-services > div:nth-child(1) > div.service-item__actions > div > button > span.action-text.action-text--blue\").click();\n          }\n        }\n\n\t\t\t});\n      popUpContent.addConent();\n }\n}","export default class PopUpContent {\n  addConent() {\n    const cartOptions = document.querySelectorAll('.service-item__name');\n    // const insuranceBtn = cartOptions[0].parentElement.nextElementSibling.children[0].children[0].children[1];\n    cartOptions.forEach(cartOption => {\n      // console.log(insuranceBtn)\n      const insuranceBtn = (cartOption.parentElement.nextElementSibling.children[0].children[0].children[1].innerText === 'Add Insurance')? cartOption.parentElement.nextElementSibling.children[0].children[0].children[1] : cartOption.parentElement.nextElementSibling.children[0].children[0].children[1]\n\n      const sku = cartOption.parentElement.parentElement.parentElement.parentElement.parentElement.children[2].children[4].innerText;\n      insuranceBtn.onclick = () => {\n        console.log('pop n click')\n\n        setTimeout(() => {\n            const title = document.getElementById('modal-title');\n            const description = document.querySelector('.modal__description')\n            const modelContainer = document.querySelector('.modal__radio');\n            const termsContainer = document.querySelector('.modal__terms');\n            const footerContainer  = document.querySelector('.modal__footer');\n\t\t\t\t\t\tmodelContainer.insertAdjacentHTML('afterend', `\n            <div class=\"samsung__care__details\">\n                <h2 class=\"modal__title\">Samsung Care+ includes:</h2>\n                <ul>\n                  <li>Fast and convenient expert repairs using genuine Samsung parts</li>\n                  <li>if your device isn't running smoothly, we'll check and fix any issues</li>\n                  <li>Stay powered up with hassle-free battery replacements</li>\n                  <li>Up to four claims within 24 months, or two within 12 months</li>\n                  <li><a href=\"https://www.samsung.com/uk/offer/samsung-care-plus/\">See all benefits here.</a> Key details of your policy can be found in the <a href=\"https://images.samsung.com/is/content/samsung/p5/uk/samsung-mobile-care-ipid.pdf\">Insurance Proudct Infomation Document(IPID)</a></li>\n                </ul>\n                <div class=\"samsung__care__details__30days\" style=\"${(\n                  sku.includes('SM-G990') ? \"display: none\"\n                : sku.includes('SM-G99') ? \"display: block\"\n                : \"display: none\")}\">\n                  <h2 class=\"modal__title\">Try Samsung Care+ free for 30 days</h2>\n                  <p class=\"hubble-product__options-content-text\">Does not renew automatically. Cover terminates after 30 days unless renewed at samsungcareplus.com.\n                  Service fee per claim still applies. View the Insurance Product Information Pack(IPID) for full policy details.\n                  </p>\n                </div>\n              </div>\n            `);\n            footerContainer.insertAdjacentElement('afterend', termsContainer);\n            const cancelBtn = document.querySelector(\".modal__footer.modal__buttons--inline > button.button.pill-btn.pill-btn--white.reset\");\n            const addToBasket = document.querySelector(\".modal__footer.modal__buttons--inline > button.button.primary.pill-btn.pill-btn--black.view-more\");\n\n            title.innerText = 'Protext your Galaxy with Samsung Care+';\n            description.innerText = 'Up to 24 months of worldwide accidental damage insurance for complete peace of mind';\n\n            const labels = document.querySelectorAll('.option-box__label');\n            labels.forEach((label) => {\n              const name = label.firstChild.innerText;\n              if (name === '1 year coverage') {\n                label.lastElementChild.innerText = '12-month policy';\n              } else if (name === '2 year coverage') {\n                label.lastElementChild.innerText = '24-month policy';\n              } else if (name.includes('Free')) {\n                label.innerHTML = '<div class=\"option-box__name\">One Month Free (Does not renew)</div><div class=\"option-box__code\">One month policy</div>'\n                label.lastElementChild.innerText = 'One month policy';\n\n\n              }\n            })\n\n            const priceTags = document.querySelectorAll('.option-box__price');\n            priceTags.forEach((prices) => {\n              const price = parseInt(prices.innerText.slice(1));\n              prices.style.textAlign = 'right';\n              if (prices.previousElementSibling.innerText.includes('1 year coverage')) {\n                const p = document.createElement('p');\n                const monthlyPrice = price / 12;\n                p.innerText = `(equilvalent to £${monthlyPrice.toFixed(2)} a month)`;\n                prices.insertAdjacentElement('beforeend',p);\n              } else if (prices.previousElementSibling.innerText.includes('2 year coverage')){\n                const p = document.createElement('p');\n                const monthlyPrice = price / 24;\n                p.innerText = `(equilvalent to £${monthlyPrice.toFixed(2)} a month)`;\n                prices.insertAdjacentElement('beforeend',p);\n              }\n            })\n            const coverOptions = document.querySelectorAll('.mat-radio-label');\n            coverOptions.forEach((options) => {\n              if (options.innerText.includes('2 year coverage')) {\n                options.click()\n              }\n            })\n            cancelBtn.innerText = \"No Thanks\";\n            addToBasket.innerText = \"Add to order\";\n\t\t\t\t\t},1500)\n      }\n    });\n  }\n\n  iconBtnClick() {\n    const cartOptions = document.querySelectorAll('.service-item__name');\n    cartOptions.forEach(cartOption => {\n      const iconInsureBtn = cartOption.parentElement.nextElementSibling.children[0].children[0].children[0];\n      const sku = cartOption.parentElement.parentElement.parentElement.parentElement.parentElement.children[2].children[4].innerText;\n      iconInsureBtn.onclick = () => {\n        console.log('pop n click icon')\n        setTimeout(() => {\n            const title = document.getElementById('modal-title');\n            const description = document.querySelector('.modal__description')\n            const modelContainer = document.querySelector('.modal__radio');\n            const termsContainer = document.querySelector('.modal__terms');\n            const footerContainer  = document.querySelector('.modal__footer');\n\t\t\t\t\t\tmodelContainer.insertAdjacentHTML('afterend', `\n            <div class=\"samsung__care__details\">\n                <h2 class=\"modal__title\">Samsung Care+ includes:</h2>\n                <ul>\n                  <li>Fast and convenient expert repairs using genuine Samsung parts</li>\n                  <li>if your device isn't running smoothly, we'll check and fix any issues</li>\n                  <li>Stay powered up with hassle-free battery replacements</li>\n                  <li>Up to four claims within 24 months, or two within 12 months</li>\n                  <li><a href=\"https://www.samsung.com/uk/offer/samsung-care-plus/\">See all benefits here.</a> Key details of your policy can be found in the <a href=\"https://images.samsung.com/is/content/samsung/p5/uk/samsung-mobile-care-ipid.pdf\">Insurance Proudct Infomation Document(IPID)</a></li>\n                </ul>\n                <div class=\"samsung__care__details__30days\" style=\"${(\n                  sku.includes('SM-G990') ? \"display: none\"\n                : sku.includes('SM-G99') ? \"display: block\"\n                : \"display: none\")}\">\n                  <h2 class=\"modal__title\">Try Samsung Care+ free for 30 days</h2>\n                  <p class=\"hubble-product__options-content-text\">Does not renew automatically. Cover terminates after 30 days unless renewed at samsungcareplus.com.\n                  Service fee per claim still applies. View the Insurance Product Information Pack(IPID) for full policy details.\n                  </p>\n                </div>\n              </div>\n            `);\n            footerContainer.insertAdjacentElement('afterend', termsContainer);\n            const cancelBtn = document.querySelector(\".modal__footer.modal__buttons--inline > button.button.pill-btn.pill-btn--white.reset\");\n            const addToBasket = document.querySelector(\".modal__footer.modal__buttons--inline > button.button.primary.pill-btn.pill-btn--black.view-more\");\n\n            title.innerText = 'Protext your Galaxy with Samsung Care+';\n            description.innerText = 'Up to 24 months of worldwide accidental damage insurance for complete peace of mind';\n\n            const labels = document.querySelectorAll('.option-box__label');\n            labels.forEach((label) => {\n              const name = label.firstChild.innerText;\n              if (name === '1 year coverage') {\n                label.lastElementChild.innerText = '12-month policy'\n              } else if (name === '2 year coverage') {\n                label.lastElementChild.innerText = '24-month policy'\n              } else if (name.includes('Free')) {\n                label.innerHTML = '<div class=\"option-box__name\">One Month Free (Does not renew)</div><div class=\"option-box__code\">One month policy</div>'\n                label.lastElementChild.innerText = 'One month policy'\n              }\n            })\n\n            const priceTags = document.querySelectorAll('.option-box__price');\n            priceTags.forEach((prices) => {\n              const price = parseInt(prices.innerText.slice(1));\n              prices.style.textAlign = 'right';\n              if (prices.previousElementSibling.innerText.includes('1 year coverage')) {\n                const p = document.createElement('p');\n                const monthlyPrice = price / 12;\n                p.innerText = `(equilvalent to £${monthlyPrice.toFixed(2)} a month)`;\n                prices.insertAdjacentElement('beforeend',p);\n              } else if (prices.previousElementSibling.innerText.includes('2 year coverage')){\n                const p = document.createElement('p');\n                const monthlyPrice = price / 24;\n                p.innerText = `(equilvalent to £${monthlyPrice.toFixed(2)} a month)`;\n                prices.insertAdjacentElement('beforeend',p);\n              }\n            })\n            const coverOptions = document.querySelectorAll('.mat-radio-label');\n            coverOptions.forEach((options) => {\n              if (options.innerText.includes('2 year coverage')) {\n                options.click()\n              }\n            })\n            cancelBtn.innerText = \"No Thanks\";\n            addToBasket.innerText = \"Add to order\";\n\t\t\t\t\t},1500)\n      }\n    });\n  }\n}","// ==========================================================================\n//  This is a boilerplate to use for target activities\n//\n//\tURL example: add in url of project for visibility here\n// ==========================================================================\n\n// ==========================================================================\n// Scripts, helper widgets - import below\n// ==========================================================================\nimport PopUpContent from \"./components/popUpContent\";\nimport AddElements from \"./components/addElements\";\nimport NewElements from \"./components/newElements\";\nvar cheillondon = cheillondon || {};\n\ncheillondon.targetBoilerplate = (function () {\n\n\t'use strict';\n\n\tvar main = {\n\n\t\t// ==========================================================================\n\t\t// Variables and config Properties add below\n\t\t// ==========================================================================\n\n\n\t\t//Init\n\t\tinit: function () {\n\t\t\tmain.doEverythingTimeout();\n\t\t},\n\n\n\t\t// ==========================================================================\n\t\t// Checking jQuery\n\t\t// ==========================================================================\n\t\tdoEverythingTimeout: function () {\n\t\t\tvar _self = this;\n\n\t\t\tconsole.log('XXX - doEverythingTimeout');\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tif (window.$) {\n\t\t\t\t\tconsole.log('doEverythingTimeout - jQuery loaded');\n\t\t\t\t\tconst cartSkus = document.querySelectorAll('.cart-item__sku');\n\t\t\t\t\tcartSkus.forEach((cartSku) => {\n\t\t\t\t\t\tif(cartSku.innerText.includes('SM-G99') || cartSku.innerText.includes('SM-F')) {\n\t\t\t\t\t\t\tconst popUpContent = new PopUpContent();\n\t\t\t\t\t\t\tconst addElements = new AddElements();\n\t\t\t\t\t\t\tmain.appendNewStyle();\n\t\t\t\t\t\t\taddElements.elementsAdded();\n\t\t\t\t\t\t\tpopUpContent.addConent();\n\t\t\t\t\t\t\tmain.elementObservation();\n\t\t\t\t\t\t\tmain.insureText();\n\t\t\t\t\t\t\tpopUpContent.iconBtnClick();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.log('not in range')\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('no jquery')\n\t\t\t\t\t_self.doEverythingTimeout();\n\t\t\t\t}\n\t\t\t}, 1000)\n\t\t},\n\n\n\t\t// ==========================================================================\n\t\t// Adding style\n\t\t// ==========================================================================\n\t\tappendNewStyle: function () {\n\n\t\t\t/* FYI: the CSS code is in separated file, in SCSS format that generates the CSS file. After, the gulp file finds the [CSS] and replaces with minified code from file */\n\n\t\t\t//To insert minified inline string uncomment this variable and paste here\n\t\t\t//Else, use default uncommented variable\n\t\t\t// var _css = '';\n\n\t\t\tvar _css = '[[CSS]]';\n\n\t\t\t//\n\t\t\t// Adding style definitions to DOM\n\t\t\t// --------------------------------------------------------------------------\n\t\t\tvar _head = document.head || document.getElementsByTagName('head')[0],\n\t\t\t\t_style = document.createElement('style');\n\n\t\t\t_style.type = 'text/css';\n\t\t\tif (_style.styleSheet) { // This is required for IE8 and below.\n\t\t\t\t_style.styleSheet.cssText = _css;\n\t\t\t} else {\n\t\t\t\t_style.appendChild(document.createTextNode(_css));\n\t\t\t}\n\t\t\t_head.appendChild(_style);\n\n\t\t},\n\n\t\tremoveStuff: function () {\n\t\t\tconst description = document.querySelectorAll('.opti__div');\n\t\t\tdescription.forEach((desc) => {\n\n\t\t\t\tif (desc.innerText.includes('insurance')) {\n\t\t\t\t\tdesc.previousElementSibling.style.display = 'block';\n\t\t\t\t\tdesc.previousSibling.style.color = '#000000';\n\t\t\t\t\tdesc.style.display = 'none';\n\t\t\t\t}\n\t\t\t\tif (desc.previousElementSibling.textContent === 'Add Samsung Care+') {\n\t\t\t\t\tconsole.log('got in here as well')\n\t\t\t\t\tconst addingNewElements = new NewElements();\n\t\t\t\t\taddingNewElements.addingNewElements();\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\telementObservation: function () {\n\t\t\t\tconst eleToObserve = document.querySelector('.service-item')\n\t\t\t\t\tconst observer = new MutationObserver(() => {\n\t\t\t\t\t\tconsole.log('trigger')\n\t\t\t\t\t\tthis.removeStuff();\n\t\t\t\t\t});\n\t\t\t\t\tobserver.observe(eleToObserve, {subtree: true, childList: true});\n\n\n\t\t},\n\n\t\tinsureText: function () {\n\t\t\tconst insurance = document.querySelector('.service-item__actions');\n\t\t\tconst observer = new MutationObserver(() => {\n\t\t\t\t// console.log(document.querySelector('.action-text').innerText)\n\t\t\t\tif (document.querySelector('.action-text').innerText === \"Add\") {\n\t\t\t\t\tdocument.querySelector('.action-text').innerText = \"Add insurance\"\n\t\t\t\t}\n\t\t\t});\n\t\t\tobserver.observe(insurance, {subtree: true, childList: true});\n\t\t},\n\n\n\n\t\t// ==========================================================================\n\t\t// Set Events\n\t\t// ==========================================================================\n\t\tsetEvents: function (elm = '') {\n\n\t\t\tconsole.log('XXX - setEvents: ' + elm);\n\n\t\t\tswitch (elm) {\n\t\t\t\tcase 'modal':\n\t\t\t\t\t//code to open modal;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'financePopup':\n\t\t\t\t//code to open something else;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\n\n\t\t},\n\n\t\tresizeWindow: function () {\n\t\t\t// as new elements added to panel we need to resize window to activate amend height of Product Panels\n\t\t\tsetTimeout(function () {\n\t\t\t\t$(window).resize();\n\t\t\t\tconsole.log('window resized');\n\t\t\t}, 100);\n\t\t}\n\n\n\t};\n\treturn {\n\t\tmain: main\n\t};\n\n})();\n\ncheillondon.targetBoilerplate.main.init();\n\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29tcG9uZW50cy9hZGRFbGVtZW50cy5qcyIsInNyYy9qcy9jb21wb25lbnRzL25ld0VsZW1lbnRzLmpzIiwic3JjL2pzL2NvbXBvbmVudHMvcG9wVXBDb250ZW50LmpzIiwic3JjL2pzL21haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7b0xDQXFCLCtFQUNwQix5QkFDc0IsU0FBUyxpQkFBaUIsdUJBQ2xDLFFBQVEsU0FBQSxHQUNuQixHQUE2QixjQUF6QixFQUFXLFdBQXNELDJDQUF6QixFQUFXLFVBQXdELENBQzlHLElBQU0sRUFBTSxFQUFXLGNBQWMsY0FBYyxjQUFjLGNBQWMsY0FBYyxTQUFTLEdBQUcsU0FBUyxHQUFHLFVBQy9HLEVBQWUsRUFBVyxjQUFjLG1CQUFtQixTQUFTLEdBQUcsU0FBUyxHQUFHLFNBQVMsR0FFbEcsRUFBVyxVQUFZLHlDQUN2QixFQUFXLG1CQUFtQixNQUFNLFFBQVUsT0FDOUMsRUFBVyxtQkFBbUIsTUFBTSxNQUFRLFVBQzVDLElBQU0sRUFBQSxrRkFDSCxFQUFJLFNBQVMsV0FBYixrQ0FDRCxFQUFJLFNBQVMsVUFBWSxxRkFDekIsSUFISSw2TEFPTixFQUFXLG1CQUFtQixtQkFBbUIsV0FBVyxHQUM1RCxFQUFXLGNBQWMsbUJBQW1CLFNBQVMsR0FBRyxTQUFTLEdBQUcsU0FBUyxHQUFHLFVBQVksZ0JBTzVGLFNBQVMsaUJBQWlCLDRCQUE0QixRQUFRLFNBQUMsR0FDN0QsRUFBSSxRQUFVLFdBQ2QsRUFBYSxvQ0E1QkM7OztvRUNBckIsSUFBQSxjQUFBLFFBQUEsK1BBQ3FCLCtFQUNwQiw2QkFDQyxJQUFNLEVBQWUsSUFBSSxlQUFBLFFBQ3pCLFNBQVMsY0FBYyxjQUFjLE1BQU0sUUFBVSxRQUVwRCxPQUFPLFlBQWMsS0FBTyxFQUFhLGVBQ3RCLFNBQVMsaUJBQWlCLGNBQ2pDLFFBQVEsU0FBQSxHQUM2QixzQkFBNUMs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QVksU0FBUyxFQUFNLFdBQVcsS0FReEQsVUFBVyxXQUFvQixJQUFWLEVBQVUsVUFBQSxPQUFBLFFBQUEsSUFBQSxVQUFBLEdBQUEsVUFBQSxHQUFKLEdBRTFCLFFBQVEsSUFBSSxvQkFBc0IsSUFnQm5DLGFBQWMsV0FFYixXQUFXLFdBQ1YsRUFBRSxRQUFRLFNBQ1YsUUFBUSxJQUFJLG1CQUNWLE9BS0wsT0FDQyxLQUFNLEdBMUp5QixHQStKakMsWUFBWSxrQkFBa0IsS0FBSyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFkZEVsZW1lbnRzIHtcbiBlbGVtZW50c0FkZGVkICgpIHtcblx0XHRcdGNvbnN0IGNhcnRPcHRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlcnZpY2UtaXRlbV9fbmFtZScpO1xuXHRcdFx0Y2FydE9wdGlvbnMuZm9yRWFjaChjYXJ0T3B0aW9uID0+IHtcblx0XHRcdFx0aWYgKGNhcnRPcHRpb24uaW5uZXJUZXh0ID09PSBcIkluc3VyYW5jZVwiIHx8IGNhcnRPcHRpb24uaW5uZXJUZXh0ID09PSBcIlByb3RlY3QgeW91ciBHYWxheHkgd2l0aCBTYW1zdW5nIENhcmUrXCIpIHtcblx0XHRcdFx0XHRjb25zdCBza3UgPSBjYXJ0T3B0aW9uLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5jaGlsZHJlblsyXS5jaGlsZHJlbls0XS5pbm5lclRleHQ7XG5cdFx0XHRcdFx0Y29uc3QgaW5zdXJhbmNlQnRuID0gY2FydE9wdGlvbi5wYXJlbnRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZy5jaGlsZHJlblswXS5jaGlsZHJlblswXS5jaGlsZHJlblsxXVxuXG5cdFx0XHRcdFx0Y2FydE9wdGlvbi5pbm5lclRleHQgPSBcIlByb3RlY3QgeW91ciBHYWxheHkgd2l0aCBTYW1zdW5nIENhcmUrXCI7XG5cdFx0XHRcdFx0Y2FydE9wdGlvbi5uZXh0RWxlbWVudFNpYmxpbmcuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgY2FydE9wdGlvbi5uZXh0RWxlbWVudFNpYmxpbmcuc3R5bGUuY29sb3IgPSAnI2ZmZmZmZic7XG5cdFx0XHRcdFx0Y29uc3QgaHRtbENvbnRleHQgPSBgPGRpdiBjbGFzcz1cIm5nLXN0YXItaW5zZXJ0ZWQgc2VydmljZS1pdGVtX19kZXNjcmlwdGlvbiBvcHRpX19kaXZcIj5cblx0XHRcdFx0XHQkeyhza3UuaW5jbHVkZXMoJ1NNLUc5OTAnKSA/IGA8cCBjbGFzcz1cIndhcm5pbmdfX3BvbGljeVwiPjwvcD5gXG5cdFx0XHRcdFx0OiBza3UuaW5jbHVkZXMoJ1NNLUc5OScpID8gJzxwIGNsYXNzPVwid2FybmluZ19fcG9saWN5XCI+VHJ5IFNhbXN1bmcgQ2FyZSsgZnJlZSBmb3IgMzAgZGF5cyAoZG9lcyBub3QgcmVuZXcpPC9wPidcblx0XHRcdFx0XHQ6ICcnKX1cblx0XHRcdFx0XHRcdDxwPlVwIHRvIDI0IG1vbnRocyBvZiB3b3JsZHdpZGUgYWNjaWRlbnRhbCBkYW1hZ2UgaW5zdXJhbmNlIGZvciBjb21wbGV0ZSBwZWFjZSBvZiBtaW5kLjwvcD5cblx0XHRcdFx0XHRcdDxwIGNsYXNzPVwibGVhcm5fX21vcmVfX3BvcGZlYXR1cmVcIj5MZWFybiBtb3JlPC9wPlxuXHRcdFx0XHRcdDwvZGl2PmBcblx0XHRcdFx0XHRjYXJ0T3B0aW9uLm5leHRFbGVtZW50U2libGluZy5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyZW5kJyxodG1sQ29udGV4dClcblx0XHRcdFx0XHRjYXJ0T3B0aW9uLnBhcmVudEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzFdLmlubmVyVGV4dCA9ICdBZGQgSW5zdXJhbmNlJztcblxuXHRcdFx0XHRcdC8vIGNvbnN0IGxlYXJubW9yZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sZWFybl9fbW9yZV9fcG9wZmVhdHVyZScpXG5cdFx0XHRcdFx0Ly8gbGVhcm5tb3JlQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdFx0Ly8gXHRpbnN1cmFuY2VCdG4uY2xpY2soKTtcblx0XHRcdFx0XHQvLyB9XG5cblx0XHRcdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubGVhcm5fX21vcmVfX3BvcGZlYXR1cmUnKS5mb3JFYWNoKChidG4pID0+IHtcblx0XHRcdFx0XHRcdFx0YnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGluc3VyYW5jZUJ0bi5jbGljaygpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cblx0XHRcdC8vIGNvbnN0IGNhcnRPcHRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlcnZpY2UtaXRlbV9fbmFtZScpO1xuXHRcdFx0Ly8gY2FydE9wdGlvbnMuZm9yRWFjaChjYXJ0T3B0aW9uID0+IHtcblx0XHRcdC8vIFx0aWYgKGNhcnRPcHRpb24uaW5uZXJUZXh0ID09PSBcIkluc3VyYW5jZVwiIHx8IGNhcnRPcHRpb24uaW5uZXJUZXh0ID09PSBcIlByb3RlY3QgeW91ciBHYWxheHkgd2l0aCBTYW1zdW5nIENhcmUrXCIpIHtcblxuXHRcdFx0Ly8gXHRcdGxldCBza3VzID0gW11cblx0XHRcdC8vIFx0XHRjb25zdCBhbGxTa3VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhcnQtaXRlbV9fc2t1JykuZm9yRWFjaCgoc2t1KSA9PiB7c2t1cy5wdXNoKHNrdS5pbm5lclRleHQpfSk7XG5cdFx0XHQvLyBcdFx0Y29uc3QgYWxsSW5zdXJlQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hY3Rpb24tdGV4dCcpXG5cdFx0XHQvLyBcdFx0bGV0IGluc3VyZUJ0bnMgPSBhbGxJbnN1cmVCdG5zLmZvckVhY2goKGluc3VyZUJ0bikgPT4ge1xuXHRcdFx0Ly8gXHRcdFx0KGluc3VyZUJ0bi5pbm5lclRleHQuaW5jbHVkZXMoJ0FkZCcpID8gaW5zdXJlQnRuLmlubmVyVGV4dCA9ICdBZGQgSW5zdXJhbmNlJyA6IGluc3VyZUJ0bi5pbm5lclRleHQgKTtcblx0XHRcdC8vIFx0XHR9KTtcblx0XHRcdC8vIFx0XHRjb25zb2xlLmxvZyhpbnN1cmVCdG5zKVxuXHRcdFx0Ly8gXHRcdGNvbnN0IGluc3VyYW5jZUJ0biA9IGNhcnRPcHRpb24ucGFyZW50RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV1cblx0XHRcdC8vIFx0XHRjYXJ0T3B0aW9uLmlubmVyVGV4dCA9IFwiUHJvdGVjdCB5b3VyIEdhbGF4eSB3aXRoIFNhbXN1bmcgQ2FyZStcIjtcblx0XHRcdC8vIFx0XHRjYXJ0T3B0aW9uLm5leHRFbGVtZW50U2libGluZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdFx0Ly8gXHRcdGNvbnNvbGUubG9nKHNrdXMuaW5jbHVkZXMoJ1NNLUc5OScpLCBza3VzKVxuXG5cdFx0XHQvLyBcdFx0Y29uc3QgaHRtbENvbnRleHQgPSBgPGRpdiBjbGFzcz1cIm5nLXN0YXItaW5zZXJ0ZWQgc2VydmljZS1pdGVtX19kZXNjcmlwdGlvbiBvcHRpX19kaXZcIj5cblx0XHRcdC8vIFx0XHQkeyhza3VzLm1hcChzID0+IHMuaW5jbHVkZXMoJ1NNLUc5OScpKSA/IGA8cCBjbGFzcz1cIndhcm5pbmdfX3BvbGljeVwiPlRyeSBTYW1zdW5nIENhcmUrIGZyZWUgZm9yIDMwIGRheXMgKGRvZXMgbm90IHJlbmV3KSo8L3A+YDogJycpfVxuXHRcdFx0Ly8gXHRcdFx0PHA+VXAgdG8gMjQgbW9udGhzIG9mIHdvcmxkd2lkZSBhY2NpZGVudGFsIGRhbWFnZSBpbnN1cmFuY2UgZm9yIGNvbXBsZXRlIHBlYWNlIG9mIG1pbmQuPC9wPlxuXHRcdFx0Ly8gXHRcdFx0PHAgY2xhc3M9XCJsZWFybl9fbW9yZV9fcG9wZmVhdHVyZVwiPkxlYXJuIG1vcmU8L3A+XG5cdFx0XHQvLyBcdFx0PC9kaXY+YFxuXHRcdFx0Ly8gXHRcdGNhcnRPcHRpb24ubmV4dEVsZW1lbnRTaWJsaW5nLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJlbmQnLGh0bWxDb250ZXh0KTtcblxuXHRcdFx0Ly8gXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5sZWFybl9fbW9yZV9fcG9wZmVhdHVyZScpLmZvckVhY2goKGJ0bikgPT4ge1xuXG5cdFx0XHQvLyBcdFx0XHRcdGJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0Ly8gXHRcdFx0XHRpbnN1cmFuY2VCdG4uY2xpY2soKTtcblx0XHRcdC8vIFx0XHRcdH1cblx0XHRcdC8vIFx0XHR9KVxuXG5cdFx0XHQvLyBcdH1cblxuXG5cdFx0XHQvLyB9KVxuXHRcdH1cbn0iLCJpbXBvcnQgUG9wVXBDb250ZW50IGZyb20gXCIuL3BvcFVwQ29udGVudFwiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTmV3RWxlbWVudHMge1xuIGFkZGluZ05ld0VsZW1lbnRzKCkge1xuICBjb25zdCBwb3BVcENvbnRlbnQgPSBuZXcgUG9wVXBDb250ZW50KCk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vcHRpX19kaXYnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuICAod2luZG93LmlubmVyV2lkdGggPD0gOTIwKSA/IHBvcFVwQ29udGVudC5pY29uQnRuQ2xpY2soKSA6ICcnO1xuICBjb25zdCBzYW1zdW5nQ2FyZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5vcHRpX19kaXYnKTtcblx0XHRcdHNhbXN1bmdDYXJlLmZvckVhY2goc2Ftc3VuZ0NhcmUgPT4ge1xuICAgIGlmIChzYW1zdW5nQ2FyZS5wcmV2aW91c1NpYmxpbmcudGV4dENvbnRlbnQgPT09ICdBZGQgU2Ftc3VuZyBDYXJlKycpIHtcbiAgICAgICAgc2Ftc3VuZ0NhcmUucHJldmlvdXNTaWJsaW5nLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGNvbnN0IGxlYXJubW9yZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sZWFybl9fbW9yZV9fcG9wZmVhdHVyZScpO1xuXG4gICAgICAgIGxlYXJubW9yZUJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5ID4gYXBwLXJvb3QgPiBjeC1zdG9yZWZyb250ID4gbWFpbiA+IGN4LXBhZ2UtbGF5b3V0ID4gY3gtcGFnZS1zbG90LlRva29MZWZ0Q29udGVudC5oYXMtY29tcG9uZW50cy5uZy1zdGFyLWluc2VydGVkID4gY3gtY2FydC1kZXRhaWxzID4gZGl2ID4gY3gtY2FydC1pdGVtLWxpc3QgPiBkaXYgPiBkaXYgPiBjeC1jYXJ0LWl0ZW0gPiBkaXYgPiBkaXYuY2FydC1pdGVtX19zZXJ2aWNlcyA+IGFwcC1jYXJ0LWFkZGVkLXNlcnZpY2VzID4gZGl2Om50aC1jaGlsZCgxKSA+IGRpdi5zZXJ2aWNlLWl0ZW1fX2FjdGlvbnMgPiBkaXYgPiBidXR0b24gPiBzcGFuLmFjdGlvbi10ZXh0LmFjdGlvbi10ZXh0LS1ibHVlXCIpLmNsaWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cblx0XHRcdH0pO1xuICAgICAgcG9wVXBDb250ZW50LmFkZENvbmVudCgpO1xuIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3BVcENvbnRlbnQge1xuICBhZGRDb25lbnQoKSB7XG4gICAgY29uc3QgY2FydE9wdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VydmljZS1pdGVtX19uYW1lJyk7XG4gICAgLy8gY29uc3QgaW5zdXJhbmNlQnRuID0gY2FydE9wdGlvbnNbMF0ucGFyZW50RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV07XG4gICAgY2FydE9wdGlvbnMuZm9yRWFjaChjYXJ0T3B0aW9uID0+IHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGluc3VyYW5jZUJ0bilcbiAgICAgIGNvbnN0IGluc3VyYW5jZUJ0biA9IChjYXJ0T3B0aW9uLnBhcmVudEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzFdLmlubmVyVGV4dCA9PT0gJ0FkZCBJbnN1cmFuY2UnKT8gY2FydE9wdGlvbi5wYXJlbnRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZy5jaGlsZHJlblswXS5jaGlsZHJlblswXS5jaGlsZHJlblsxXSA6IGNhcnRPcHRpb24ucGFyZW50RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV1cblxuICAgICAgY29uc3Qgc2t1ID0gY2FydE9wdGlvbi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2hpbGRyZW5bMl0uY2hpbGRyZW5bNF0uaW5uZXJUZXh0O1xuICAgICAgaW5zdXJhbmNlQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdwb3AgbiBjbGljaycpXG5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC10aXRsZScpO1xuICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Rlc2NyaXB0aW9uJylcbiAgICAgICAgICAgIGNvbnN0IG1vZGVsQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19yYWRpbycpO1xuICAgICAgICAgICAgY29uc3QgdGVybXNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3Rlcm1zJyk7XG4gICAgICAgICAgICBjb25zdCBmb290ZXJDb250YWluZXIgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19mb290ZXInKTtcblx0XHRcdFx0XHRcdG1vZGVsQ29udGFpbmVyLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJlbmQnLCBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2Ftc3VuZ19fY2FyZV9fZGV0YWlsc1wiPlxuICAgICAgICAgICAgICAgIDxoMiBjbGFzcz1cIm1vZGFsX190aXRsZVwiPlNhbXN1bmcgQ2FyZSsgaW5jbHVkZXM6PC9oMj5cbiAgICAgICAgICAgICAgICA8dWw+XG4gICAgICAgICAgICAgICAgICA8bGk+RmFzdCBhbmQgY29udmVuaWVudCBleHBlcnQgcmVwYWlycyB1c2luZyBnZW51aW5lIFNhbXN1bmcgcGFydHM8L2xpPlxuICAgICAgICAgICAgICAgICAgPGxpPmlmIHlvdXIgZGV2aWNlIGlzbid0IHJ1bm5pbmcgc21vb3RobHksIHdlJ2xsIGNoZWNrIGFuZCBmaXggYW55IGlzc3VlczwvbGk+XG4gICAgICAgICAgICAgICAgICA8bGk+U3RheSBwb3dlcmVkIHVwIHdpdGggaGFzc2xlLWZyZWUgYmF0dGVyeSByZXBsYWNlbWVudHM8L2xpPlxuICAgICAgICAgICAgICAgICAgPGxpPlVwIHRvIGZvdXIgY2xhaW1zIHdpdGhpbiAyNCBtb250aHMsIG9yIHR3byB3aXRoaW4gMTIgbW9udGhzPC9saT5cbiAgICAgICAgICAgICAgICAgIDxsaT48YSBocmVmPVwiaHR0cHM6Ly93d3cuc2Ftc3VuZy5jb20vdWsvb2ZmZXIvc2Ftc3VuZy1jYXJlLXBsdXMvXCI+U2VlIGFsbCBiZW5lZml0cyBoZXJlLjwvYT4gS2V5IGRldGFpbHMgb2YgeW91ciBwb2xpY3kgY2FuIGJlIGZvdW5kIGluIHRoZSA8YSBocmVmPVwiaHR0cHM6Ly9pbWFnZXMuc2Ftc3VuZy5jb20vaXMvY29udGVudC9zYW1zdW5nL3A1L3VrL3NhbXN1bmctbW9iaWxlLWNhcmUtaXBpZC5wZGZcIj5JbnN1cmFuY2UgUHJvdWRjdCBJbmZvbWF0aW9uIERvY3VtZW50KElQSUQpPC9hPjwvbGk+XG4gICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2Ftc3VuZ19fY2FyZV9fZGV0YWlsc19fMzBkYXlzXCIgc3R5bGU9XCIkeyhcbiAgICAgICAgICAgICAgICAgIHNrdS5pbmNsdWRlcygnU00tRzk5MCcpID8gXCJkaXNwbGF5OiBub25lXCJcbiAgICAgICAgICAgICAgICA6IHNrdS5pbmNsdWRlcygnU00tRzk5JykgPyBcImRpc3BsYXk6IGJsb2NrXCJcbiAgICAgICAgICAgICAgICA6IFwiZGlzcGxheTogbm9uZVwiKX1cIj5cbiAgICAgICAgICAgICAgICAgIDxoMiBjbGFzcz1cIm1vZGFsX190aXRsZVwiPlRyeSBTYW1zdW5nIENhcmUrIGZyZWUgZm9yIDMwIGRheXM8L2gyPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJodWJibGUtcHJvZHVjdF9fb3B0aW9ucy1jb250ZW50LXRleHRcIj5Eb2VzIG5vdCByZW5ldyBhdXRvbWF0aWNhbGx5LiBDb3ZlciB0ZXJtaW5hdGVzIGFmdGVyIDMwIGRheXMgdW5sZXNzIHJlbmV3ZWQgYXQgc2Ftc3VuZ2NhcmVwbHVzLmNvbS5cbiAgICAgICAgICAgICAgICAgIFNlcnZpY2UgZmVlIHBlciBjbGFpbSBzdGlsbCBhcHBsaWVzLiBWaWV3IHRoZSBJbnN1cmFuY2UgUHJvZHVjdCBJbmZvcm1hdGlvbiBQYWNrKElQSUQpIGZvciBmdWxsIHBvbGljeSBkZXRhaWxzLlxuICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGApO1xuICAgICAgICAgICAgZm9vdGVyQ29udGFpbmVyLmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJlbmQnLCB0ZXJtc0NvbnRhaW5lcik7XG4gICAgICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb290ZXIubW9kYWxfX2J1dHRvbnMtLWlubGluZSA+IGJ1dHRvbi5idXR0b24ucGlsbC1idG4ucGlsbC1idG4tLXdoaXRlLnJlc2V0XCIpO1xuICAgICAgICAgICAgY29uc3QgYWRkVG9CYXNrZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb290ZXIubW9kYWxfX2J1dHRvbnMtLWlubGluZSA+IGJ1dHRvbi5idXR0b24ucHJpbWFyeS5waWxsLWJ0bi5waWxsLWJ0bi0tYmxhY2sudmlldy1tb3JlXCIpO1xuXG4gICAgICAgICAgICB0aXRsZS5pbm5lclRleHQgPSAnUHJvdGV4dCB5b3VyIEdhbGF4eSB3aXRoIFNhbXN1bmcgQ2FyZSsnO1xuICAgICAgICAgICAgZGVzY3JpcHRpb24uaW5uZXJUZXh0ID0gJ1VwIHRvIDI0IG1vbnRocyBvZiB3b3JsZHdpZGUgYWNjaWRlbnRhbCBkYW1hZ2UgaW5zdXJhbmNlIGZvciBjb21wbGV0ZSBwZWFjZSBvZiBtaW5kJztcblxuICAgICAgICAgICAgY29uc3QgbGFiZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm9wdGlvbi1ib3hfX2xhYmVsJyk7XG4gICAgICAgICAgICBsYWJlbHMuZm9yRWFjaCgobGFiZWwpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGxhYmVsLmZpcnN0Q2hpbGQuaW5uZXJUZXh0O1xuICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gJzEgeWVhciBjb3ZlcmFnZScpIHtcbiAgICAgICAgICAgICAgICBsYWJlbC5sYXN0RWxlbWVudENoaWxkLmlubmVyVGV4dCA9ICcxMi1tb250aCBwb2xpY3knO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICcyIHllYXIgY292ZXJhZ2UnKSB7XG4gICAgICAgICAgICAgICAgbGFiZWwubGFzdEVsZW1lbnRDaGlsZC5pbm5lclRleHQgPSAnMjQtbW9udGggcG9saWN5JztcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChuYW1lLmluY2x1ZGVzKCdGcmVlJykpIHtcbiAgICAgICAgICAgICAgICBsYWJlbC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz1cIm9wdGlvbi1ib3hfX25hbWVcIj5PbmUgTW9udGggRnJlZSAoRG9lcyBub3QgcmVuZXcpPC9kaXY+PGRpdiBjbGFzcz1cIm9wdGlvbi1ib3hfX2NvZGVcIj5PbmUgbW9udGggcG9saWN5PC9kaXY+J1xuICAgICAgICAgICAgICAgIGxhYmVsLmxhc3RFbGVtZW50Q2hpbGQuaW5uZXJUZXh0ID0gJ09uZSBtb250aCBwb2xpY3knO1xuXG5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgY29uc3QgcHJpY2VUYWdzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm9wdGlvbi1ib3hfX3ByaWNlJyk7XG4gICAgICAgICAgICBwcmljZVRhZ3MuZm9yRWFjaCgocHJpY2VzKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHByaWNlID0gcGFyc2VJbnQocHJpY2VzLmlubmVyVGV4dC5zbGljZSgxKSk7XG4gICAgICAgICAgICAgIHByaWNlcy5zdHlsZS50ZXh0QWxpZ24gPSAncmlnaHQnO1xuICAgICAgICAgICAgICBpZiAocHJpY2VzLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuaW5uZXJUZXh0LmluY2x1ZGVzKCcxIHllYXIgY292ZXJhZ2UnKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgbW9udGhseVByaWNlID0gcHJpY2UgLyAxMjtcbiAgICAgICAgICAgICAgICBwLmlubmVyVGV4dCA9IGAoZXF1aWx2YWxlbnQgdG8gwqMke21vbnRobHlQcmljZS50b0ZpeGVkKDIpfSBhIG1vbnRoKWA7XG4gICAgICAgICAgICAgICAgcHJpY2VzLmluc2VydEFkamFjZW50RWxlbWVudCgnYmVmb3JlZW5kJyxwKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChwcmljZXMucHJldmlvdXNFbGVtZW50U2libGluZy5pbm5lclRleHQuaW5jbHVkZXMoJzIgeWVhciBjb3ZlcmFnZScpKXtcbiAgICAgICAgICAgICAgICBjb25zdCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vbnRobHlQcmljZSA9IHByaWNlIC8gMjQ7XG4gICAgICAgICAgICAgICAgcC5pbm5lclRleHQgPSBgKGVxdWlsdmFsZW50IHRvIMKjJHttb250aGx5UHJpY2UudG9GaXhlZCgyKX0gYSBtb250aClgO1xuICAgICAgICAgICAgICAgIHByaWNlcy5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2JlZm9yZWVuZCcscCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBjb25zdCBjb3Zlck9wdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWF0LXJhZGlvLWxhYmVsJyk7XG4gICAgICAgICAgICBjb3Zlck9wdGlvbnMuZm9yRWFjaCgob3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgICBpZiAob3B0aW9ucy5pbm5lclRleHQuaW5jbHVkZXMoJzIgeWVhciBjb3ZlcmFnZScpKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jbGljaygpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBjYW5jZWxCdG4uaW5uZXJUZXh0ID0gXCJObyBUaGFua3NcIjtcbiAgICAgICAgICAgIGFkZFRvQmFza2V0LmlubmVyVGV4dCA9IFwiQWRkIHRvIG9yZGVyXCI7XG5cdFx0XHRcdFx0fSwxNTAwKVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaWNvbkJ0bkNsaWNrKCkge1xuICAgIGNvbnN0IGNhcnRPcHRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlcnZpY2UtaXRlbV9fbmFtZScpO1xuICAgIGNhcnRPcHRpb25zLmZvckVhY2goY2FydE9wdGlvbiA9PiB7XG4gICAgICBjb25zdCBpY29uSW5zdXJlQnRuID0gY2FydE9wdGlvbi5wYXJlbnRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZy5jaGlsZHJlblswXS5jaGlsZHJlblswXS5jaGlsZHJlblswXTtcbiAgICAgIGNvbnN0IHNrdSA9IGNhcnRPcHRpb24ucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmNoaWxkcmVuWzJdLmNoaWxkcmVuWzRdLmlubmVyVGV4dDtcbiAgICAgIGljb25JbnN1cmVCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ3BvcCBuIGNsaWNrIGljb24nKVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLXRpdGxlJyk7XG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fZGVzY3JpcHRpb24nKVxuICAgICAgICAgICAgY29uc3QgbW9kZWxDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3JhZGlvJyk7XG4gICAgICAgICAgICBjb25zdCB0ZXJtc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fdGVybXMnKTtcbiAgICAgICAgICAgIGNvbnN0IGZvb3RlckNvbnRhaW5lciAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Zvb3RlcicpO1xuXHRcdFx0XHRcdFx0bW9kZWxDb250YWluZXIuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmVuZCcsIGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzYW1zdW5nX19jYXJlX19kZXRhaWxzXCI+XG4gICAgICAgICAgICAgICAgPGgyIGNsYXNzPVwibW9kYWxfX3RpdGxlXCI+U2Ftc3VuZyBDYXJlKyBpbmNsdWRlczo8L2gyPlxuICAgICAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgICAgIDxsaT5GYXN0IGFuZCBjb252ZW5pZW50IGV4cGVydCByZXBhaXJzIHVzaW5nIGdlbnVpbmUgU2Ftc3VuZyBwYXJ0czwvbGk+XG4gICAgICAgICAgICAgICAgICA8bGk+aWYgeW91ciBkZXZpY2UgaXNuJ3QgcnVubmluZyBzbW9vdGhseSwgd2UnbGwgY2hlY2sgYW5kIGZpeCBhbnkgaXNzdWVzPC9saT5cbiAgICAgICAgICAgICAgICAgIDxsaT5TdGF5IHBvd2VyZWQgdXAgd2l0aCBoYXNzbGUtZnJlZSBiYXR0ZXJ5IHJlcGxhY2VtZW50czwvbGk+XG4gICAgICAgICAgICAgICAgICA8bGk+VXAgdG8gZm91ciBjbGFpbXMgd2l0aGluIDI0IG1vbnRocywgb3IgdHdvIHdpdGhpbiAxMiBtb250aHM8L2xpPlxuICAgICAgICAgICAgICAgICAgPGxpPjxhIGhyZWY9XCJodHRwczovL3d3dy5zYW1zdW5nLmNvbS91ay9vZmZlci9zYW1zdW5nLWNhcmUtcGx1cy9cIj5TZWUgYWxsIGJlbmVmaXRzIGhlcmUuPC9hPiBLZXkgZGV0YWlscyBvZiB5b3VyIHBvbGljeSBjYW4gYmUgZm91bmQgaW4gdGhlIDxhIGhyZWY9XCJodHRwczovL2ltYWdlcy5zYW1zdW5nLmNvbS9pcy9jb250ZW50L3NhbXN1bmcvcDUvdWsvc2Ftc3VuZy1tb2JpbGUtY2FyZS1pcGlkLnBkZlwiPkluc3VyYW5jZSBQcm91ZGN0IEluZm9tYXRpb24gRG9jdW1lbnQoSVBJRCk8L2E+PC9saT5cbiAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzYW1zdW5nX19jYXJlX19kZXRhaWxzX18zMGRheXNcIiBzdHlsZT1cIiR7KFxuICAgICAgICAgICAgICAgICAgc2t1LmluY2x1ZGVzKCdTTS1HOTkwJykgPyBcImRpc3BsYXk6IG5vbmVcIlxuICAgICAgICAgICAgICAgIDogc2t1LmluY2x1ZGVzKCdTTS1HOTknKSA/IFwiZGlzcGxheTogYmxvY2tcIlxuICAgICAgICAgICAgICAgIDogXCJkaXNwbGF5OiBub25lXCIpfVwiPlxuICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzPVwibW9kYWxfX3RpdGxlXCI+VHJ5IFNhbXN1bmcgQ2FyZSsgZnJlZSBmb3IgMzAgZGF5czwvaDI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImh1YmJsZS1wcm9kdWN0X19vcHRpb25zLWNvbnRlbnQtdGV4dFwiPkRvZXMgbm90IHJlbmV3IGF1dG9tYXRpY2FsbHkuIENvdmVyIHRlcm1pbmF0ZXMgYWZ0ZXIgMzAgZGF5cyB1bmxlc3MgcmVuZXdlZCBhdCBzYW1zdW5nY2FyZXBsdXMuY29tLlxuICAgICAgICAgICAgICAgICAgU2VydmljZSBmZWUgcGVyIGNsYWltIHN0aWxsIGFwcGxpZXMuIFZpZXcgdGhlIEluc3VyYW5jZSBQcm9kdWN0IEluZm9ybWF0aW9uIFBhY2soSVBJRCkgZm9yIGZ1bGwgcG9saWN5IGRldGFpbHMuXG4gICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYCk7XG4gICAgICAgICAgICBmb290ZXJDb250YWluZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmVuZCcsIHRlcm1zQ29udGFpbmVyKTtcbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvb3Rlci5tb2RhbF9fYnV0dG9ucy0taW5saW5lID4gYnV0dG9uLmJ1dHRvbi5waWxsLWJ0bi5waWxsLWJ0bi0td2hpdGUucmVzZXRcIik7XG4gICAgICAgICAgICBjb25zdCBhZGRUb0Jhc2tldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvb3Rlci5tb2RhbF9fYnV0dG9ucy0taW5saW5lID4gYnV0dG9uLmJ1dHRvbi5wcmltYXJ5LnBpbGwtYnRuLnBpbGwtYnRuLS1ibGFjay52aWV3LW1vcmVcIik7XG5cbiAgICAgICAgICAgIHRpdGxlLmlubmVyVGV4dCA9ICdQcm90ZXh0IHlvdXIgR2FsYXh5IHdpdGggU2Ftc3VuZyBDYXJlKyc7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbi5pbm5lclRleHQgPSAnVXAgdG8gMjQgbW9udGhzIG9mIHdvcmxkd2lkZSBhY2NpZGVudGFsIGRhbWFnZSBpbnN1cmFuY2UgZm9yIGNvbXBsZXRlIHBlYWNlIG9mIG1pbmQnO1xuXG4gICAgICAgICAgICBjb25zdCBsYWJlbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub3B0aW9uLWJveF9fbGFiZWwnKTtcbiAgICAgICAgICAgIGxhYmVscy5mb3JFYWNoKChsYWJlbCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBuYW1lID0gbGFiZWwuZmlyc3RDaGlsZC5pbm5lclRleHQ7XG4gICAgICAgICAgICAgIGlmIChuYW1lID09PSAnMSB5ZWFyIGNvdmVyYWdlJykge1xuICAgICAgICAgICAgICAgIGxhYmVsLmxhc3RFbGVtZW50Q2hpbGQuaW5uZXJUZXh0ID0gJzEyLW1vbnRoIHBvbGljeSdcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChuYW1lID09PSAnMiB5ZWFyIGNvdmVyYWdlJykge1xuICAgICAgICAgICAgICAgIGxhYmVsLmxhc3RFbGVtZW50Q2hpbGQuaW5uZXJUZXh0ID0gJzI0LW1vbnRoIHBvbGljeSdcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChuYW1lLmluY2x1ZGVzKCdGcmVlJykpIHtcbiAgICAgICAgICAgICAgICBsYWJlbC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz1cIm9wdGlvbi1ib3hfX25hbWVcIj5PbmUgTW9udGggRnJlZSAoRG9lcyBub3QgcmVuZXcpPC9kaXY+PGRpdiBjbGFzcz1cIm9wdGlvbi1ib3hfX2NvZGVcIj5PbmUgbW9udGggcG9saWN5PC9kaXY+J1xuICAgICAgICAgICAgICAgIGxhYmVsLmxhc3RFbGVtZW50Q2hpbGQuaW5uZXJUZXh0ID0gJ09uZSBtb250aCBwb2xpY3knXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIGNvbnN0IHByaWNlVGFncyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5vcHRpb24tYm94X19wcmljZScpO1xuICAgICAgICAgICAgcHJpY2VUYWdzLmZvckVhY2goKHByaWNlcykgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBwcmljZSA9IHBhcnNlSW50KHByaWNlcy5pbm5lclRleHQuc2xpY2UoMSkpO1xuICAgICAgICAgICAgICBwcmljZXMuc3R5bGUudGV4dEFsaWduID0gJ3JpZ2h0JztcbiAgICAgICAgICAgICAgaWYgKHByaWNlcy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmlubmVyVGV4dC5pbmNsdWRlcygnMSB5ZWFyIGNvdmVyYWdlJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vbnRobHlQcmljZSA9IHByaWNlIC8gMTI7XG4gICAgICAgICAgICAgICAgcC5pbm5lclRleHQgPSBgKGVxdWlsdmFsZW50IHRvIMKjJHttb250aGx5UHJpY2UudG9GaXhlZCgyKX0gYSBtb250aClgO1xuICAgICAgICAgICAgICAgIHByaWNlcy5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2JlZm9yZWVuZCcscCk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJpY2VzLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuaW5uZXJUZXh0LmluY2x1ZGVzKCcyIHllYXIgY292ZXJhZ2UnKSl7XG4gICAgICAgICAgICAgICAgY29uc3QgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBtb250aGx5UHJpY2UgPSBwcmljZSAvIDI0O1xuICAgICAgICAgICAgICAgIHAuaW5uZXJUZXh0ID0gYChlcXVpbHZhbGVudCB0byDCoyR7bW9udGhseVByaWNlLnRvRml4ZWQoMil9IGEgbW9udGgpYDtcbiAgICAgICAgICAgICAgICBwcmljZXMuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdiZWZvcmVlbmQnLHApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgY29uc3QgY292ZXJPcHRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1hdC1yYWRpby1sYWJlbCcpO1xuICAgICAgICAgICAgY292ZXJPcHRpb25zLmZvckVhY2goKG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuaW5uZXJUZXh0LmluY2x1ZGVzKCcyIHllYXIgY292ZXJhZ2UnKSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuY2xpY2soKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgY2FuY2VsQnRuLmlubmVyVGV4dCA9IFwiTm8gVGhhbmtzXCI7XG4gICAgICAgICAgICBhZGRUb0Jhc2tldC5pbm5lclRleHQgPSBcIkFkZCB0byBvcmRlclwiO1xuXHRcdFx0XHRcdH0sMTUwMClcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSIsIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyAgVGhpcyBpcyBhIGJvaWxlcnBsYXRlIHRvIHVzZSBmb3IgdGFyZ2V0IGFjdGl2aXRpZXNcbi8vXG4vL1x0VVJMIGV4YW1wbGU6IGFkZCBpbiB1cmwgb2YgcHJvamVjdCBmb3IgdmlzaWJpbGl0eSBoZXJlXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gU2NyaXB0cywgaGVscGVyIHdpZGdldHMgLSBpbXBvcnQgYmVsb3dcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5pbXBvcnQgUG9wVXBDb250ZW50IGZyb20gXCIuL2NvbXBvbmVudHMvcG9wVXBDb250ZW50XCI7XG5pbXBvcnQgQWRkRWxlbWVudHMgZnJvbSBcIi4vY29tcG9uZW50cy9hZGRFbGVtZW50c1wiO1xuaW1wb3J0IE5ld0VsZW1lbnRzIGZyb20gXCIuL2NvbXBvbmVudHMvbmV3RWxlbWVudHNcIjtcbnZhciBjaGVpbGxvbmRvbiA9IGNoZWlsbG9uZG9uIHx8IHt9O1xuXG5jaGVpbGxvbmRvbi50YXJnZXRCb2lsZXJwbGF0ZSA9IChmdW5jdGlvbiAoKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBtYWluID0ge1xuXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHQvLyBWYXJpYWJsZXMgYW5kIGNvbmZpZyBQcm9wZXJ0aWVzIGFkZCBiZWxvd1xuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuXHRcdC8vSW5pdFxuXHRcdGluaXQ6IGZ1bmN0aW9uICgpIHtcblx0XHRcdG1haW4uZG9FdmVyeXRoaW5nVGltZW91dCgpO1xuXHRcdH0sXG5cblxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gQ2hlY2tpbmcgalF1ZXJ5XG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHRkb0V2ZXJ5dGhpbmdUaW1lb3V0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgX3NlbGYgPSB0aGlzO1xuXG5cdFx0XHRjb25zb2xlLmxvZygnWFhYIC0gZG9FdmVyeXRoaW5nVGltZW91dCcpO1xuXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0aWYgKHdpbmRvdy4kKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ2RvRXZlcnl0aGluZ1RpbWVvdXQgLSBqUXVlcnkgbG9hZGVkJyk7XG5cdFx0XHRcdFx0Y29uc3QgY2FydFNrdXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FydC1pdGVtX19za3UnKTtcblx0XHRcdFx0XHRjYXJ0U2t1cy5mb3JFYWNoKChjYXJ0U2t1KSA9PiB7XG5cdFx0XHRcdFx0XHRpZihjYXJ0U2t1LmlubmVyVGV4dC5pbmNsdWRlcygnU00tRzk5JykgfHwgY2FydFNrdS5pbm5lclRleHQuaW5jbHVkZXMoJ1NNLUYnKSkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBwb3BVcENvbnRlbnQgPSBuZXcgUG9wVXBDb250ZW50KCk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGFkZEVsZW1lbnRzID0gbmV3IEFkZEVsZW1lbnRzKCk7XG5cdFx0XHRcdFx0XHRcdG1haW4uYXBwZW5kTmV3U3R5bGUoKTtcblx0XHRcdFx0XHRcdFx0YWRkRWxlbWVudHMuZWxlbWVudHNBZGRlZCgpO1xuXHRcdFx0XHRcdFx0XHRwb3BVcENvbnRlbnQuYWRkQ29uZW50KCk7XG5cdFx0XHRcdFx0XHRcdG1haW4uZWxlbWVudE9ic2VydmF0aW9uKCk7XG5cdFx0XHRcdFx0XHRcdG1haW4uaW5zdXJlVGV4dCgpO1xuXHRcdFx0XHRcdFx0XHRwb3BVcENvbnRlbnQuaWNvbkJ0bkNsaWNrKCk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnbm90IGluIHJhbmdlJylcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KVxuXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ25vIGpxdWVyeScpXG5cdFx0XHRcdFx0X3NlbGYuZG9FdmVyeXRoaW5nVGltZW91dCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCAxMDAwKVxuXHRcdH0sXG5cblxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gQWRkaW5nIHN0eWxlXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHRhcHBlbmROZXdTdHlsZTogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHQvKiBGWUk6IHRoZSBDU1MgY29kZSBpcyBpbiBzZXBhcmF0ZWQgZmlsZSwgaW4gU0NTUyBmb3JtYXQgdGhhdCBnZW5lcmF0ZXMgdGhlIENTUyBmaWxlLiBBZnRlciwgdGhlIGd1bHAgZmlsZSBmaW5kcyB0aGUgW0NTU10gYW5kIHJlcGxhY2VzIHdpdGggbWluaWZpZWQgY29kZSBmcm9tIGZpbGUgKi9cblxuXHRcdFx0Ly9UbyBpbnNlcnQgbWluaWZpZWQgaW5saW5lIHN0cmluZyB1bmNvbW1lbnQgdGhpcyB2YXJpYWJsZSBhbmQgcGFzdGUgaGVyZVxuXHRcdFx0Ly9FbHNlLCB1c2UgZGVmYXVsdCB1bmNvbW1lbnRlZCB2YXJpYWJsZVxuXHRcdFx0Ly8gdmFyIF9jc3MgPSAnJztcblxuXHRcdFx0dmFyIF9jc3MgPSAnW1tDU1NdXSc7XG5cblx0XHRcdC8vXG5cdFx0XHQvLyBBZGRpbmcgc3R5bGUgZGVmaW5pdGlvbnMgdG8gRE9NXG5cdFx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdFx0dmFyIF9oZWFkID0gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLFxuXHRcdFx0XHRfc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuXG5cdFx0XHRfc3R5bGUudHlwZSA9ICd0ZXh0L2Nzcyc7XG5cdFx0XHRpZiAoX3N0eWxlLnN0eWxlU2hlZXQpIHsgLy8gVGhpcyBpcyByZXF1aXJlZCBmb3IgSUU4IGFuZCBiZWxvdy5cblx0XHRcdFx0X3N0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IF9jc3M7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRfc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoX2NzcykpO1xuXHRcdFx0fVxuXHRcdFx0X2hlYWQuYXBwZW5kQ2hpbGQoX3N0eWxlKTtcblxuXHRcdH0sXG5cblx0XHRyZW1vdmVTdHVmZjogZnVuY3Rpb24gKCkge1xuXHRcdFx0Y29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub3B0aV9fZGl2Jyk7XG5cdFx0XHRkZXNjcmlwdGlvbi5mb3JFYWNoKChkZXNjKSA9PiB7XG5cblx0XHRcdFx0aWYgKGRlc2MuaW5uZXJUZXh0LmluY2x1ZGVzKCdpbnN1cmFuY2UnKSkge1xuXHRcdFx0XHRcdGRlc2MucHJldmlvdXNFbGVtZW50U2libGluZy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblx0XHRcdFx0XHRkZXNjLnByZXZpb3VzU2libGluZy5zdHlsZS5jb2xvciA9ICcjMDAwMDAwJztcblx0XHRcdFx0XHRkZXNjLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGRlc2MucHJldmlvdXNFbGVtZW50U2libGluZy50ZXh0Q29udGVudCA9PT0gJ0FkZCBTYW1zdW5nIENhcmUrJykge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdnb3QgaW4gaGVyZSBhcyB3ZWxsJylcblx0XHRcdFx0XHRjb25zdCBhZGRpbmdOZXdFbGVtZW50cyA9IG5ldyBOZXdFbGVtZW50cygpO1xuXHRcdFx0XHRcdGFkZGluZ05ld0VsZW1lbnRzLmFkZGluZ05ld0VsZW1lbnRzKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0fSxcblxuXHRcdGVsZW1lbnRPYnNlcnZhdGlvbjogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRjb25zdCBlbGVUb09ic2VydmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1pdGVtJylcblx0XHRcdFx0XHRjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCd0cmlnZ2VyJylcblx0XHRcdFx0XHRcdHRoaXMucmVtb3ZlU3R1ZmYoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRvYnNlcnZlci5vYnNlcnZlKGVsZVRvT2JzZXJ2ZSwge3N1YnRyZWU6IHRydWUsIGNoaWxkTGlzdDogdHJ1ZX0pO1xuXG5cblx0XHR9LFxuXG5cdFx0aW5zdXJlVGV4dDogZnVuY3Rpb24gKCkge1xuXHRcdFx0Y29uc3QgaW5zdXJhbmNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtaXRlbV9fYWN0aW9ucycpO1xuXHRcdFx0Y29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3Rpb24tdGV4dCcpLmlubmVyVGV4dClcblx0XHRcdFx0aWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3Rpb24tdGV4dCcpLmlubmVyVGV4dCA9PT0gXCJBZGRcIikge1xuXHRcdFx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3Rpb24tdGV4dCcpLmlubmVyVGV4dCA9IFwiQWRkIGluc3VyYW5jZVwiXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0b2JzZXJ2ZXIub2JzZXJ2ZShpbnN1cmFuY2UsIHtzdWJ0cmVlOiB0cnVlLCBjaGlsZExpc3Q6IHRydWV9KTtcblx0XHR9LFxuXG5cblxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gU2V0IEV2ZW50c1xuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0c2V0RXZlbnRzOiBmdW5jdGlvbiAoZWxtID0gJycpIHtcblxuXHRcdFx0Y29uc29sZS5sb2coJ1hYWCAtIHNldEV2ZW50czogJyArIGVsbSk7XG5cblx0XHRcdHN3aXRjaCAoZWxtKSB7XG5cdFx0XHRcdGNhc2UgJ21vZGFsJzpcblx0XHRcdFx0XHQvL2NvZGUgdG8gb3BlbiBtb2RhbDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAnZmluYW5jZVBvcHVwJzpcblx0XHRcdFx0Ly9jb2RlIHRvIG9wZW4gc29tZXRoaW5nIGVsc2U7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cblxuXG5cdFx0fSxcblxuXHRcdHJlc2l6ZVdpbmRvdzogZnVuY3Rpb24gKCkge1xuXHRcdFx0Ly8gYXMgbmV3IGVsZW1lbnRzIGFkZGVkIHRvIHBhbmVsIHdlIG5lZWQgdG8gcmVzaXplIHdpbmRvdyB0byBhY3RpdmF0ZSBhbWVuZCBoZWlnaHQgb2YgUHJvZHVjdCBQYW5lbHNcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQkKHdpbmRvdykucmVzaXplKCk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCd3aW5kb3cgcmVzaXplZCcpO1xuXHRcdFx0fSwgMTAwKTtcblx0XHR9XG5cblxuXHR9O1xuXHRyZXR1cm4ge1xuXHRcdG1haW46IG1haW5cblx0fTtcblxufSkoKTtcblxuY2hlaWxsb25kb24udGFyZ2V0Qm9pbGVycGxhdGUubWFpbi5pbml0KCk7XG5cbiJdfQ=="}