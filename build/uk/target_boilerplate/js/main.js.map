{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/components/addElements.js","src/js/components/newElements.js","src/js/components/popUpContent.js","src/js/main.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","export default class AddElements {\n elementsAdded () {\n\t\t\tconst cartOptions = document.querySelectorAll('.service-item__name');\n\t\t\tcartOptions.forEach(cartOption => {\n\t\t\t\tif (cartOption.innerText === \"Insurance\" || cartOption.innerText === \"Protect your Galaxy with Samsung Care+\") {\n\t\t\t\t\tconst sku = cartOption.parentElement.parentElement.parentElement.parentElement.parentElement.children[2].children[4].innerText;\n\t\t\t\t\tconst insuranceBtn = cartOption.parentElement.nextElementSibling.children[0].children[0].children[1]\n\n\t\t\t\t\tcartOption.innerText = \"Protect your Galaxy with Samsung Care+\";\n\t\t\t\t\tcartOption.nextElementSibling.style.display = 'none';\n     cartOption.nextElementSibling.style.color = '#ffffff';\n\t\t\t\t\tconst htmlContext = `<div class=\"ng-star-inserted service-item__description opti__div\">\n\t\t\t\t\t${(sku.includes('SM-G99') ? `<p class=\"warning__policy\">Try Samsung Care+ free for 30 days (does not renew)*</p>`: '')}\n\t\t\t\t\t\t<p>Up to 24 months of worldwide accidental damage insurance for complete peace of mind.</p>\n\t\t\t\t\t\t<p class=\"learn__more__popfeature\">Learn more</p>\n\t\t\t\t\t</div>`\n\t\t\t\t\tcartOption.nextElementSibling.insertAdjacentHTML('afterend',htmlContext)\n\t\t\t\t\tcartOption.parentElement.nextElementSibling.children[0].children[0].children[1].innerText = 'Add Insurance';\n\n\t\t\t\t\tconst learnmoreBtn = document.querySelector('.learn__more__popfeature')\n\t\t\t\t\tlearnmoreBtn.onclick = () => {\n\t\t\t\t\t\tinsuranceBtn.click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n}","import PopUpContent from \"./popUpContent\";\nexport default class NewElements {\n addingNewElements() {\n  const popUpContent = new PopUpContent();\n  document.querySelector('.opti__div').style.display = 'block';\n  popUpContent.addConent();\n  const samsungCare = document.querySelectorAll('.opti__div');\n\t\t\tsamsungCare.forEach(samsungCare => {\n    if (samsungCare.previousSibling.innerText === 'Add Samsung Care+') {\n\n     samsungCare.previousSibling.style.display = 'none';\n     const learnmoreBtn = document.querySelector('.learn__more__popfeature');\n\n     learnmoreBtn.onclick = () => {\n       document.querySelector(\"body > app-root > cx-storefront > main > cx-page-layout > cx-page-slot.TokoLeftContent.has-components.ng-star-inserted > cx-cart-details > div > cx-cart-item-list > div > div > cx-cart-item > div > div.cart-item__services > app-cart-added-services > div:nth-child(1) > div.service-item__actions > div > button > span.action-text.action-text--blue\").click()\n      }\n     }\n\n\t\t\t});\n }\n}","export default class PopUpContent {\n addConent() {\n    const cartOptions = document.querySelectorAll('.service-item__name');\n\n    const ourContentHtml = `\n    <div class=\"samsung__care__details\">\n          <h2 class=\"modal__title\">Samsung Care+ includes:</h2>\n          <ul>\n            <li>Fast and convenient expert repairs using genuine Samsung parts</li>\n            <li>if your device isn't running smoothly, we'll check and fix any issues</li>\n            <li>Stay powered up with hassle-free battery replacements</li>\n            <li>Up to four claims within 24 months, or two within 12 months</li>\n            <li><a href=\"https://www.samsung.com/uk/offer/samsung-care-plus/\">See all benefits here.</a> Key details of your policy can be found in the <a href=\"https://images.samsung.com/is/content/samsung/p5/uk/samsung-mobile-care-ipid.pdf\">Insurance Proudct Infomation Document(IPID)</a></li>\n          </ul>\n          <div class=\"samsung__care__details__30days\">\n            <h2 class=\"modal__title\">Try Samsung Care+ free for 30 days</h2>\n            <p class=\"hubble-product__options-content-text\">Does not renew automatically. Cover terminates after 30 days unless renewed at samsungcareplus.com.\n            Service fee per claim still applies. View the Insurance Product Information Pack(IPID) for full policy details.\n            </p>\n          </div>\n        </div>\n    `\n    cartOptions.forEach(cartOption => {\n      const insuranceBtn = cartOption.parentElement.nextElementSibling.children[0].children[0].children[1];\n      insuranceBtn.onclick = () => {\n        setTimeout(() => {\n            const title = document.getElementById('modal-title');\n            const description = document.querySelector('.modal__description')\n            const modelContainer = document.querySelector('.modal__radio');\n            const termsContainer = document.querySelector('.modal__terms');\n            const footerContainer  = document.querySelector('.modal__footer');\n\t\t\t\t\t\tmodelContainer.insertAdjacentHTML('afterend', ourContentHtml);\n            footerContainer.insertAdjacentElement('afterend', termsContainer);\n            const cancelBtn = document.querySelector(\".modal__footer.modal__buttons--inline > button.button.pill-btn.pill-btn--white.reset\");\n            const addToBasket = document.querySelector(\".modal__footer.modal__buttons--inline > button.button.primary.pill-btn.pill-btn--black.view-more\");\n\n            title.innerText = 'Protext your Galaxy with Samsung Care+';\n            description.innerText = 'Up to 24 months of worldwide accidental damage insurance for complete peace of mind';\n\n            const labels = document.querySelectorAll('.option-box__label');\n            labels.forEach((label) => {\n              const name = label.firstChild.innerText;\n              if (name === '1 year coverage') {\n                label.lastElementChild.innerText = '12-month policy'\n              } else if (name === '2 year coverage') {\n                label.lastElementChild.innerText = '24-month policy'\n              } else if (name.includes('Free')) {\n                label.lastElementChild.innerText = 'One month policy'\n              }\n            })\n\n            cancelBtn.innerText = \"No Thanks\";\n            addToBasket.innerText = \"Add to order\";\n\t\t\t\t\t},1500)\n      }\n    });\n  }\n}","// ==========================================================================\n//  This is a boilerplate to use for target activities\n//\n//\tURL example: add in url of project for visibility here\n// ==========================================================================\n\n// ==========================================================================\n// Scripts, helper widgets - import below\n// ==========================================================================\nimport PopUpContent from \"./components/popUpContent\";\nimport AddElements from \"./components/addElements\";\nimport NewElements from \"./components/newElements\";\nvar cheillondon = cheillondon || {};\n\ncheillondon.targetBoilerplate = (function () {\n\n\t'use strict';\n\n\tvar main = {\n\n\t\t// ==========================================================================\n\t\t// Variables and config Properties add below\n\t\t// ==========================================================================\n\n\n\t\t//Init\n\t\tinit: function () {\n\t\t\tmain.doEverythingTimeout();\n\t\t},\n\n\n\t\t// ==========================================================================\n\t\t// Checking jQuery\n\t\t// ==========================================================================\n\t\tdoEverythingTimeout: function () {\n\t\t\tvar _self = this;\n\n\t\t\tconsole.log('XXX - doEverythingTimeout');\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tif (window.$) {\n\t\t\t\t\tconsole.log('doEverythingTimeout - jQuery loaded');\n\t\t\t\t\tconst popUpContent = new PopUpContent();\n\t\t\t\t\tconst addElements = new AddElements();\n\t\t\t\t\tmain.appendNewStyle();\n\t\t\t\t\taddElements.elementsAdded();\n\t\t\t\t\tpopUpContent.addConent();\n\t\t\t\t\tmain.elementObservation();\n\t\t\t\t\tmain.insureText();\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('no jquery')\n\t\t\t\t\t_self.doEverythingTimeout();\n\t\t\t\t}\n\t\t\t}, 1000)\n\t\t},\n\n\n\t\t// ==========================================================================\n\t\t// Adding style\n\t\t// ==========================================================================\n\t\tappendNewStyle: function () {\n\n\t\t\t/* FYI: the CSS code is in separated file, in SCSS format that generates the CSS file. After, the gulp file finds the [CSS] and replaces with minified code from file */\n\n\t\t\t//To insert minified inline string uncomment this variable and paste here\n\t\t\t//Else, use default uncommented variable\n\t\t\t// var _css = '';\n\n\t\t\tvar _css = '[[CSS]]';\n\n\t\t\t//\n\t\t\t// Adding style definitions to DOM\n\t\t\t// --------------------------------------------------------------------------\n\t\t\tvar _head = document.head || document.getElementsByTagName('head')[0],\n\t\t\t\t_style = document.createElement('style');\n\n\t\t\t_style.type = 'text/css';\n\t\t\tif (_style.styleSheet) { // This is required for IE8 and below.\n\t\t\t\t_style.styleSheet.cssText = _css;\n\t\t\t} else {\n\t\t\t\t_style.appendChild(document.createTextNode(_css));\n\t\t\t}\n\t\t\t_head.appendChild(_style);\n\n\t\t},\n\n\t\tremoveStuff: function () {\n\t\t\tconst description = document.querySelectorAll('.opti__div');\n\t\t\tdescription.forEach((desc) => {\n\t\t\t\tif (desc.innerText.includes('insurance')) {\n\t\t\t\t\tdesc.previousElementSibling.style.display = 'block';\n\t\t\t\t\tdesc.previousSibling.style.color = '#000000'\n\t\t\t\t\tdesc.style.display = 'none'\n\t\t\t\t}\n\t\t\t\tif (desc.previousElementSibling.innerText === 'Add Samsung Care+') {\n\t\t\t\t\t// console.log('got in here as well')\n\t\t\t\t\tconst addingNewElements = new NewElements();\n\t\t\t\t\taddingNewElements.addingNewElements();\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\telementObservation: function () {\n\t\t\t\tconst eleToObserve = document.querySelector('.service-item');\n\t\t\t\t\tconst observer = new MutationObserver(() => {\n\t\t\t\t\t\t// console.log('trigger')\n\t\t\t\t\t\tthis.removeStuff();\n\t\t\t\t\t});\n\t\t\t\t\tobserver.observe(eleToObserve, {subtree: true, childList: true})\n\t\t},\n\n\t\tinsureText: function () {\n\t\t\tconst insurance = document.querySelector('.service-item__actions');\n\t\t\tconst observer = new MutationObserver(() => {\n\t\t\t\t// console.log(document.querySelector('.action-text').innerText)\n\t\t\t\tif (document.querySelector('.action-text').innerText === \"Add\") {\n\t\t\t\t\tdocument.querySelector('.action-text').innerText = \"Add insurance\"\n\t\t\t\t}\n\t\t\t});\n\t\t\tobserver.observe(insurance, {subtree: true, childList: true});\n\t\t},\n\n\n\n\t\t// ==========================================================================\n\t\t// Set Events\n\t\t// ==========================================================================\n\t\tsetEvents: function (elm = '') {\n\n\t\t\tconsole.log('XXX - setEvents: ' + elm);\n\n\t\t\tswitch (elm) {\n\t\t\t\tcase 'modal':\n\t\t\t\t\t//code to open modal;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'financePopup':\n\t\t\t\t//code to open something else;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\n\n\t\t},\n\n\t\tresizeWindow: function () {\n\t\t\t// as new elements added to panel we need to resize window to activate amend height of Product Panels\n\t\t\tsetTimeout(function () {\n\t\t\t\t$(window).resize();\n\t\t\t\tconsole.log('window resized');\n\t\t\t}, 100);\n\t\t}\n\n\n\t};\n\treturn {\n\t\tmain: main\n\t};\n\n})();\n\ncheillondon.targetBoilerplate.main.init();\n\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29tcG9uZW50cy9hZGRFbGVtZW50cy5qcyIsInNyYy9qcy9jb21wb25lbnRzL25ld0VsZW1lbnRzLmpzIiwic3JjL2pzL2NvbXBvbmVudHMvcG9wVXBDb250ZW50LmpzIiwic3JjL2pzL21haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7b0xDQXFCLCtFQUNwQix5QkFDc0IsU0FBUyxpQkFBaUIsdUJBQ2xDLFFBQVEsU0FBQSxHQUNuQixHQUE2QixjQUF6QixFQUFXLFdBQXNELDJDQUF6QixFQUFXLFVBQXdELENBQzlHLElBQU0sRUFBTSxFQUFXLGNBQWMsY0FBYyxjQUFjLGNBQWMsY0FBYyxTQUFTLEdBQUcsU0FBUyxHQUFHLFVBQy9HLEVBQWUsRUFBVyxjQUFjLG1CQUFtQixTQUFTLEdBQUcsU0FBUyxHQUFHLFNBQVMsR0FFbEcsRUFBVyxVQUFZLHlDQUN2QixFQUFXLG1CQUFtQixNQUFNLFFBQVUsT0FDOUMsRUFBVyxtQkFBbUIsTUFBTSxNQUFRLFVBQzVDLElBQU0sRUFBQSxrRkFDSCxFQUFJLFNBQVMsVUFBYixzRkFBZ0gsSUFEN0csNkxBS04sRUFBVyxtQkFBbUIsbUJBQW1CLFdBQVcsR0FDNUQsRUFBVyxjQUFjLG1CQUFtQixTQUFTLEdBQUcsU0FBUyxHQUFHLFNBQVMsR0FBRyxVQUFZLGdCQUV2RSxTQUFTLGNBQWMsNEJBQy9CLFFBQVUsV0FDdEIsRUFBYSxrQ0FyQkU7OztvRUNBckIsSUFBQSxjQUFBLFFBQUEsK1BBQ3FCLCtFQUNwQiw2QkFDQyxJQUFNLEVBQWUsSUFBSSxlQUFBLFFBQ3pCLFNBQVMsY0FBYyxjQUFjLE1BQU0sUUFBVSxRQUNyRCxFQUFhLFlBQ08sU0FBUyxpQkFBaUIsY0FDakMsUUFBUSxTQUFBLEdBQzJCLHNCQUExQyxFQUFZLGdCQUFnQixZQUUvQixFQUFZLGdCQUFnQixNQUFNLFFBQVUsT0FDdkIsU0FBUyxjQUFjLDRC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dCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBZGRFbGVtZW50cyB7XG4gZWxlbWVudHNBZGRlZCAoKSB7XG5cdFx0XHRjb25zdCBjYXJ0T3B0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZXJ2aWNlLWl0ZW1fX25hbWUnKTtcblx0XHRcdGNhcnRPcHRpb25zLmZvckVhY2goY2FydE9wdGlvbiA9PiB7XG5cdFx0XHRcdGlmIChjYXJ0T3B0aW9uLmlubmVyVGV4dCA9PT0gXCJJbnN1cmFuY2VcIiB8fCBjYXJ0T3B0aW9uLmlubmVyVGV4dCA9PT0gXCJQcm90ZWN0IHlvdXIgR2FsYXh5IHdpdGggU2Ftc3VuZyBDYXJlK1wiKSB7XG5cdFx0XHRcdFx0Y29uc3Qgc2t1ID0gY2FydE9wdGlvbi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2hpbGRyZW5bMl0uY2hpbGRyZW5bNF0uaW5uZXJUZXh0O1xuXHRcdFx0XHRcdGNvbnN0IGluc3VyYW5jZUJ0biA9IGNhcnRPcHRpb24ucGFyZW50RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV1cblxuXHRcdFx0XHRcdGNhcnRPcHRpb24uaW5uZXJUZXh0ID0gXCJQcm90ZWN0IHlvdXIgR2FsYXh5IHdpdGggU2Ftc3VuZyBDYXJlK1wiO1xuXHRcdFx0XHRcdGNhcnRPcHRpb24ubmV4dEVsZW1lbnRTaWJsaW5nLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgIGNhcnRPcHRpb24ubmV4dEVsZW1lbnRTaWJsaW5nLnN0eWxlLmNvbG9yID0gJyNmZmZmZmYnO1xuXHRcdFx0XHRcdGNvbnN0IGh0bWxDb250ZXh0ID0gYDxkaXYgY2xhc3M9XCJuZy1zdGFyLWluc2VydGVkIHNlcnZpY2UtaXRlbV9fZGVzY3JpcHRpb24gb3B0aV9fZGl2XCI+XG5cdFx0XHRcdFx0JHsoc2t1LmluY2x1ZGVzKCdTTS1HOTknKSA/IGA8cCBjbGFzcz1cIndhcm5pbmdfX3BvbGljeVwiPlRyeSBTYW1zdW5nIENhcmUrIGZyZWUgZm9yIDMwIGRheXMgKGRvZXMgbm90IHJlbmV3KSo8L3A+YDogJycpfVxuXHRcdFx0XHRcdFx0PHA+VXAgdG8gMjQgbW9udGhzIG9mIHdvcmxkd2lkZSBhY2NpZGVudGFsIGRhbWFnZSBpbnN1cmFuY2UgZm9yIGNvbXBsZXRlIHBlYWNlIG9mIG1pbmQuPC9wPlxuXHRcdFx0XHRcdFx0PHAgY2xhc3M9XCJsZWFybl9fbW9yZV9fcG9wZmVhdHVyZVwiPkxlYXJuIG1vcmU8L3A+XG5cdFx0XHRcdFx0PC9kaXY+YFxuXHRcdFx0XHRcdGNhcnRPcHRpb24ubmV4dEVsZW1lbnRTaWJsaW5nLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJlbmQnLGh0bWxDb250ZXh0KVxuXHRcdFx0XHRcdGNhcnRPcHRpb24ucGFyZW50RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV0uaW5uZXJUZXh0ID0gJ0FkZCBJbnN1cmFuY2UnO1xuXG5cdFx0XHRcdFx0Y29uc3QgbGVhcm5tb3JlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxlYXJuX19tb3JlX19wb3BmZWF0dXJlJylcblx0XHRcdFx0XHRsZWFybm1vcmVCdG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHRcdGluc3VyYW5jZUJ0bi5jbGljaygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHR9XG59IiwiaW1wb3J0IFBvcFVwQ29udGVudCBmcm9tIFwiLi9wb3BVcENvbnRlbnRcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5ld0VsZW1lbnRzIHtcbiBhZGRpbmdOZXdFbGVtZW50cygpIHtcbiAgY29uc3QgcG9wVXBDb250ZW50ID0gbmV3IFBvcFVwQ29udGVudCgpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3B0aV9fZGl2Jykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gIHBvcFVwQ29udGVudC5hZGRDb25lbnQoKTtcbiAgY29uc3Qgc2Ftc3VuZ0NhcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub3B0aV9fZGl2Jyk7XG5cdFx0XHRzYW1zdW5nQ2FyZS5mb3JFYWNoKHNhbXN1bmdDYXJlID0+IHtcbiAgICBpZiAoc2Ftc3VuZ0NhcmUucHJldmlvdXNTaWJsaW5nLmlubmVyVGV4dCA9PT0gJ0FkZCBTYW1zdW5nIENhcmUrJykge1xuXG4gICAgIHNhbXN1bmdDYXJlLnByZXZpb3VzU2libGluZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICBjb25zdCBsZWFybm1vcmVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGVhcm5fX21vcmVfX3BvcGZlYXR1cmUnKTtcblxuICAgICBsZWFybm1vcmVCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keSA+IGFwcC1yb290ID4gY3gtc3RvcmVmcm9udCA+IG1haW4gPiBjeC1wYWdlLWxheW91dCA+IGN4LXBhZ2Utc2xvdC5Ub2tvTGVmdENvbnRlbnQuaGFzLWNvbXBvbmVudHMubmctc3Rhci1pbnNlcnRlZCA+IGN4LWNhcnQtZGV0YWlscyA+IGRpdiA+IGN4LWNhcnQtaXRlbS1saXN0ID4gZGl2ID4gZGl2ID4gY3gtY2FydC1pdGVtID4gZGl2ID4gZGl2LmNhcnQtaXRlbV9fc2VydmljZXMgPiBhcHAtY2FydC1hZGRlZC1zZXJ2aWNlcyA+IGRpdjpudGgtY2hpbGQoMSkgPiBkaXYuc2VydmljZS1pdGVtX19hY3Rpb25zID4gZGl2ID4gYnV0dG9uID4gc3Bhbi5hY3Rpb24tdGV4dC5hY3Rpb24tdGV4dC0tYmx1ZVwiKS5jbGljaygpXG4gICAgICB9XG4gICAgIH1cblxuXHRcdFx0fSk7XG4gfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcFVwQ29udGVudCB7XG4gYWRkQ29uZW50KCkge1xuICAgIGNvbnN0IGNhcnRPcHRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlcnZpY2UtaXRlbV9fbmFtZScpO1xuXG4gICAgY29uc3Qgb3VyQ29udGVudEh0bWwgPSBgXG4gICAgPGRpdiBjbGFzcz1cInNhbXN1bmdfX2NhcmVfX2RldGFpbHNcIj5cbiAgICAgICAgICA8aDIgY2xhc3M9XCJtb2RhbF9fdGl0bGVcIj5TYW1zdW5nIENhcmUrIGluY2x1ZGVzOjwvaDI+XG4gICAgICAgICAgPHVsPlxuICAgICAgICAgICAgPGxpPkZhc3QgYW5kIGNvbnZlbmllbnQgZXhwZXJ0IHJlcGFpcnMgdXNpbmcgZ2VudWluZSBTYW1zdW5nIHBhcnRzPC9saT5cbiAgICAgICAgICAgIDxsaT5pZiB5b3VyIGRldmljZSBpc24ndCBydW5uaW5nIHNtb290aGx5LCB3ZSdsbCBjaGVjayBhbmQgZml4IGFueSBpc3N1ZXM8L2xpPlxuICAgICAgICAgICAgPGxpPlN0YXkgcG93ZXJlZCB1cCB3aXRoIGhhc3NsZS1mcmVlIGJhdHRlcnkgcmVwbGFjZW1lbnRzPC9saT5cbiAgICAgICAgICAgIDxsaT5VcCB0byBmb3VyIGNsYWltcyB3aXRoaW4gMjQgbW9udGhzLCBvciB0d28gd2l0aGluIDEyIG1vbnRoczwvbGk+XG4gICAgICAgICAgICA8bGk+PGEgaHJlZj1cImh0dHBzOi8vd3d3LnNhbXN1bmcuY29tL3VrL29mZmVyL3NhbXN1bmctY2FyZS1wbHVzL1wiPlNlZSBhbGwgYmVuZWZpdHMgaGVyZS48L2E+IEtleSBkZXRhaWxzIG9mIHlvdXIgcG9saWN5IGNhbiBiZSBmb3VuZCBpbiB0aGUgPGEgaHJlZj1cImh0dHBzOi8vaW1hZ2VzLnNhbXN1bmcuY29tL2lzL2NvbnRlbnQvc2Ftc3VuZy9wNS91ay9zYW1zdW5nLW1vYmlsZS1jYXJlLWlwaWQucGRmXCI+SW5zdXJhbmNlIFByb3VkY3QgSW5mb21hdGlvbiBEb2N1bWVudChJUElEKTwvYT48L2xpPlxuICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInNhbXN1bmdfX2NhcmVfX2RldGFpbHNfXzMwZGF5c1wiPlxuICAgICAgICAgICAgPGgyIGNsYXNzPVwibW9kYWxfX3RpdGxlXCI+VHJ5IFNhbXN1bmcgQ2FyZSsgZnJlZSBmb3IgMzAgZGF5czwvaDI+XG4gICAgICAgICAgICA8cCBjbGFzcz1cImh1YmJsZS1wcm9kdWN0X19vcHRpb25zLWNvbnRlbnQtdGV4dFwiPkRvZXMgbm90IHJlbmV3IGF1dG9tYXRpY2FsbHkuIENvdmVyIHRlcm1pbmF0ZXMgYWZ0ZXIgMzAgZGF5cyB1bmxlc3MgcmVuZXdlZCBhdCBzYW1zdW5nY2FyZXBsdXMuY29tLlxuICAgICAgICAgICAgU2VydmljZSBmZWUgcGVyIGNsYWltIHN0aWxsIGFwcGxpZXMuIFZpZXcgdGhlIEluc3VyYW5jZSBQcm9kdWN0IEluZm9ybWF0aW9uIFBhY2soSVBJRCkgZm9yIGZ1bGwgcG9saWN5IGRldGFpbHMuXG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgIGBcbiAgICBjYXJ0T3B0aW9ucy5mb3JFYWNoKGNhcnRPcHRpb24gPT4ge1xuICAgICAgY29uc3QgaW5zdXJhbmNlQnRuID0gY2FydE9wdGlvbi5wYXJlbnRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZy5jaGlsZHJlblswXS5jaGlsZHJlblswXS5jaGlsZHJlblsxXTtcbiAgICAgIGluc3VyYW5jZUJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLXRpdGxlJyk7XG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fZGVzY3JpcHRpb24nKVxuICAgICAgICAgICAgY29uc3QgbW9kZWxDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3JhZGlvJyk7XG4gICAgICAgICAgICBjb25zdCB0ZXJtc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fdGVybXMnKTtcbiAgICAgICAgICAgIGNvbnN0IGZvb3RlckNvbnRhaW5lciAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Zvb3RlcicpO1xuXHRcdFx0XHRcdFx0bW9kZWxDb250YWluZXIuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmVuZCcsIG91ckNvbnRlbnRIdG1sKTtcbiAgICAgICAgICAgIGZvb3RlckNvbnRhaW5lci5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyZW5kJywgdGVybXNDb250YWluZXIpO1xuICAgICAgICAgICAgY29uc3QgY2FuY2VsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9vdGVyLm1vZGFsX19idXR0b25zLS1pbmxpbmUgPiBidXR0b24uYnV0dG9uLnBpbGwtYnRuLnBpbGwtYnRuLS13aGl0ZS5yZXNldFwiKTtcbiAgICAgICAgICAgIGNvbnN0IGFkZFRvQmFza2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9vdGVyLm1vZGFsX19idXR0b25zLS1pbmxpbmUgPiBidXR0b24uYnV0dG9uLnByaW1hcnkucGlsbC1idG4ucGlsbC1idG4tLWJsYWNrLnZpZXctbW9yZVwiKTtcblxuICAgICAgICAgICAgdGl0bGUuaW5uZXJUZXh0ID0gJ1Byb3RleHQgeW91ciBHYWxheHkgd2l0aCBTYW1zdW5nIENhcmUrJztcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLmlubmVyVGV4dCA9ICdVcCB0byAyNCBtb250aHMgb2Ygd29ybGR3aWRlIGFjY2lkZW50YWwgZGFtYWdlIGluc3VyYW5jZSBmb3IgY29tcGxldGUgcGVhY2Ugb2YgbWluZCc7XG5cbiAgICAgICAgICAgIGNvbnN0IGxhYmVscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5vcHRpb24tYm94X19sYWJlbCcpO1xuICAgICAgICAgICAgbGFiZWxzLmZvckVhY2goKGxhYmVsKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBsYWJlbC5maXJzdENoaWxkLmlubmVyVGV4dDtcbiAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICcxIHllYXIgY292ZXJhZ2UnKSB7XG4gICAgICAgICAgICAgICAgbGFiZWwubGFzdEVsZW1lbnRDaGlsZC5pbm5lclRleHQgPSAnMTItbW9udGggcG9saWN5J1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICcyIHllYXIgY292ZXJhZ2UnKSB7XG4gICAgICAgICAgICAgICAgbGFiZWwubGFzdEVsZW1lbnRDaGlsZC5pbm5lclRleHQgPSAnMjQtbW9udGggcG9saWN5J1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5hbWUuaW5jbHVkZXMoJ0ZyZWUnKSkge1xuICAgICAgICAgICAgICAgIGxhYmVsLmxhc3RFbGVtZW50Q2hpbGQuaW5uZXJUZXh0ID0gJ09uZSBtb250aCBwb2xpY3knXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIGNhbmNlbEJ0bi5pbm5lclRleHQgPSBcIk5vIFRoYW5rc1wiO1xuICAgICAgICAgICAgYWRkVG9CYXNrZXQuaW5uZXJUZXh0ID0gXCJBZGQgdG8gb3JkZXJcIjtcblx0XHRcdFx0XHR9LDE1MDApXG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0iLCIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gIFRoaXMgaXMgYSBib2lsZXJwbGF0ZSB0byB1c2UgZm9yIHRhcmdldCBhY3Rpdml0aWVzXG4vL1xuLy9cdFVSTCBleGFtcGxlOiBhZGQgaW4gdXJsIG9mIHByb2plY3QgZm9yIHZpc2liaWxpdHkgaGVyZVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNjcmlwdHMsIGhlbHBlciB3aWRnZXRzIC0gaW1wb3J0IGJlbG93XG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuaW1wb3J0IFBvcFVwQ29udGVudCBmcm9tIFwiLi9jb21wb25lbnRzL3BvcFVwQ29udGVudFwiO1xuaW1wb3J0IEFkZEVsZW1lbnRzIGZyb20gXCIuL2NvbXBvbmVudHMvYWRkRWxlbWVudHNcIjtcbmltcG9ydCBOZXdFbGVtZW50cyBmcm9tIFwiLi9jb21wb25lbnRzL25ld0VsZW1lbnRzXCI7XG52YXIgY2hlaWxsb25kb24gPSBjaGVpbGxvbmRvbiB8fCB7fTtcblxuY2hlaWxsb25kb24udGFyZ2V0Qm9pbGVycGxhdGUgPSAoZnVuY3Rpb24gKCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgbWFpbiA9IHtcblxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gVmFyaWFibGVzIGFuZCBjb25maWcgUHJvcGVydGllcyBhZGQgYmVsb3dcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cblx0XHQvL0luaXRcblx0XHRpbml0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRtYWluLmRvRXZlcnl0aGluZ1RpbWVvdXQoKTtcblx0XHR9LFxuXG5cblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdC8vIENoZWNraW5nIGpRdWVyeVxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0ZG9FdmVyeXRoaW5nVGltZW91dDogZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIF9zZWxmID0gdGhpcztcblxuXHRcdFx0Y29uc29sZS5sb2coJ1hYWCAtIGRvRXZlcnl0aGluZ1RpbWVvdXQnKTtcblxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGlmICh3aW5kb3cuJCkge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdkb0V2ZXJ5dGhpbmdUaW1lb3V0IC0galF1ZXJ5IGxvYWRlZCcpO1xuXHRcdFx0XHRcdGNvbnN0IHBvcFVwQ29udGVudCA9IG5ldyBQb3BVcENvbnRlbnQoKTtcblx0XHRcdFx0XHRjb25zdCBhZGRFbGVtZW50cyA9IG5ldyBBZGRFbGVtZW50cygpO1xuXHRcdFx0XHRcdG1haW4uYXBwZW5kTmV3U3R5bGUoKTtcblx0XHRcdFx0XHRhZGRFbGVtZW50cy5lbGVtZW50c0FkZGVkKCk7XG5cdFx0XHRcdFx0cG9wVXBDb250ZW50LmFkZENvbmVudCgpO1xuXHRcdFx0XHRcdG1haW4uZWxlbWVudE9ic2VydmF0aW9uKCk7XG5cdFx0XHRcdFx0bWFpbi5pbnN1cmVUZXh0KCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ25vIGpxdWVyeScpXG5cdFx0XHRcdFx0X3NlbGYuZG9FdmVyeXRoaW5nVGltZW91dCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCAxMDAwKVxuXHRcdH0sXG5cblxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gQWRkaW5nIHN0eWxlXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHRhcHBlbmROZXdTdHlsZTogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHQvKiBGWUk6IHRoZSBDU1MgY29kZSBpcyBpbiBzZXBhcmF0ZWQgZmlsZSwgaW4gU0NTUyBmb3JtYXQgdGhhdCBnZW5lcmF0ZXMgdGhlIENTUyBmaWxlLiBBZnRlciwgdGhlIGd1bHAgZmlsZSBmaW5kcyB0aGUgW0NTU10gYW5kIHJlcGxhY2VzIHdpdGggbWluaWZpZWQgY29kZSBmcm9tIGZpbGUgKi9cblxuXHRcdFx0Ly9UbyBpbnNlcnQgbWluaWZpZWQgaW5saW5lIHN0cmluZyB1bmNvbW1lbnQgdGhpcyB2YXJpYWJsZSBhbmQgcGFzdGUgaGVyZVxuXHRcdFx0Ly9FbHNlLCB1c2UgZGVmYXVsdCB1bmNvbW1lbnRlZCB2YXJpYWJsZVxuXHRcdFx0Ly8gdmFyIF9jc3MgPSAnJztcblxuXHRcdFx0dmFyIF9jc3MgPSAnW1tDU1NdXSc7XG5cblx0XHRcdC8vXG5cdFx0XHQvLyBBZGRpbmcgc3R5bGUgZGVmaW5pdGlvbnMgdG8gRE9NXG5cdFx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdFx0dmFyIF9oZWFkID0gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLFxuXHRcdFx0XHRfc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuXG5cdFx0XHRfc3R5bGUudHlwZSA9ICd0ZXh0L2Nzcyc7XG5cdFx0XHRpZiAoX3N0eWxlLnN0eWxlU2hlZXQpIHsgLy8gVGhpcyBpcyByZXF1aXJlZCBmb3IgSUU4IGFuZCBiZWxvdy5cblx0XHRcdFx0X3N0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IF9jc3M7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRfc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoX2NzcykpO1xuXHRcdFx0fVxuXHRcdFx0X2hlYWQuYXBwZW5kQ2hpbGQoX3N0eWxlKTtcblxuXHRcdH0sXG5cblx0XHRyZW1vdmVTdHVmZjogZnVuY3Rpb24gKCkge1xuXHRcdFx0Y29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub3B0aV9fZGl2Jyk7XG5cdFx0XHRkZXNjcmlwdGlvbi5mb3JFYWNoKChkZXNjKSA9PiB7XG5cdFx0XHRcdGlmIChkZXNjLmlubmVyVGV4dC5pbmNsdWRlcygnaW5zdXJhbmNlJykpIHtcblx0XHRcdFx0XHRkZXNjLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cdFx0XHRcdFx0ZGVzYy5wcmV2aW91c1NpYmxpbmcuc3R5bGUuY29sb3IgPSAnIzAwMDAwMCdcblx0XHRcdFx0XHRkZXNjLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoZGVzYy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmlubmVyVGV4dCA9PT0gJ0FkZCBTYW1zdW5nIENhcmUrJykge1xuXHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKCdnb3QgaW4gaGVyZSBhcyB3ZWxsJylcblx0XHRcdFx0XHRjb25zdCBhZGRpbmdOZXdFbGVtZW50cyA9IG5ldyBOZXdFbGVtZW50cygpO1xuXHRcdFx0XHRcdGFkZGluZ05ld0VsZW1lbnRzLmFkZGluZ05ld0VsZW1lbnRzKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0fSxcblxuXHRcdGVsZW1lbnRPYnNlcnZhdGlvbjogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRjb25zdCBlbGVUb09ic2VydmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1pdGVtJyk7XG5cdFx0XHRcdFx0Y29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XG5cdFx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZygndHJpZ2dlcicpXG5cdFx0XHRcdFx0XHR0aGlzLnJlbW92ZVN0dWZmKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0b2JzZXJ2ZXIub2JzZXJ2ZShlbGVUb09ic2VydmUsIHtzdWJ0cmVlOiB0cnVlLCBjaGlsZExpc3Q6IHRydWV9KVxuXHRcdH0sXG5cblx0XHRpbnN1cmVUZXh0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRjb25zdCBpbnN1cmFuY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1pdGVtX19hY3Rpb25zJyk7XG5cdFx0XHRjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGlvbi10ZXh0JykuaW5uZXJUZXh0KVxuXHRcdFx0XHRpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGlvbi10ZXh0JykuaW5uZXJUZXh0ID09PSBcIkFkZFwiKSB7XG5cdFx0XHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGlvbi10ZXh0JykuaW5uZXJUZXh0ID0gXCJBZGQgaW5zdXJhbmNlXCJcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRvYnNlcnZlci5vYnNlcnZlKGluc3VyYW5jZSwge3N1YnRyZWU6IHRydWUsIGNoaWxkTGlzdDogdHJ1ZX0pO1xuXHRcdH0sXG5cblxuXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHQvLyBTZXQgRXZlbnRzXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHRzZXRFdmVudHM6IGZ1bmN0aW9uIChlbG0gPSAnJykge1xuXG5cdFx0XHRjb25zb2xlLmxvZygnWFhYIC0gc2V0RXZlbnRzOiAnICsgZWxtKTtcblxuXHRcdFx0c3dpdGNoIChlbG0pIHtcblx0XHRcdFx0Y2FzZSAnbW9kYWwnOlxuXHRcdFx0XHRcdC8vY29kZSB0byBvcGVuIG1vZGFsO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdmaW5hbmNlUG9wdXAnOlxuXHRcdFx0XHQvL2NvZGUgdG8gb3BlbiBzb21ldGhpbmcgZWxzZTtcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblxuXG5cblx0XHR9LFxuXG5cdFx0cmVzaXplV2luZG93OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHQvLyBhcyBuZXcgZWxlbWVudHMgYWRkZWQgdG8gcGFuZWwgd2UgbmVlZCB0byByZXNpemUgd2luZG93IHRvIGFjdGl2YXRlIGFtZW5kIGhlaWdodCBvZiBQcm9kdWN0IFBhbmVsc1xuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCQod2luZG93KS5yZXNpemUoKTtcblx0XHRcdFx0Y29uc29sZS5sb2coJ3dpbmRvdyByZXNpemVkJyk7XG5cdFx0XHR9LCAxMDApO1xuXHRcdH1cblxuXG5cdH07XG5cdHJldHVybiB7XG5cdFx0bWFpbjogbWFpblxuXHR9O1xuXG59KSgpO1xuXG5jaGVpbGxvbmRvbi50YXJnZXRCb2lsZXJwbGF0ZS5tYWluLmluaXQoKTtcblxuIl19"}