{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/components/addElements.js","src/js/components/newElements.js","src/js/components/popUpContent.js","src/js/main.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","export default class AddElements {\n elementsAdded () {\n\t\t\tconst cartOptions = document.querySelectorAll('.service-item__name');\n\t\t\tcartOptions.forEach(cartOption => {\n\t\t\t\tif (cartOption.innerText === \"Insurance\" || cartOption.innerText === \"Protect your Galaxy with Samsung Care+\") {\n\t\t\t\t\tconst sku = cartOption.parentElement.parentElement.parentElement.parentElement.parentElement.children[2].children[4].innerText;\n\t\t\t\t\tconst insuranceBtn = cartOption.parentElement.nextElementSibling.children[0].children[0].children[1]\n\n\t\t\t\t\tcartOption.innerText = \"Protect your Galaxy with Samsung Care+\";\n\t\t\t\t\tcartOption.nextElementSibling.style.display = 'none';\n     cartOption.nextElementSibling.style.color = '#ffffff';\n\t\t\t\t\tconst htmlContext = `<div class=\"ng-star-inserted service-item__description opti__div\">\n\t\t\t\t\t${(sku.includes('SM-G99') ? `<p class=\"warning__policy\">Try Samsung Care+ free for 30 days (does not renew)*</p>`: '')}\n\t\t\t\t\t\t<p>Up to 24 months of worldwide accidental damage insurance for complete peace of mind.</p>\n\t\t\t\t\t\t<p class=\"learn__more__popfeature\">Learn more</p>\n\t\t\t\t\t</div>`\n\t\t\t\t\tcartOption.nextElementSibling.insertAdjacentHTML('afterend',htmlContext)\n\t\t\t\t\tcartOption.parentElement.nextElementSibling.children[0].children[0].children[1].innerText = 'Add Insurance';\n\n\t\t\t\t\tconst learnmoreBtn = document.querySelector('.learn__more__popfeature')\n\t\t\t\t\tlearnmoreBtn.onclick = () => {\n\t\t\t\t\t\tinsuranceBtn.click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// const cartOptions = document.querySelectorAll('.service-item__name');\n\t\t\t// cartOptions.forEach(cartOption => {\n\t\t\t// \tif (cartOption.innerText === \"Insurance\" || cartOption.innerText === \"Protect your Galaxy with Samsung Care+\") {\n\n\t\t\t// \t\tlet skus = []\n\t\t\t// \t\tconst allSkus = document.querySelectorAll('.cart-item__sku').forEach((sku) => {skus.push(sku.innerText)});\n\t\t\t// \t\tconst allInsureBtns = document.querySelectorAll('.action-text')\n\t\t\t// \t\tlet insureBtns = allInsureBtns.forEach((insureBtn) => {\n\t\t\t// \t\t\t(insureBtn.innerText.includes('Add') ? insureBtn.innerText = 'Add Insurance' : insureBtn.innerText );\n\t\t\t// \t\t});\n\t\t\t// \t\tconsole.log(insureBtns)\n\t\t\t// \t\tconst insuranceBtn = cartOption.parentElement.nextElementSibling.children[0].children[0].children[1]\n\t\t\t// \t\tcartOption.innerText = \"Protect your Galaxy with Samsung Care+\";\n\t\t\t// \t\tcartOption.nextElementSibling.style.display = 'none';\n\t\t\t// \t\tconsole.log(skus.includes('SM-G99'), skus)\n\n\t\t\t// \t\tconst htmlContext = `<div class=\"ng-star-inserted service-item__description opti__div\">\n\t\t\t// \t\t${(skus.map(s => s.includes('SM-G99')) ? `<p class=\"warning__policy\">Try Samsung Care+ free for 30 days (does not renew)*</p>`: '')}\n\t\t\t// \t\t\t<p>Up to 24 months of worldwide accidental damage insurance for complete peace of mind.</p>\n\t\t\t// \t\t\t<p class=\"learn__more__popfeature\">Learn more</p>\n\t\t\t// \t\t</div>`\n\t\t\t// \t\tcartOption.nextElementSibling.insertAdjacentHTML('afterend',htmlContext);\n\n\t\t\t// \t\tdocument.querySelectorAll('.learn__more__popfeature').forEach((btn) => {\n\n\t\t\t// \t\t\t\tbtn.onclick = () => {\n\t\t\t// \t\t\t\tinsuranceBtn.click();\n\t\t\t// \t\t\t}\n\t\t\t// \t\t})\n\n\t\t\t// \t}\n\n\n\t\t\t// })\n\t\t}\n}","import PopUpContent from \"./popUpContent\";\nexport default class NewElements {\n addingNewElements() {\n  const popUpContent = new PopUpContent();\n  document.querySelector('.opti__div').style.display = 'block';\n  popUpContent.addConent();\n  (window.innerWidth <= 920) ? popUpContent.iconBtnClick() : '';\n  const samsungCare = document.querySelectorAll('.opti__div');\n\t\t\tsamsungCare.forEach(samsungCare => {\n    if (samsungCare.previousSibling.textContent === 'Add Samsung Care+') {\n      (samsungCare.previousElementSibling)\n     samsungCare.previousSibling.style.display = 'none';\n     const learnmoreBtn = document.querySelector('.learn__more__popfeature');\n\n     learnmoreBtn.onclick = () => {\n       document.querySelector(\"body > app-root > cx-storefront > main > cx-page-layout > cx-page-slot.TokoLeftContent.has-components.ng-star-inserted > cx-cart-details > div > cx-cart-item-list > div > div > cx-cart-item > div > div.cart-item__services > app-cart-added-services > div:nth-child(1) > div.service-item__actions > div > button > span.action-text.action-text--blue\").click()\n      }\n     }\n\n\t\t\t});\n }\n}","export default class PopUpContent {\n  addConent() {\n    const cartOptions = document.querySelectorAll('.service-item__name');\n\n    cartOptions.forEach(cartOption => {\n      const insuranceBtn = cartOption.parentElement.nextElementSibling.children[0].children[0].children[1];\n      const sku = cartOption.parentElement.parentElement.parentElement.parentElement.parentElement.children[2].children[4].innerText;\n      insuranceBtn.onclick = () => {\n        console.log('pop n click')\n\n        setTimeout(() => {\n            const title = document.getElementById('modal-title');\n            const description = document.querySelector('.modal__description')\n            const modelContainer = document.querySelector('.modal__radio');\n            const termsContainer = document.querySelector('.modal__terms');\n            const footerContainer  = document.querySelector('.modal__footer');\n\t\t\t\t\t\tmodelContainer.insertAdjacentHTML('afterend', `\n            <div class=\"samsung__care__details\">\n                <h2 class=\"modal__title\">Samsung Care+ includes:</h2>\n                <ul>\n                  <li>Fast and convenient expert repairs using genuine Samsung parts</li>\n                  <li>if your device isn't running smoothly, we'll check and fix any issues</li>\n                  <li>Stay powered up with hassle-free battery replacements</li>\n                  <li>Up to four claims within 24 months, or two within 12 months</li>\n                  <li><a href=\"https://www.samsung.com/uk/offer/samsung-care-plus/\">See all benefits here.</a> Key details of your policy can be found in the <a href=\"https://images.samsung.com/is/content/samsung/p5/uk/samsung-mobile-care-ipid.pdf\">Insurance Proudct Infomation Document(IPID)</a></li>\n                </ul>\n                <div class=\"samsung__care__details__30days\" style=\"${(sku.includes('SM-G99')) ? \"display: block\" : \"display: none\"}\">\n                  <h2 class=\"modal__title\">Try Samsung Care+ free for 30 days</h2>\n                  <p class=\"hubble-product__options-content-text\">Does not renew automatically. Cover terminates after 30 days unless renewed at samsungcareplus.com.\n                  Service fee per claim still applies. View the Insurance Product Information Pack(IPID) for full policy details.\n                  </p>\n                </div>\n              </div>\n            `);\n            footerContainer.insertAdjacentElement('afterend', termsContainer);\n            const cancelBtn = document.querySelector(\".modal__footer.modal__buttons--inline > button.button.pill-btn.pill-btn--white.reset\");\n            const addToBasket = document.querySelector(\".modal__footer.modal__buttons--inline > button.button.primary.pill-btn.pill-btn--black.view-more\");\n\n            title.innerText = 'Protext your Galaxy with Samsung Care+';\n            description.innerText = 'Up to 24 months of worldwide accidental damage insurance for complete peace of mind';\n\n            const labels = document.querySelectorAll('.option-box__label');\n            labels.forEach((label) => {\n              const name = label.firstChild.innerText;\n              if (name === '1 year coverage') {\n                label.lastElementChild.innerText = '12-month policy'\n              } else if (name === '2 year coverage') {\n                label.lastElementChild.innerText = '24-month policy'\n              } else if (name.includes('Free')) {\n                label.lastElementChild.innerText = 'One month policy'\n              }\n            })\n\n            const priceTags = document.querySelectorAll('.option-box__price');\n            priceTags.forEach((prices) => {\n              const price = parseInt(prices.innerText.slice(1));\n              prices.style.textAlign = 'right';\n              if (prices.previousElementSibling.innerText.includes('1 year coverage')) {\n                const p = document.createElement('p');\n                const monthlyPrice = price / 12;\n                p.innerText = `(equilvalent to £${monthlyPrice.toFixed(2)} a month)`;\n                prices.insertAdjacentElement('beforeend',p);\n              } else if (prices.previousElementSibling.innerText.includes('2 year coverage')){\n                const p = document.createElement('p');\n                const monthlyPrice = price / 24;\n                p.innerText = `(equilvalent to £${monthlyPrice.toFixed(2)} a month)`;\n                prices.insertAdjacentElement('beforeend',p);\n              }\n            })\n            const coverOptions = document.querySelectorAll('.mat-radio-label');\n            coverOptions.forEach((options) => {\n              if (options.innerText.includes('2 year coverage')) {\n                options.click()\n              }\n            })\n            cancelBtn.innerText = \"No Thanks\";\n            addToBasket.innerText = \"Add to order\";\n\t\t\t\t\t},1500)\n      }\n    });\n  }\n\n  iconBtnClick() {\n    const cartOptions = document.querySelectorAll('.service-item__name');\n    cartOptions.forEach(cartOption => {\n      const iconInsureBtn = cartOption.parentElement.nextElementSibling.children[0].children[0].children[0];\n      const sku = cartOption.parentElement.parentElement.parentElement.parentElement.parentElement.children[2].children[4].innerText;\n      iconInsureBtn.onclick = () => {\n        console.log('pop n click icon')\n        setTimeout(() => {\n            const title = document.getElementById('modal-title');\n            const description = document.querySelector('.modal__description')\n            const modelContainer = document.querySelector('.modal__radio');\n            const termsContainer = document.querySelector('.modal__terms');\n            const footerContainer  = document.querySelector('.modal__footer');\n\t\t\t\t\t\tmodelContainer.insertAdjacentHTML('afterend', `\n            <div class=\"samsung__care__details\">\n                <h2 class=\"modal__title\">Samsung Care+ includes:</h2>\n                <ul>\n                  <li>Fast and convenient expert repairs using genuine Samsung parts</li>\n                  <li>if your device isn't running smoothly, we'll check and fix any issues</li>\n                  <li>Stay powered up with hassle-free battery replacements</li>\n                  <li>Up to four claims within 24 months, or two within 12 months</li>\n                  <li><a href=\"https://www.samsung.com/uk/offer/samsung-care-plus/\">See all benefits here.</a> Key details of your policy can be found in the <a href=\"https://images.samsung.com/is/content/samsung/p5/uk/samsung-mobile-care-ipid.pdf\">Insurance Proudct Infomation Document(IPID)</a></li>\n                </ul>\n                <div class=\"samsung__care__details__30days\" style=\"${(sku.includes('SM-G99')) ? \"display: block\" : \"display: none\"}\">\n                  <h2 class=\"modal__title\">Try Samsung Care+ free for 30 days</h2>\n                  <p class=\"hubble-product__options-content-text\">Does not renew automatically. Cover terminates after 30 days unless renewed at samsungcareplus.com.\n                  Service fee per claim still applies. View the Insurance Product Information Pack(IPID) for full policy details.\n                  </p>\n                </div>\n              </div>\n            `);\n            footerContainer.insertAdjacentElement('afterend', termsContainer);\n            const cancelBtn = document.querySelector(\".modal__footer.modal__buttons--inline > button.button.pill-btn.pill-btn--white.reset\");\n            const addToBasket = document.querySelector(\".modal__footer.modal__buttons--inline > button.button.primary.pill-btn.pill-btn--black.view-more\");\n\n            title.innerText = 'Protext your Galaxy with Samsung Care+';\n            description.innerText = 'Up to 24 months of worldwide accidental damage insurance for complete peace of mind';\n\n            const labels = document.querySelectorAll('.option-box__label');\n            labels.forEach((label) => {\n              const name = label.firstChild.innerText;\n              if (name === '1 year coverage') {\n                label.lastElementChild.innerText = '12-month policy'\n              } else if (name === '2 year coverage') {\n                label.lastElementChild.innerText = '24-month policy'\n              } else if (name.includes('Free')) {\n                label.lastElementChild.innerText = 'One month policy'\n              }\n            })\n\n            const priceTags = document.querySelectorAll('.option-box__price');\n            priceTags.forEach((prices) => {\n              const price = parseInt(prices.innerText.slice(1));\n              prices.style.textAlign = 'right';\n              if (prices.previousElementSibling.innerText.includes('1 year coverage')) {\n                const p = document.createElement('p');\n                const monthlyPrice = price / 12;\n                p.innerText = `(equilvalent to £${monthlyPrice.toFixed(2)} a month)`;\n                prices.insertAdjacentElement('beforeend',p);\n              } else if (prices.previousElementSibling.innerText.includes('2 year coverage')){\n                const p = document.createElement('p');\n                const monthlyPrice = price / 24;\n                p.innerText = `(equilvalent to £${monthlyPrice.toFixed(2)} a month)`;\n                prices.insertAdjacentElement('beforeend',p);\n              }\n            })\n            const coverOptions = document.querySelectorAll('.mat-radio-label');\n            coverOptions.forEach((options) => {\n              if (options.innerText.includes('2 year coverage')) {\n                options.click()\n              }\n            })\n            cancelBtn.innerText = \"No Thanks\";\n            addToBasket.innerText = \"Add to order\";\n\t\t\t\t\t},1500)\n      }\n    });\n  }\n}","// ==========================================================================\n//  This is a boilerplate to use for target activities\n//\n//\tURL example: add in url of project for visibility here\n// ==========================================================================\n\n// ==========================================================================\n// Scripts, helper widgets - import below\n// ==========================================================================\nimport PopUpContent from \"./components/popUpContent\";\nimport AddElements from \"./components/addElements\";\nimport NewElements from \"./components/newElements\";\nvar cheillondon = cheillondon || {};\n\ncheillondon.targetBoilerplate = (function () {\n\n\t'use strict';\n\n\tvar main = {\n\n\t\t// ==========================================================================\n\t\t// Variables and config Properties add below\n\t\t// ==========================================================================\n\n\n\t\t//Init\n\t\tinit: function () {\n\t\t\tmain.doEverythingTimeout();\n\t\t},\n\n\n\t\t// ==========================================================================\n\t\t// Checking jQuery\n\t\t// ==========================================================================\n\t\tdoEverythingTimeout: function () {\n\t\t\tvar _self = this;\n\n\t\t\tconsole.log('XXX - doEverythingTimeout');\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tif (window.$) {\n\t\t\t\t\tconsole.log('doEverythingTimeout - jQuery loaded');\n\t\t\t\t\tconst cartSkus = document.querySelectorAll('.cart-item__sku');\n\t\t\t\t\tcartSkus.forEach((cartSku) => {\n\t\t\t\t\t\tif(cartSku.innerText.includes('SM-G99') || cartSku.innerText.includes('SM-F')) {\n\t\t\t\t\t\t\tconst popUpContent = new PopUpContent();\n\t\t\t\t\t\t\tconst addElements = new AddElements();\n\t\t\t\t\t\t\tmain.appendNewStyle();\n\t\t\t\t\t\t\taddElements.elementsAdded();\n\t\t\t\t\t\t\tpopUpContent.addConent();\n\t\t\t\t\t\t\tmain.elementObservation();\n\t\t\t\t\t\t\tmain.insureText();\n\t\t\t\t\t\t\tpopUpContent.iconBtnClick();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.log('not in range')\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('no jquery')\n\t\t\t\t\t_self.doEverythingTimeout();\n\t\t\t\t}\n\t\t\t}, 1000)\n\t\t},\n\n\n\t\t// ==========================================================================\n\t\t// Adding style\n\t\t// ==========================================================================\n\t\tappendNewStyle: function () {\n\n\t\t\t/* FYI: the CSS code is in separated file, in SCSS format that generates the CSS file. After, the gulp file finds the [CSS] and replaces with minified code from file */\n\n\t\t\t//To insert minified inline string uncomment this variable and paste here\n\t\t\t//Else, use default uncommented variable\n\t\t\t// var _css = '';\n\n\t\t\tvar _css = '[[CSS]]';\n\n\t\t\t//\n\t\t\t// Adding style definitions to DOM\n\t\t\t// --------------------------------------------------------------------------\n\t\t\tvar _head = document.head || document.getElementsByTagName('head')[0],\n\t\t\t\t_style = document.createElement('style');\n\n\t\t\t_style.type = 'text/css';\n\t\t\tif (_style.styleSheet) { // This is required for IE8 and below.\n\t\t\t\t_style.styleSheet.cssText = _css;\n\t\t\t} else {\n\t\t\t\t_style.appendChild(document.createTextNode(_css));\n\t\t\t}\n\t\t\t_head.appendChild(_style);\n\n\t\t},\n\n\t\tremoveStuff: function () {\n\t\t\tconst description = document.querySelectorAll('.opti__div');\n\t\t\tdescription.forEach((desc) => {\n\t\t\t\t// console.log(desc.innerText.includes('insurance'))\n\t\t\t\tif (desc.innerText.includes('insurance')) {\n\t\t\t\t\tdesc.previousElementSibling.style.display = 'block';\n\t\t\t\t\tdesc.previousSibling.style.color = '#000000'\n\t\t\t\t\tdesc.style.display = 'none'\n\t\t\t\t}\n\t\t\t\tif (desc.previousElementSibling.textContent === 'Add Samsung Care+') {\n\t\t\t\t\t// console.log('got in here as well')\n\t\t\t\t\tconst addingNewElements = new NewElements();\n\t\t\t\t\taddingNewElements.addingNewElements();\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\telementObservation: function () {\n\t\t\t\tconst eleToObserve = document.querySelector('.service-item')\n\t\t\t\tconst eleNumTwoObserve = document.querySelector(\"div:nth-child(2) > div > cx-cart-item > div > div.cart-item__services > app-cart-added-services > div:nth-child(1)\")\n\t\t\t\t\tconst observer = new MutationObserver(() => {\n\t\t\t\t\t\tconsole.log('trigger')\n\t\t\t\t\t\tthis.removeStuff();\n\t\t\t\t\t});\n\t\t\t\t\tobserver.observe(eleToObserve, {subtree: true, childList: true});\n\t\t\t\t\t// observer.observe(eleNumTwoObserve, {subtree: true, childList: true})\n\t\t},\n\n\t\tinsureText: function () {\n\t\t\tconst insurance = document.querySelector('.service-item__actions');\n\t\t\tconst observer = new MutationObserver(() => {\n\t\t\t\t// console.log(document.querySelector('.action-text').innerText)\n\t\t\t\tif (document.querySelector('.action-text').innerText === \"Add\") {\n\t\t\t\t\tdocument.querySelector('.action-text').innerText = \"Add insurance\"\n\t\t\t\t}\n\t\t\t});\n\t\t\tobserver.observe(insurance, {subtree: true, childList: true});\n\t\t},\n\n\n\n\t\t// ==========================================================================\n\t\t// Set Events\n\t\t// ==========================================================================\n\t\tsetEvents: function (elm = '') {\n\n\t\t\tconsole.log('XXX - setEvents: ' + elm);\n\n\t\t\tswitch (elm) {\n\t\t\t\tcase 'modal':\n\t\t\t\t\t//code to open modal;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'financePopup':\n\t\t\t\t//code to open something else;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\n\n\t\t},\n\n\t\tresizeWindow: function () {\n\t\t\t// as new elements added to panel we need to resize window to activate amend height of Product Panels\n\t\t\tsetTimeout(function () {\n\t\t\t\t$(window).resize();\n\t\t\t\tconsole.log('window resized');\n\t\t\t}, 100);\n\t\t}\n\n\n\t};\n\treturn {\n\t\tmain: main\n\t};\n\n})();\n\ncheillondon.targetBoilerplate.main.init();\n\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29tcG9uZW50cy9hZGRFbGVtZW50cy5qcyIsInNyYy9qcy9jb21wb25lbnRzL25ld0VsZW1lbnRzLmpzIiwic3JjL2pzL2NvbXBvbmVudHMvcG9wVXBDb250ZW50LmpzIiwic3JjL2pzL21haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7b0xDQXFCLCtFQUNwQix5QkFDc0IsU0FBUyxpQkFBaUIsdUJBQ2xDLFFBQVEsU0FBQSxHQUNuQixHQUE2QixjQUF6QixFQUFXLFdBQXNELDJDQUF6QixFQUFXLFVBQXdELENBQzlHLElBQU0sRUFBTSxFQUFXLGNBQWMsY0FBYyxjQUFjLGNBQWMsY0FBYyxTQUFTLEdBQUcsU0FBUyxHQUFHLFVBQy9HLEVBQWUsRUFBVyxjQUFjLG1CQUFtQixTQUFTLEdBQUcsU0FBUyxHQUFHLFNBQVMsR0FFbEcsRUFBVyxVQUFZLHlDQUN2QixFQUFXLG1CQUFtQixNQUFNLFFBQVUsT0FDOUMsRUFBVyxtQkFBbUIsTUFBTSxNQUFRLFVBQzVDLElBQU0sRUFBQSxrRkFDSCxFQUFJLFNBQVMsVUFBYixzRkFBZ0gsSUFEN0csNkxBS04sRUFBVyxtQkFBbUIsbUJBQW1CLFdBQVcsR0FDNUQsRUFBVyxjQUFjLG1CQUFtQixTQUFTLEdBQUcsU0FBUyxHQUFHLFNBQVMsR0FBRyxVQUFZLGdCQUV2RSxTQUFTLGNBQWMsNEJBQy9CLFFBQVUsV0FDdEIsRUFBYSxrQ0FyQkU7OztvRUNBckIsSUFBQSxjQUFBLFFBQUEsK1BBQ3FCLCtFQUNwQiw2QkFDQyxJQUFNLEVBQWUsSUFBSSxlQUFBLFFBQ3pCLFNBQVMsY0FBYyxjQUFjLE1BQU0sUUFBVSxRQUNyRCxFQUFhLFlBQ1osT0FBTyxZQUFjLEtBQU8sRUFBYSxlQUN0QixTQUFTLGlCQUFpQixjQUNqQyxRQUFRLFNBQUEsR0FDNkIsc0JBQTVDLEVBQVksZ0JBQWdCLGNBQzdCLEVBQVksdUJBQ2QsRUFB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bUJBQ1YsT0FLTCxPQUNDLEtBQU0sR0ExSnlCLEdBK0pqQyxZQUFZLGtCQUFrQixLQUFLIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWRkRWxlbWVudHMge1xuIGVsZW1lbnRzQWRkZWQgKCkge1xuXHRcdFx0Y29uc3QgY2FydE9wdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VydmljZS1pdGVtX19uYW1lJyk7XG5cdFx0XHRjYXJ0T3B0aW9ucy5mb3JFYWNoKGNhcnRPcHRpb24gPT4ge1xuXHRcdFx0XHRpZiAoY2FydE9wdGlvbi5pbm5lclRleHQgPT09IFwiSW5zdXJhbmNlXCIgfHwgY2FydE9wdGlvbi5pbm5lclRleHQgPT09IFwiUHJvdGVjdCB5b3VyIEdhbGF4eSB3aXRoIFNhbXN1bmcgQ2FyZStcIikge1xuXHRcdFx0XHRcdGNvbnN0IHNrdSA9IGNhcnRPcHRpb24ucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmNoaWxkcmVuWzJdLmNoaWxkcmVuWzRdLmlubmVyVGV4dDtcblx0XHRcdFx0XHRjb25zdCBpbnN1cmFuY2VCdG4gPSBjYXJ0T3B0aW9uLnBhcmVudEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzFdXG5cblx0XHRcdFx0XHRjYXJ0T3B0aW9uLmlubmVyVGV4dCA9IFwiUHJvdGVjdCB5b3VyIEdhbGF4eSB3aXRoIFNhbXN1bmcgQ2FyZStcIjtcblx0XHRcdFx0XHRjYXJ0T3B0aW9uLm5leHRFbGVtZW50U2libGluZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICBjYXJ0T3B0aW9uLm5leHRFbGVtZW50U2libGluZy5zdHlsZS5jb2xvciA9ICcjZmZmZmZmJztcblx0XHRcdFx0XHRjb25zdCBodG1sQ29udGV4dCA9IGA8ZGl2IGNsYXNzPVwibmctc3Rhci1pbnNlcnRlZCBzZXJ2aWNlLWl0ZW1fX2Rlc2NyaXB0aW9uIG9wdGlfX2RpdlwiPlxuXHRcdFx0XHRcdCR7KHNrdS5pbmNsdWRlcygnU00tRzk5JykgPyBgPHAgY2xhc3M9XCJ3YXJuaW5nX19wb2xpY3lcIj5UcnkgU2Ftc3VuZyBDYXJlKyBmcmVlIGZvciAzMCBkYXlzIChkb2VzIG5vdCByZW5ldykqPC9wPmA6ICcnKX1cblx0XHRcdFx0XHRcdDxwPlVwIHRvIDI0IG1vbnRocyBvZiB3b3JsZHdpZGUgYWNjaWRlbnRhbCBkYW1hZ2UgaW5zdXJhbmNlIGZvciBjb21wbGV0ZSBwZWFjZSBvZiBtaW5kLjwvcD5cblx0XHRcdFx0XHRcdDxwIGNsYXNzPVwibGVhcm5fX21vcmVfX3BvcGZlYXR1cmVcIj5MZWFybiBtb3JlPC9wPlxuXHRcdFx0XHRcdDwvZGl2PmBcblx0XHRcdFx0XHRjYXJ0T3B0aW9uLm5leHRFbGVtZW50U2libGluZy5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyZW5kJyxodG1sQ29udGV4dClcblx0XHRcdFx0XHRjYXJ0T3B0aW9uLnBhcmVudEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzFdLmlubmVyVGV4dCA9ICdBZGQgSW5zdXJhbmNlJztcblxuXHRcdFx0XHRcdGNvbnN0IGxlYXJubW9yZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sZWFybl9fbW9yZV9fcG9wZmVhdHVyZScpXG5cdFx0XHRcdFx0bGVhcm5tb3JlQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdFx0XHRpbnN1cmFuY2VCdG4uY2xpY2soKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cblx0XHRcdC8vIGNvbnN0IGNhcnRPcHRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlcnZpY2UtaXRlbV9fbmFtZScpO1xuXHRcdFx0Ly8gY2FydE9wdGlvbnMuZm9yRWFjaChjYXJ0T3B0aW9uID0+IHtcblx0XHRcdC8vIFx0aWYgKGNhcnRPcHRpb24uaW5uZXJUZXh0ID09PSBcIkluc3VyYW5jZVwiIHx8IGNhcnRPcHRpb24uaW5uZXJUZXh0ID09PSBcIlByb3RlY3QgeW91ciBHYWxheHkgd2l0aCBTYW1zdW5nIENhcmUrXCIpIHtcblxuXHRcdFx0Ly8gXHRcdGxldCBza3VzID0gW11cblx0XHRcdC8vIFx0XHRjb25zdCBhbGxTa3VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhcnQtaXRlbV9fc2t1JykuZm9yRWFjaCgoc2t1KSA9PiB7c2t1cy5wdXNoKHNrdS5pbm5lclRleHQpfSk7XG5cdFx0XHQvLyBcdFx0Y29uc3QgYWxsSW5zdXJlQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hY3Rpb24tdGV4dCcpXG5cdFx0XHQvLyBcdFx0bGV0IGluc3VyZUJ0bnMgPSBhbGxJbnN1cmVCdG5zLmZvckVhY2goKGluc3VyZUJ0bikgPT4ge1xuXHRcdFx0Ly8gXHRcdFx0KGluc3VyZUJ0bi5pbm5lclRleHQuaW5jbHVkZXMoJ0FkZCcpID8gaW5zdXJlQnRuLmlubmVyVGV4dCA9ICdBZGQgSW5zdXJhbmNlJyA6IGluc3VyZUJ0bi5pbm5lclRleHQgKTtcblx0XHRcdC8vIFx0XHR9KTtcblx0XHRcdC8vIFx0XHRjb25zb2xlLmxvZyhpbnN1cmVCdG5zKVxuXHRcdFx0Ly8gXHRcdGNvbnN0IGluc3VyYW5jZUJ0biA9IGNhcnRPcHRpb24ucGFyZW50RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV1cblx0XHRcdC8vIFx0XHRjYXJ0T3B0aW9uLmlubmVyVGV4dCA9IFwiUHJvdGVjdCB5b3VyIEdhbGF4eSB3aXRoIFNhbXN1bmcgQ2FyZStcIjtcblx0XHRcdC8vIFx0XHRjYXJ0T3B0aW9uLm5leHRFbGVtZW50U2libGluZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdFx0Ly8gXHRcdGNvbnNvbGUubG9nKHNrdXMuaW5jbHVkZXMoJ1NNLUc5OScpLCBza3VzKVxuXG5cdFx0XHQvLyBcdFx0Y29uc3QgaHRtbENvbnRleHQgPSBgPGRpdiBjbGFzcz1cIm5nLXN0YXItaW5zZXJ0ZWQgc2VydmljZS1pdGVtX19kZXNjcmlwdGlvbiBvcHRpX19kaXZcIj5cblx0XHRcdC8vIFx0XHQkeyhza3VzLm1hcChzID0+IHMuaW5jbHVkZXMoJ1NNLUc5OScpKSA/IGA8cCBjbGFzcz1cIndhcm5pbmdfX3BvbGljeVwiPlRyeSBTYW1zdW5nIENhcmUrIGZyZWUgZm9yIDMwIGRheXMgKGRvZXMgbm90IHJlbmV3KSo8L3A+YDogJycpfVxuXHRcdFx0Ly8gXHRcdFx0PHA+VXAgdG8gMjQgbW9udGhzIG9mIHdvcmxkd2lkZSBhY2NpZGVudGFsIGRhbWFnZSBpbnN1cmFuY2UgZm9yIGNvbXBsZXRlIHBlYWNlIG9mIG1pbmQuPC9wPlxuXHRcdFx0Ly8gXHRcdFx0PHAgY2xhc3M9XCJsZWFybl9fbW9yZV9fcG9wZmVhdHVyZVwiPkxlYXJuIG1vcmU8L3A+XG5cdFx0XHQvLyBcdFx0PC9kaXY+YFxuXHRcdFx0Ly8gXHRcdGNhcnRPcHRpb24ubmV4dEVsZW1lbnRTaWJsaW5nLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJlbmQnLGh0bWxDb250ZXh0KTtcblxuXHRcdFx0Ly8gXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5sZWFybl9fbW9yZV9fcG9wZmVhdHVyZScpLmZvckVhY2goKGJ0bikgPT4ge1xuXG5cdFx0XHQvLyBcdFx0XHRcdGJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0Ly8gXHRcdFx0XHRpbnN1cmFuY2VCdG4uY2xpY2soKTtcblx0XHRcdC8vIFx0XHRcdH1cblx0XHRcdC8vIFx0XHR9KVxuXG5cdFx0XHQvLyBcdH1cblxuXG5cdFx0XHQvLyB9KVxuXHRcdH1cbn0iLCJpbXBvcnQgUG9wVXBDb250ZW50IGZyb20gXCIuL3BvcFVwQ29udGVudFwiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTmV3RWxlbWVudHMge1xuIGFkZGluZ05ld0VsZW1lbnRzKCkge1xuICBjb25zdCBwb3BVcENvbnRlbnQgPSBuZXcgUG9wVXBDb250ZW50KCk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vcHRpX19kaXYnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgcG9wVXBDb250ZW50LmFkZENvbmVudCgpO1xuICAod2luZG93LmlubmVyV2lkdGggPD0gOTIwKSA/IHBvcFVwQ29udGVudC5pY29uQnRuQ2xpY2soKSA6ICcnO1xuICBjb25zdCBzYW1zdW5nQ2FyZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5vcHRpX19kaXYnKTtcblx0XHRcdHNhbXN1bmdDYXJlLmZvckVhY2goc2Ftc3VuZ0NhcmUgPT4ge1xuICAgIGlmIChzYW1zdW5nQ2FyZS5wcmV2aW91c1NpYmxpbmcudGV4dENvbnRlbnQgPT09ICdBZGQgU2Ftc3VuZyBDYXJlKycpIHtcbiAgICAgIChzYW1zdW5nQ2FyZS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKVxuICAgICBzYW1zdW5nQ2FyZS5wcmV2aW91c1NpYmxpbmcuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgY29uc3QgbGVhcm5tb3JlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxlYXJuX19tb3JlX19wb3BmZWF0dXJlJyk7XG5cbiAgICAgbGVhcm5tb3JlQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHkgPiBhcHAtcm9vdCA+IGN4LXN0b3JlZnJvbnQgPiBtYWluID4gY3gtcGFnZS1sYXlvdXQgPiBjeC1wYWdlLXNsb3QuVG9rb0xlZnRDb250ZW50Lmhhcy1jb21wb25lbnRzLm5nLXN0YXItaW5zZXJ0ZWQgPiBjeC1jYXJ0LWRldGFpbHMgPiBkaXYgPiBjeC1jYXJ0LWl0ZW0tbGlzdCA+IGRpdiA+IGRpdiA+IGN4LWNhcnQtaXRlbSA+IGRpdiA+IGRpdi5jYXJ0LWl0ZW1fX3NlcnZpY2VzID4gYXBwLWNhcnQtYWRkZWQtc2VydmljZXMgPiBkaXY6bnRoLWNoaWxkKDEpID4gZGl2LnNlcnZpY2UtaXRlbV9fYWN0aW9ucyA+IGRpdiA+IGJ1dHRvbiA+IHNwYW4uYWN0aW9uLXRleHQuYWN0aW9uLXRleHQtLWJsdWVcIikuY2xpY2soKVxuICAgICAgfVxuICAgICB9XG5cblx0XHRcdH0pO1xuIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3BVcENvbnRlbnQge1xuICBhZGRDb25lbnQoKSB7XG4gICAgY29uc3QgY2FydE9wdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VydmljZS1pdGVtX19uYW1lJyk7XG5cbiAgICBjYXJ0T3B0aW9ucy5mb3JFYWNoKGNhcnRPcHRpb24gPT4ge1xuICAgICAgY29uc3QgaW5zdXJhbmNlQnRuID0gY2FydE9wdGlvbi5wYXJlbnRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZy5jaGlsZHJlblswXS5jaGlsZHJlblswXS5jaGlsZHJlblsxXTtcbiAgICAgIGNvbnN0IHNrdSA9IGNhcnRPcHRpb24ucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmNoaWxkcmVuWzJdLmNoaWxkcmVuWzRdLmlubmVyVGV4dDtcbiAgICAgIGluc3VyYW5jZUJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygncG9wIG4gY2xpY2snKVxuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwtdGl0bGUnKTtcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19kZXNjcmlwdGlvbicpXG4gICAgICAgICAgICBjb25zdCBtb2RlbENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fcmFkaW8nKTtcbiAgICAgICAgICAgIGNvbnN0IHRlcm1zQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX190ZXJtcycpO1xuICAgICAgICAgICAgY29uc3QgZm9vdGVyQ29udGFpbmVyICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fZm9vdGVyJyk7XG5cdFx0XHRcdFx0XHRtb2RlbENvbnRhaW5lci5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyZW5kJywgYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNhbXN1bmdfX2NhcmVfX2RldGFpbHNcIj5cbiAgICAgICAgICAgICAgICA8aDIgY2xhc3M9XCJtb2RhbF9fdGl0bGVcIj5TYW1zdW5nIENhcmUrIGluY2x1ZGVzOjwvaDI+XG4gICAgICAgICAgICAgICAgPHVsPlxuICAgICAgICAgICAgICAgICAgPGxpPkZhc3QgYW5kIGNvbnZlbmllbnQgZXhwZXJ0IHJlcGFpcnMgdXNpbmcgZ2VudWluZSBTYW1zdW5nIHBhcnRzPC9saT5cbiAgICAgICAgICAgICAgICAgIDxsaT5pZiB5b3VyIGRldmljZSBpc24ndCBydW5uaW5nIHNtb290aGx5LCB3ZSdsbCBjaGVjayBhbmQgZml4IGFueSBpc3N1ZXM8L2xpPlxuICAgICAgICAgICAgICAgICAgPGxpPlN0YXkgcG93ZXJlZCB1cCB3aXRoIGhhc3NsZS1mcmVlIGJhdHRlcnkgcmVwbGFjZW1lbnRzPC9saT5cbiAgICAgICAgICAgICAgICAgIDxsaT5VcCB0byBmb3VyIGNsYWltcyB3aXRoaW4gMjQgbW9udGhzLCBvciB0d28gd2l0aGluIDEyIG1vbnRoczwvbGk+XG4gICAgICAgICAgICAgICAgICA8bGk+PGEgaHJlZj1cImh0dHBzOi8vd3d3LnNhbXN1bmcuY29tL3VrL29mZmVyL3NhbXN1bmctY2FyZS1wbHVzL1wiPlNlZSBhbGwgYmVuZWZpdHMgaGVyZS48L2E+IEtleSBkZXRhaWxzIG9mIHlvdXIgcG9saWN5IGNhbiBiZSBmb3VuZCBpbiB0aGUgPGEgaHJlZj1cImh0dHBzOi8vaW1hZ2VzLnNhbXN1bmcuY29tL2lzL2NvbnRlbnQvc2Ftc3VuZy9wNS91ay9zYW1zdW5nLW1vYmlsZS1jYXJlLWlwaWQucGRmXCI+SW5zdXJhbmNlIFByb3VkY3QgSW5mb21hdGlvbiBEb2N1bWVudChJUElEKTwvYT48L2xpPlxuICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNhbXN1bmdfX2NhcmVfX2RldGFpbHNfXzMwZGF5c1wiIHN0eWxlPVwiJHsoc2t1LmluY2x1ZGVzKCdTTS1HOTknKSkgPyBcImRpc3BsYXk6IGJsb2NrXCIgOiBcImRpc3BsYXk6IG5vbmVcIn1cIj5cbiAgICAgICAgICAgICAgICAgIDxoMiBjbGFzcz1cIm1vZGFsX190aXRsZVwiPlRyeSBTYW1zdW5nIENhcmUrIGZyZWUgZm9yIDMwIGRheXM8L2gyPlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJodWJibGUtcHJvZHVjdF9fb3B0aW9ucy1jb250ZW50LXRleHRcIj5Eb2VzIG5vdCByZW5ldyBhdXRvbWF0aWNhbGx5LiBDb3ZlciB0ZXJtaW5hdGVzIGFmdGVyIDMwIGRheXMgdW5sZXNzIHJlbmV3ZWQgYXQgc2Ftc3VuZ2NhcmVwbHVzLmNvbS5cbiAgICAgICAgICAgICAgICAgIFNlcnZpY2UgZmVlIHBlciBjbGFpbSBzdGlsbCBhcHBsaWVzLiBWaWV3IHRoZSBJbnN1cmFuY2UgUHJvZHVjdCBJbmZvcm1hdGlvbiBQYWNrKElQSUQpIGZvciBmdWxsIHBvbGljeSBkZXRhaWxzLlxuICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGApO1xuICAgICAgICAgICAgZm9vdGVyQ29udGFpbmVyLmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJlbmQnLCB0ZXJtc0NvbnRhaW5lcik7XG4gICAgICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb290ZXIubW9kYWxfX2J1dHRvbnMtLWlubGluZSA+IGJ1dHRvbi5idXR0b24ucGlsbC1idG4ucGlsbC1idG4tLXdoaXRlLnJlc2V0XCIpO1xuICAgICAgICAgICAgY29uc3QgYWRkVG9CYXNrZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb290ZXIubW9kYWxfX2J1dHRvbnMtLWlubGluZSA+IGJ1dHRvbi5idXR0b24ucHJpbWFyeS5waWxsLWJ0bi5waWxsLWJ0bi0tYmxhY2sudmlldy1tb3JlXCIpO1xuXG4gICAgICAgICAgICB0aXRsZS5pbm5lclRleHQgPSAnUHJvdGV4dCB5b3VyIEdhbGF4eSB3aXRoIFNhbXN1bmcgQ2FyZSsnO1xuICAgICAgICAgICAgZGVzY3JpcHRpb24uaW5uZXJUZXh0ID0gJ1VwIHRvIDI0IG1vbnRocyBvZiB3b3JsZHdpZGUgYWNjaWRlbnRhbCBkYW1hZ2UgaW5zdXJhbmNlIGZvciBjb21wbGV0ZSBwZWFjZSBvZiBtaW5kJztcblxuICAgICAgICAgICAgY29uc3QgbGFiZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm9wdGlvbi1ib3hfX2xhYmVsJyk7XG4gICAgICAgICAgICBsYWJlbHMuZm9yRWFjaCgobGFiZWwpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGxhYmVsLmZpcnN0Q2hpbGQuaW5uZXJUZXh0O1xuICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gJzEgeWVhciBjb3ZlcmFnZScpIHtcbiAgICAgICAgICAgICAgICBsYWJlbC5sYXN0RWxlbWVudENoaWxkLmlubmVyVGV4dCA9ICcxMi1tb250aCBwb2xpY3knXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJzIgeWVhciBjb3ZlcmFnZScpIHtcbiAgICAgICAgICAgICAgICBsYWJlbC5sYXN0RWxlbWVudENoaWxkLmlubmVyVGV4dCA9ICcyNC1tb250aCBwb2xpY3knXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAobmFtZS5pbmNsdWRlcygnRnJlZScpKSB7XG4gICAgICAgICAgICAgICAgbGFiZWwubGFzdEVsZW1lbnRDaGlsZC5pbm5lclRleHQgPSAnT25lIG1vbnRoIHBvbGljeSdcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgY29uc3QgcHJpY2VUYWdzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm9wdGlvbi1ib3hfX3ByaWNlJyk7XG4gICAgICAgICAgICBwcmljZVRhZ3MuZm9yRWFjaCgocHJpY2VzKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHByaWNlID0gcGFyc2VJbnQocHJpY2VzLmlubmVyVGV4dC5zbGljZSgxKSk7XG4gICAgICAgICAgICAgIHByaWNlcy5zdHlsZS50ZXh0QWxpZ24gPSAncmlnaHQnO1xuICAgICAgICAgICAgICBpZiAocHJpY2VzLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuaW5uZXJUZXh0LmluY2x1ZGVzKCcxIHllYXIgY292ZXJhZ2UnKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgbW9udGhseVByaWNlID0gcHJpY2UgLyAxMjtcbiAgICAgICAgICAgICAgICBwLmlubmVyVGV4dCA9IGAoZXF1aWx2YWxlbnQgdG8gwqMke21vbnRobHlQcmljZS50b0ZpeGVkKDIpfSBhIG1vbnRoKWA7XG4gICAgICAgICAgICAgICAgcHJpY2VzLmluc2VydEFkamFjZW50RWxlbWVudCgnYmVmb3JlZW5kJyxwKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChwcmljZXMucHJldmlvdXNFbGVtZW50U2libGluZy5pbm5lclRleHQuaW5jbHVkZXMoJzIgeWVhciBjb3ZlcmFnZScpKXtcbiAgICAgICAgICAgICAgICBjb25zdCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vbnRobHlQcmljZSA9IHByaWNlIC8gMjQ7XG4gICAgICAgICAgICAgICAgcC5pbm5lclRleHQgPSBgKGVxdWlsdmFsZW50IHRvIMKjJHttb250aGx5UHJpY2UudG9GaXhlZCgyKX0gYSBtb250aClgO1xuICAgICAgICAgICAgICAgIHByaWNlcy5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2JlZm9yZWVuZCcscCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBjb25zdCBjb3Zlck9wdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWF0LXJhZGlvLWxhYmVsJyk7XG4gICAgICAgICAgICBjb3Zlck9wdGlvbnMuZm9yRWFjaCgob3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgICBpZiAob3B0aW9ucy5pbm5lclRleHQuaW5jbHVkZXMoJzIgeWVhciBjb3ZlcmFnZScpKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jbGljaygpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBjYW5jZWxCdG4uaW5uZXJUZXh0ID0gXCJObyBUaGFua3NcIjtcbiAgICAgICAgICAgIGFkZFRvQmFza2V0LmlubmVyVGV4dCA9IFwiQWRkIHRvIG9yZGVyXCI7XG5cdFx0XHRcdFx0fSwxNTAwKVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaWNvbkJ0bkNsaWNrKCkge1xuICAgIGNvbnN0IGNhcnRPcHRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlcnZpY2UtaXRlbV9fbmFtZScpO1xuICAgIGNhcnRPcHRpb25zLmZvckVhY2goY2FydE9wdGlvbiA9PiB7XG4gICAgICBjb25zdCBpY29uSW5zdXJlQnRuID0gY2FydE9wdGlvbi5wYXJlbnRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZy5jaGlsZHJlblswXS5jaGlsZHJlblswXS5jaGlsZHJlblswXTtcbiAgICAgIGNvbnN0IHNrdSA9IGNhcnRPcHRpb24ucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmNoaWxkcmVuWzJdLmNoaWxkcmVuWzRdLmlubmVyVGV4dDtcbiAgICAgIGljb25JbnN1cmVCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ3BvcCBuIGNsaWNrIGljb24nKVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLXRpdGxlJyk7XG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fZGVzY3JpcHRpb24nKVxuICAgICAgICAgICAgY29uc3QgbW9kZWxDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3JhZGlvJyk7XG4gICAgICAgICAgICBjb25zdCB0ZXJtc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fdGVybXMnKTtcbiAgICAgICAgICAgIGNvbnN0IGZvb3RlckNvbnRhaW5lciAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Zvb3RlcicpO1xuXHRcdFx0XHRcdFx0bW9kZWxDb250YWluZXIuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmVuZCcsIGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzYW1zdW5nX19jYXJlX19kZXRhaWxzXCI+XG4gICAgICAgICAgICAgICAgPGgyIGNsYXNzPVwibW9kYWxfX3RpdGxlXCI+U2Ftc3VuZyBDYXJlKyBpbmNsdWRlczo8L2gyPlxuICAgICAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgICAgIDxsaT5GYXN0IGFuZCBjb252ZW5pZW50IGV4cGVydCByZXBhaXJzIHVzaW5nIGdlbnVpbmUgU2Ftc3VuZyBwYXJ0czwvbGk+XG4gICAgICAgICAgICAgICAgICA8bGk+aWYgeW91ciBkZXZpY2UgaXNuJ3QgcnVubmluZyBzbW9vdGhseSwgd2UnbGwgY2hlY2sgYW5kIGZpeCBhbnkgaXNzdWVzPC9saT5cbiAgICAgICAgICAgICAgICAgIDxsaT5TdGF5IHBvd2VyZWQgdXAgd2l0aCBoYXNzbGUtZnJlZSBiYXR0ZXJ5IHJlcGxhY2VtZW50czwvbGk+XG4gICAgICAgICAgICAgICAgICA8bGk+VXAgdG8gZm91ciBjbGFpbXMgd2l0aGluIDI0IG1vbnRocywgb3IgdHdvIHdpdGhpbiAxMiBtb250aHM8L2xpPlxuICAgICAgICAgICAgICAgICAgPGxpPjxhIGhyZWY9XCJodHRwczovL3d3dy5zYW1zdW5nLmNvbS91ay9vZmZlci9zYW1zdW5nLWNhcmUtcGx1cy9cIj5TZWUgYWxsIGJlbmVmaXRzIGhlcmUuPC9hPiBLZXkgZGV0YWlscyBvZiB5b3VyIHBvbGljeSBjYW4gYmUgZm91bmQgaW4gdGhlIDxhIGhyZWY9XCJodHRwczovL2ltYWdlcy5zYW1zdW5nLmNvbS9pcy9jb250ZW50L3NhbXN1bmcvcDUvdWsvc2Ftc3VuZy1tb2JpbGUtY2FyZS1pcGlkLnBkZlwiPkluc3VyYW5jZSBQcm91ZGN0IEluZm9tYXRpb24gRG9jdW1lbnQoSVBJRCk8L2E+PC9saT5cbiAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzYW1zdW5nX19jYXJlX19kZXRhaWxzX18zMGRheXNcIiBzdHlsZT1cIiR7KHNrdS5pbmNsdWRlcygnU00tRzk5JykpID8gXCJkaXNwbGF5OiBibG9ja1wiIDogXCJkaXNwbGF5OiBub25lXCJ9XCI+XG4gICAgICAgICAgICAgICAgICA8aDIgY2xhc3M9XCJtb2RhbF9fdGl0bGVcIj5UcnkgU2Ftc3VuZyBDYXJlKyBmcmVlIGZvciAzMCBkYXlzPC9oMj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiaHViYmxlLXByb2R1Y3RfX29wdGlvbnMtY29udGVudC10ZXh0XCI+RG9lcyBub3QgcmVuZXcgYXV0b21hdGljYWxseS4gQ292ZXIgdGVybWluYXRlcyBhZnRlciAzMCBkYXlzIHVubGVzcyByZW5ld2VkIGF0IHNhbXN1bmdjYXJlcGx1cy5jb20uXG4gICAgICAgICAgICAgICAgICBTZXJ2aWNlIGZlZSBwZXIgY2xhaW0gc3RpbGwgYXBwbGllcy4gVmlldyB0aGUgSW5zdXJhbmNlIFByb2R1Y3QgSW5mb3JtYXRpb24gUGFjayhJUElEKSBmb3IgZnVsbCBwb2xpY3kgZGV0YWlscy5cbiAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgKTtcbiAgICAgICAgICAgIGZvb3RlckNvbnRhaW5lci5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyZW5kJywgdGVybXNDb250YWluZXIpO1xuICAgICAgICAgICAgY29uc3QgY2FuY2VsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9vdGVyLm1vZGFsX19idXR0b25zLS1pbmxpbmUgPiBidXR0b24uYnV0dG9uLnBpbGwtYnRuLnBpbGwtYnRuLS13aGl0ZS5yZXNldFwiKTtcbiAgICAgICAgICAgIGNvbnN0IGFkZFRvQmFza2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9vdGVyLm1vZGFsX19idXR0b25zLS1pbmxpbmUgPiBidXR0b24uYnV0dG9uLnByaW1hcnkucGlsbC1idG4ucGlsbC1idG4tLWJsYWNrLnZpZXctbW9yZVwiKTtcblxuICAgICAgICAgICAgdGl0bGUuaW5uZXJUZXh0ID0gJ1Byb3RleHQgeW91ciBHYWxheHkgd2l0aCBTYW1zdW5nIENhcmUrJztcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLmlubmVyVGV4dCA9ICdVcCB0byAyNCBtb250aHMgb2Ygd29ybGR3aWRlIGFjY2lkZW50YWwgZGFtYWdlIGluc3VyYW5jZSBmb3IgY29tcGxldGUgcGVhY2Ugb2YgbWluZCc7XG5cbiAgICAgICAgICAgIGNvbnN0IGxhYmVscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5vcHRpb24tYm94X19sYWJlbCcpO1xuICAgICAgICAgICAgbGFiZWxzLmZvckVhY2goKGxhYmVsKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBsYWJlbC5maXJzdENoaWxkLmlubmVyVGV4dDtcbiAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICcxIHllYXIgY292ZXJhZ2UnKSB7XG4gICAgICAgICAgICAgICAgbGFiZWwubGFzdEVsZW1lbnRDaGlsZC5pbm5lclRleHQgPSAnMTItbW9udGggcG9saWN5J1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICcyIHllYXIgY292ZXJhZ2UnKSB7XG4gICAgICAgICAgICAgICAgbGFiZWwubGFzdEVsZW1lbnRDaGlsZC5pbm5lclRleHQgPSAnMjQtbW9udGggcG9saWN5J1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5hbWUuaW5jbHVkZXMoJ0ZyZWUnKSkge1xuICAgICAgICAgICAgICAgIGxhYmVsLmxhc3RFbGVtZW50Q2hpbGQuaW5uZXJUZXh0ID0gJ09uZSBtb250aCBwb2xpY3knXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIGNvbnN0IHByaWNlVGFncyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5vcHRpb24tYm94X19wcmljZScpO1xuICAgICAgICAgICAgcHJpY2VUYWdzLmZvckVhY2goKHByaWNlcykgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBwcmljZSA9IHBhcnNlSW50KHByaWNlcy5pbm5lclRleHQuc2xpY2UoMSkpO1xuICAgICAgICAgICAgICBwcmljZXMuc3R5bGUudGV4dEFsaWduID0gJ3JpZ2h0JztcbiAgICAgICAgICAgICAgaWYgKHByaWNlcy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmlubmVyVGV4dC5pbmNsdWRlcygnMSB5ZWFyIGNvdmVyYWdlJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vbnRobHlQcmljZSA9IHByaWNlIC8gMTI7XG4gICAgICAgICAgICAgICAgcC5pbm5lclRleHQgPSBgKGVxdWlsdmFsZW50IHRvIMKjJHttb250aGx5UHJpY2UudG9GaXhlZCgyKX0gYSBtb250aClgO1xuICAgICAgICAgICAgICAgIHByaWNlcy5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2JlZm9yZWVuZCcscCk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJpY2VzLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuaW5uZXJUZXh0LmluY2x1ZGVzKCcyIHllYXIgY292ZXJhZ2UnKSl7XG4gICAgICAgICAgICAgICAgY29uc3QgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBtb250aGx5UHJpY2UgPSBwcmljZSAvIDI0O1xuICAgICAgICAgICAgICAgIHAuaW5uZXJUZXh0ID0gYChlcXVpbHZhbGVudCB0byDCoyR7bW9udGhseVByaWNlLnRvRml4ZWQoMil9IGEgbW9udGgpYDtcbiAgICAgICAgICAgICAgICBwcmljZXMuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdiZWZvcmVlbmQnLHApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgY29uc3QgY292ZXJPcHRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1hdC1yYWRpby1sYWJlbCcpO1xuICAgICAgICAgICAgY292ZXJPcHRpb25zLmZvckVhY2goKG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuaW5uZXJUZXh0LmluY2x1ZGVzKCcyIHllYXIgY292ZXJhZ2UnKSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuY2xpY2soKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgY2FuY2VsQnRuLmlubmVyVGV4dCA9IFwiTm8gVGhhbmtzXCI7XG4gICAgICAgICAgICBhZGRUb0Jhc2tldC5pbm5lclRleHQgPSBcIkFkZCB0byBvcmRlclwiO1xuXHRcdFx0XHRcdH0sMTUwMClcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSIsIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyAgVGhpcyBpcyBhIGJvaWxlcnBsYXRlIHRvIHVzZSBmb3IgdGFyZ2V0IGFjdGl2aXRpZXNcbi8vXG4vL1x0VVJMIGV4YW1wbGU6IGFkZCBpbiB1cmwgb2YgcHJvamVjdCBmb3IgdmlzaWJpbGl0eSBoZXJlXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gU2NyaXB0cywgaGVscGVyIHdpZGdldHMgLSBpbXBvcnQgYmVsb3dcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5pbXBvcnQgUG9wVXBDb250ZW50IGZyb20gXCIuL2NvbXBvbmVudHMvcG9wVXBDb250ZW50XCI7XG5pbXBvcnQgQWRkRWxlbWVudHMgZnJvbSBcIi4vY29tcG9uZW50cy9hZGRFbGVtZW50c1wiO1xuaW1wb3J0IE5ld0VsZW1lbnRzIGZyb20gXCIuL2NvbXBvbmVudHMvbmV3RWxlbWVudHNcIjtcbnZhciBjaGVpbGxvbmRvbiA9IGNoZWlsbG9uZG9uIHx8IHt9O1xuXG5jaGVpbGxvbmRvbi50YXJnZXRCb2lsZXJwbGF0ZSA9IChmdW5jdGlvbiAoKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBtYWluID0ge1xuXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHQvLyBWYXJpYWJsZXMgYW5kIGNvbmZpZyBQcm9wZXJ0aWVzIGFkZCBiZWxvd1xuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuXHRcdC8vSW5pdFxuXHRcdGluaXQ6IGZ1bmN0aW9uICgpIHtcblx0XHRcdG1haW4uZG9FdmVyeXRoaW5nVGltZW91dCgpO1xuXHRcdH0sXG5cblxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gQ2hlY2tpbmcgalF1ZXJ5XG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHRkb0V2ZXJ5dGhpbmdUaW1lb3V0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgX3NlbGYgPSB0aGlzO1xuXG5cdFx0XHRjb25zb2xlLmxvZygnWFhYIC0gZG9FdmVyeXRoaW5nVGltZW91dCcpO1xuXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0aWYgKHdpbmRvdy4kKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ2RvRXZlcnl0aGluZ1RpbWVvdXQgLSBqUXVlcnkgbG9hZGVkJyk7XG5cdFx0XHRcdFx0Y29uc3QgY2FydFNrdXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FydC1pdGVtX19za3UnKTtcblx0XHRcdFx0XHRjYXJ0U2t1cy5mb3JFYWNoKChjYXJ0U2t1KSA9PiB7XG5cdFx0XHRcdFx0XHRpZihjYXJ0U2t1LmlubmVyVGV4dC5pbmNsdWRlcygnU00tRzk5JykgfHwgY2FydFNrdS5pbm5lclRleHQuaW5jbHVkZXMoJ1NNLUYnKSkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBwb3BVcENvbnRlbnQgPSBuZXcgUG9wVXBDb250ZW50KCk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGFkZEVsZW1lbnRzID0gbmV3IEFkZEVsZW1lbnRzKCk7XG5cdFx0XHRcdFx0XHRcdG1haW4uYXBwZW5kTmV3U3R5bGUoKTtcblx0XHRcdFx0XHRcdFx0YWRkRWxlbWVudHMuZWxlbWVudHNBZGRlZCgpO1xuXHRcdFx0XHRcdFx0XHRwb3BVcENvbnRlbnQuYWRkQ29uZW50KCk7XG5cdFx0XHRcdFx0XHRcdG1haW4uZWxlbWVudE9ic2VydmF0aW9uKCk7XG5cdFx0XHRcdFx0XHRcdG1haW4uaW5zdXJlVGV4dCgpO1xuXHRcdFx0XHRcdFx0XHRwb3BVcENvbnRlbnQuaWNvbkJ0bkNsaWNrKCk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnbm90IGluIHJhbmdlJylcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KVxuXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ25vIGpxdWVyeScpXG5cdFx0XHRcdFx0X3NlbGYuZG9FdmVyeXRoaW5nVGltZW91dCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCAxMDAwKVxuXHRcdH0sXG5cblxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gQWRkaW5nIHN0eWxlXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHRhcHBlbmROZXdTdHlsZTogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHQvKiBGWUk6IHRoZSBDU1MgY29kZSBpcyBpbiBzZXBhcmF0ZWQgZmlsZSwgaW4gU0NTUyBmb3JtYXQgdGhhdCBnZW5lcmF0ZXMgdGhlIENTUyBmaWxlLiBBZnRlciwgdGhlIGd1bHAgZmlsZSBmaW5kcyB0aGUgW0NTU10gYW5kIHJlcGxhY2VzIHdpdGggbWluaWZpZWQgY29kZSBmcm9tIGZpbGUgKi9cblxuXHRcdFx0Ly9UbyBpbnNlcnQgbWluaWZpZWQgaW5saW5lIHN0cmluZyB1bmNvbW1lbnQgdGhpcyB2YXJpYWJsZSBhbmQgcGFzdGUgaGVyZVxuXHRcdFx0Ly9FbHNlLCB1c2UgZGVmYXVsdCB1bmNvbW1lbnRlZCB2YXJpYWJsZVxuXHRcdFx0Ly8gdmFyIF9jc3MgPSAnJztcblxuXHRcdFx0dmFyIF9jc3MgPSAnW1tDU1NdXSc7XG5cblx0XHRcdC8vXG5cdFx0XHQvLyBBZGRpbmcgc3R5bGUgZGVmaW5pdGlvbnMgdG8gRE9NXG5cdFx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdFx0dmFyIF9oZWFkID0gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLFxuXHRcdFx0XHRfc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuXG5cdFx0XHRfc3R5bGUudHlwZSA9ICd0ZXh0L2Nzcyc7XG5cdFx0XHRpZiAoX3N0eWxlLnN0eWxlU2hlZXQpIHsgLy8gVGhpcyBpcyByZXF1aXJlZCBmb3IgSUU4IGFuZCBiZWxvdy5cblx0XHRcdFx0X3N0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IF9jc3M7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRfc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoX2NzcykpO1xuXHRcdFx0fVxuXHRcdFx0X2hlYWQuYXBwZW5kQ2hpbGQoX3N0eWxlKTtcblxuXHRcdH0sXG5cblx0XHRyZW1vdmVTdHVmZjogZnVuY3Rpb24gKCkge1xuXHRcdFx0Y29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub3B0aV9fZGl2Jyk7XG5cdFx0XHRkZXNjcmlwdGlvbi5mb3JFYWNoKChkZXNjKSA9PiB7XG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKGRlc2MuaW5uZXJUZXh0LmluY2x1ZGVzKCdpbnN1cmFuY2UnKSlcblx0XHRcdFx0aWYgKGRlc2MuaW5uZXJUZXh0LmluY2x1ZGVzKCdpbnN1cmFuY2UnKSkge1xuXHRcdFx0XHRcdGRlc2MucHJldmlvdXNFbGVtZW50U2libGluZy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblx0XHRcdFx0XHRkZXNjLnByZXZpb3VzU2libGluZy5zdHlsZS5jb2xvciA9ICcjMDAwMDAwJ1xuXHRcdFx0XHRcdGRlc2Muc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChkZXNjLnByZXZpb3VzRWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQgPT09ICdBZGQgU2Ftc3VuZyBDYXJlKycpIHtcblx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZygnZ290IGluIGhlcmUgYXMgd2VsbCcpXG5cdFx0XHRcdFx0Y29uc3QgYWRkaW5nTmV3RWxlbWVudHMgPSBuZXcgTmV3RWxlbWVudHMoKTtcblx0XHRcdFx0XHRhZGRpbmdOZXdFbGVtZW50cy5hZGRpbmdOZXdFbGVtZW50cygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdH0sXG5cblx0XHRlbGVtZW50T2JzZXJ2YXRpb246IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0Y29uc3QgZWxlVG9PYnNlcnZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtaXRlbScpXG5cdFx0XHRcdGNvbnN0IGVsZU51bVR3b09ic2VydmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZGl2Om50aC1jaGlsZCgyKSA+IGRpdiA+IGN4LWNhcnQtaXRlbSA+IGRpdiA+IGRpdi5jYXJ0LWl0ZW1fX3NlcnZpY2VzID4gYXBwLWNhcnQtYWRkZWQtc2VydmljZXMgPiBkaXY6bnRoLWNoaWxkKDEpXCIpXG5cdFx0XHRcdFx0Y29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygndHJpZ2dlcicpXG5cdFx0XHRcdFx0XHR0aGlzLnJlbW92ZVN0dWZmKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0b2JzZXJ2ZXIub2JzZXJ2ZShlbGVUb09ic2VydmUsIHtzdWJ0cmVlOiB0cnVlLCBjaGlsZExpc3Q6IHRydWV9KTtcblx0XHRcdFx0XHQvLyBvYnNlcnZlci5vYnNlcnZlKGVsZU51bVR3b09ic2VydmUsIHtzdWJ0cmVlOiB0cnVlLCBjaGlsZExpc3Q6IHRydWV9KVxuXHRcdH0sXG5cblx0XHRpbnN1cmVUZXh0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRjb25zdCBpbnN1cmFuY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1pdGVtX19hY3Rpb25zJyk7XG5cdFx0XHRjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGlvbi10ZXh0JykuaW5uZXJUZXh0KVxuXHRcdFx0XHRpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGlvbi10ZXh0JykuaW5uZXJUZXh0ID09PSBcIkFkZFwiKSB7XG5cdFx0XHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGlvbi10ZXh0JykuaW5uZXJUZXh0ID0gXCJBZGQgaW5zdXJhbmNlXCJcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRvYnNlcnZlci5vYnNlcnZlKGluc3VyYW5jZSwge3N1YnRyZWU6IHRydWUsIGNoaWxkTGlzdDogdHJ1ZX0pO1xuXHRcdH0sXG5cblxuXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHQvLyBTZXQgRXZlbnRzXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHRzZXRFdmVudHM6IGZ1bmN0aW9uIChlbG0gPSAnJykge1xuXG5cdFx0XHRjb25zb2xlLmxvZygnWFhYIC0gc2V0RXZlbnRzOiAnICsgZWxtKTtcblxuXHRcdFx0c3dpdGNoIChlbG0pIHtcblx0XHRcdFx0Y2FzZSAnbW9kYWwnOlxuXHRcdFx0XHRcdC8vY29kZSB0byBvcGVuIG1vZGFsO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdmaW5hbmNlUG9wdXAnOlxuXHRcdFx0XHQvL2NvZGUgdG8gb3BlbiBzb21ldGhpbmcgZWxzZTtcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblxuXG5cblx0XHR9LFxuXG5cdFx0cmVzaXplV2luZG93OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHQvLyBhcyBuZXcgZWxlbWVudHMgYWRkZWQgdG8gcGFuZWwgd2UgbmVlZCB0byByZXNpemUgd2luZG93IHRvIGFjdGl2YXRlIGFtZW5kIGhlaWdodCBvZiBQcm9kdWN0IFBhbmVsc1xuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCQod2luZG93KS5yZXNpemUoKTtcblx0XHRcdFx0Y29uc29sZS5sb2coJ3dpbmRvdyByZXNpemVkJyk7XG5cdFx0XHR9LCAxMDApO1xuXHRcdH1cblxuXG5cdH07XG5cdHJldHVybiB7XG5cdFx0bWFpbjogbWFpblxuXHR9O1xuXG59KSgpO1xuXG5jaGVpbGxvbmRvbi50YXJnZXRCb2lsZXJwbGF0ZS5tYWluLmluaXQoKTtcblxuIl19"}