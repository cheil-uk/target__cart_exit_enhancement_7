{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/components/addElements.js","src/js/components/newElements.js","src/js/components/popUpContent.js","src/js/main.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","export default class AddElements {\n elementsAdded () {\n\t\t\tconst cartOptions = document.querySelectorAll('.service-item__name');\n\t\t\tcartOptions.forEach(cartOption => {\n\t\t\t\tif (cartOption.innerText === \"Insurance\" || cartOption.innerText === \"Protect your Galaxy with Samsung Care+\") {\n\t\t\t\t\tconst sku = cartOption.parentElement.parentElement.parentElement.parentElement.parentElement.children[2].children[4].innerText;\n\t\t\t\t\tconst insuranceBtn = cartOption.parentElement.nextElementSibling.children[0].children[0].children[1]\n\n\t\t\t\t\tcartOption.innerText = \"Protect your Galaxy with Samsung Care+\";\n\t\t\t\t\tcartOption.nextElementSibling.style.display = 'none';\n     cartOption.nextElementSibling.style.color = '#ffffff';\n\t\t\t\t\tconst htmlContext = `<div class=\"ng-star-inserted service-item__description opti__div\">\n\t\t\t\t\t${(sku.includes('SM-G99') ? `<p class=\"warning__policy\">Try Samsung Care+ free for 30 days (does not renew)</p>`: '')}\n\t\t\t\t\t\t<p>Up to 24 months of worldwide accidental damage insurance for complete peace of mind.</p>\n\t\t\t\t\t\t<p class=\"learn__more__popfeature\">Learn more</p>\n\t\t\t\t\t</div>`\n\t\t\t\t\tcartOption.nextElementSibling.insertAdjacentHTML('afterend',htmlContext)\n\t\t\t\t\tcartOption.parentElement.nextElementSibling.children[0].children[0].children[1].innerText = 'Add Insurance';\n\n\t\t\t\t\t// const learnmoreBtn = document.querySelector('.learn__more__popfeature')\n\t\t\t\t\t// learnmoreBtn.onclick = () => {\n\t\t\t\t\t// \tinsuranceBtn.click();\n\t\t\t\t\t// }\n\n\t\t\t\t\tdocument.querySelectorAll('.learn__more__popfeature').forEach((btn) => {\n\t\t\t\t\t\t\tbtn.onclick = () => {\n\t\t\t\t\t\t\tinsuranceBtn.click();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// const cartOptions = document.querySelectorAll('.service-item__name');\n\t\t\t// cartOptions.forEach(cartOption => {\n\t\t\t// \tif (cartOption.innerText === \"Insurance\" || cartOption.innerText === \"Protect your Galaxy with Samsung Care+\") {\n\n\t\t\t// \t\tlet skus = []\n\t\t\t// \t\tconst allSkus = document.querySelectorAll('.cart-item__sku').forEach((sku) => {skus.push(sku.innerText)});\n\t\t\t// \t\tconst allInsureBtns = document.querySelectorAll('.action-text')\n\t\t\t// \t\tlet insureBtns = allInsureBtns.forEach((insureBtn) => {\n\t\t\t// \t\t\t(insureBtn.innerText.includes('Add') ? insureBtn.innerText = 'Add Insurance' : insureBtn.innerText );\n\t\t\t// \t\t});\n\t\t\t// \t\tconsole.log(insureBtns)\n\t\t\t// \t\tconst insuranceBtn = cartOption.parentElement.nextElementSibling.children[0].children[0].children[1]\n\t\t\t// \t\tcartOption.innerText = \"Protect your Galaxy with Samsung Care+\";\n\t\t\t// \t\tcartOption.nextElementSibling.style.display = 'none';\n\t\t\t// \t\tconsole.log(skus.includes('SM-G99'), skus)\n\n\t\t\t// \t\tconst htmlContext = `<div class=\"ng-star-inserted service-item__description opti__div\">\n\t\t\t// \t\t${(skus.map(s => s.includes('SM-G99')) ? `<p class=\"warning__policy\">Try Samsung Care+ free for 30 days (does not renew)*</p>`: '')}\n\t\t\t// \t\t\t<p>Up to 24 months of worldwide accidental damage insurance for complete peace of mind.</p>\n\t\t\t// \t\t\t<p class=\"learn__more__popfeature\">Learn more</p>\n\t\t\t// \t\t</div>`\n\t\t\t// \t\tcartOption.nextElementSibling.insertAdjacentHTML('afterend',htmlContext);\n\n\t\t\t// \t\tdocument.querySelectorAll('.learn__more__popfeature').forEach((btn) => {\n\n\t\t\t// \t\t\t\tbtn.onclick = () => {\n\t\t\t// \t\t\t\tinsuranceBtn.click();\n\t\t\t// \t\t\t}\n\t\t\t// \t\t})\n\n\t\t\t// \t}\n\n\n\t\t\t// })\n\t\t}\n}","import PopUpContent from \"./popUpContent\";\nexport default class NewElements {\n addingNewElements() {\n  const popUpContent = new PopUpContent();\n  document.querySelector('.opti__div').style.display = 'block';\n\n  (window.innerWidth <= 920) ? popUpContent.iconBtnClick() : '';\n  const samsungCare = document.querySelectorAll('.opti__div');\n\t\t\tsamsungCare.forEach(samsungCare => {\n    if (samsungCare.previousSibling.textContent === 'Add Samsung Care+') {\n        samsungCare.previousSibling.style.display = 'none';\n        const learnmoreBtn = document.querySelector('.learn__more__popfeature');\n\n        learnmoreBtn.onclick = () => {\n          document.querySelector(\"body > app-root > cx-storefront > main > cx-page-layout > cx-page-slot.TokoLeftContent.has-components.ng-star-inserted > cx-cart-details > div > cx-cart-item-list > div > div > cx-cart-item > div > div.cart-item__services > app-cart-added-services > div:nth-child(1) > div.service-item__actions > div > button > span.action-text.action-text--blue\").click();\n          }\n        }\n\n\t\t\t});\n      popUpContent.addConent();\n }\n}","export default class PopUpContent {\n  addConent() {\n    const cartOptions = document.querySelectorAll('.service-item__name');\n    // const insuranceBtn = cartOptions[0].parentElement.nextElementSibling.children[0].children[0].children[1];\n    cartOptions.forEach(cartOption => {\n      // console.log(insuranceBtn)\n      const insuranceBtn = (cartOption.parentElement.nextElementSibling.children[0].children[0].children[1].innerText === 'Add Insurance')? cartOption.parentElement.nextElementSibling.children[0].children[0].children[1] : cartOption.parentElement.nextElementSibling.children[0].children[0].children[0]\n      const sku = cartOption.parentElement.parentElement.parentElement.parentElement.parentElement.children[2].children[4].innerText;\n      insuranceBtn.onclick = () => {\n        console.log('pop n click')\n\n        setTimeout(() => {\n            const title = document.getElementById('modal-title');\n            const description = document.querySelector('.modal__description')\n            const modelContainer = document.querySelector('.modal__radio');\n            const termsContainer = document.querySelector('.modal__terms');\n            const footerContainer  = document.querySelector('.modal__footer');\n\t\t\t\t\t\tmodelContainer.insertAdjacentHTML('afterend', `\n            <div class=\"samsung__care__details\">\n                <h2 class=\"modal__title\">Samsung Care+ includes:</h2>\n                <ul>\n                  <li>Fast and convenient expert repairs using genuine Samsung parts</li>\n                  <li>if your device isn't running smoothly, we'll check and fix any issues</li>\n                  <li>Stay powered up with hassle-free battery replacements</li>\n                  <li>Up to four claims within 24 months, or two within 12 months</li>\n                  <li><a href=\"https://www.samsung.com/uk/offer/samsung-care-plus/\">See all benefits here.</a> Key details of your policy can be found in the <a href=\"https://images.samsung.com/is/content/samsung/p5/uk/samsung-mobile-care-ipid.pdf\">Insurance Proudct Infomation Document(IPID)</a></li>\n                </ul>\n                <div class=\"samsung__care__details__30days\" style=\"${(sku.includes('SM-G99')) ? \"display: block\" : \"display: none\"}\">\n                  <h2 class=\"modal__title\">Try Samsung Care+ free for 30 days</h2>\n                  <p class=\"hubble-product__options-content-text\">Does not renew automatically. Cover terminates after 30 days unless renewed at samsungcareplus.com.\n                  Service fee per claim still applies. View the Insurance Product Information Pack(IPID) for full policy details.\n                  </p>\n                </div>\n              </div>\n            `);\n            footerContainer.insertAdjacentElement('afterend', termsContainer);\n            const cancelBtn = document.querySelector(\".modal__footer.modal__buttons--inline > button.button.pill-btn.pill-btn--white.reset\");\n            const addToBasket = document.querySelector(\".modal__footer.modal__buttons--inline > button.button.primary.pill-btn.pill-btn--black.view-more\");\n\n            title.innerText = 'Protext your Galaxy with Samsung Care+';\n            description.innerText = 'Up to 24 months of worldwide accidental damage insurance for complete peace of mind';\n\n            const labels = document.querySelectorAll('.option-box__label');\n            labels.forEach((label) => {\n              const name = label.firstChild.innerText;\n              if (name === '1 year coverage') {\n                label.lastElementChild.innerText = '12-month policy';\n              } else if (name === '2 year coverage') {\n                label.lastElementChild.innerText = '24-month policy';\n              } else if (name.includes('Free')) {\n                label.innerHTML = '<div class=\"option-box__name\">One Month Free (Does not renew)</div><div class=\"option-box__code\">One month policy</div>'\n                label.lastElementChild.innerText = 'One month policy';\n\n\n              }\n            })\n\n            const priceTags = document.querySelectorAll('.option-box__price');\n            priceTags.forEach((prices) => {\n              const price = parseInt(prices.innerText.slice(1));\n              prices.style.textAlign = 'right';\n              if (prices.previousElementSibling.innerText.includes('1 year coverage')) {\n                const p = document.createElement('p');\n                const monthlyPrice = price / 12;\n                p.innerText = `(equilvalent to £${monthlyPrice.toFixed(2)} a month)`;\n                prices.insertAdjacentElement('beforeend',p);\n              } else if (prices.previousElementSibling.innerText.includes('2 year coverage')){\n                const p = document.createElement('p');\n                const monthlyPrice = price / 24;\n                p.innerText = `(equilvalent to £${monthlyPrice.toFixed(2)} a month)`;\n                prices.insertAdjacentElement('beforeend',p);\n              }\n            })\n            const coverOptions = document.querySelectorAll('.mat-radio-label');\n            coverOptions.forEach((options) => {\n              if (options.innerText.includes('2 year coverage')) {\n                options.click()\n              }\n            })\n            cancelBtn.innerText = \"No Thanks\";\n            addToBasket.innerText = \"Add to order\";\n\t\t\t\t\t},1500)\n      }\n    });\n  }\n\n  iconBtnClick() {\n    const cartOptions = document.querySelectorAll('.service-item__name');\n    cartOptions.forEach(cartOption => {\n      const iconInsureBtn = cartOption.parentElement.nextElementSibling.children[0].children[0].children[0];\n      const sku = cartOption.parentElement.parentElement.parentElement.parentElement.parentElement.children[2].children[4].innerText;\n      iconInsureBtn.onclick = () => {\n        console.log('pop n click icon')\n        setTimeout(() => {\n            const title = document.getElementById('modal-title');\n            const description = document.querySelector('.modal__description')\n            const modelContainer = document.querySelector('.modal__radio');\n            const termsContainer = document.querySelector('.modal__terms');\n            const footerContainer  = document.querySelector('.modal__footer');\n\t\t\t\t\t\tmodelContainer.insertAdjacentHTML('afterend', `\n            <div class=\"samsung__care__details\">\n                <h2 class=\"modal__title\">Samsung Care+ includes:</h2>\n                <ul>\n                  <li>Fast and convenient expert repairs using genuine Samsung parts</li>\n                  <li>if your device isn't running smoothly, we'll check and fix any issues</li>\n                  <li>Stay powered up with hassle-free battery replacements</li>\n                  <li>Up to four claims within 24 months, or two within 12 months</li>\n                  <li><a href=\"https://www.samsung.com/uk/offer/samsung-care-plus/\">See all benefits here.</a> Key details of your policy can be found in the <a href=\"https://images.samsung.com/is/content/samsung/p5/uk/samsung-mobile-care-ipid.pdf\">Insurance Proudct Infomation Document(IPID)</a></li>\n                </ul>\n                <div class=\"samsung__care__details__30days\" style=\"${(sku.includes('SM-G99')) ? \"display: block\" : \"display: none\"}\">\n                  <h2 class=\"modal__title\">Try Samsung Care+ free for 30 days</h2>\n                  <p class=\"hubble-product__options-content-text\">Does not renew automatically. Cover terminates after 30 days unless renewed at samsungcareplus.com.\n                  Service fee per claim still applies. View the Insurance Product Information Pack(IPID) for full policy details.\n                  </p>\n                </div>\n              </div>\n            `);\n            footerContainer.insertAdjacentElement('afterend', termsContainer);\n            const cancelBtn = document.querySelector(\".modal__footer.modal__buttons--inline > button.button.pill-btn.pill-btn--white.reset\");\n            const addToBasket = document.querySelector(\".modal__footer.modal__buttons--inline > button.button.primary.pill-btn.pill-btn--black.view-more\");\n\n            title.innerText = 'Protext your Galaxy with Samsung Care+';\n            description.innerText = 'Up to 24 months of worldwide accidental damage insurance for complete peace of mind';\n\n            const labels = document.querySelectorAll('.option-box__label');\n            labels.forEach((label) => {\n              const name = label.firstChild.innerText;\n              if (name === '1 year coverage') {\n                label.lastElementChild.innerText = '12-month policy'\n              } else if (name === '2 year coverage') {\n                label.lastElementChild.innerText = '24-month policy'\n              } else if (name.includes('Free')) {\n                label.innerHTML = '<div class=\"option-box__name\">One Month Free (Does not renew)</div><div class=\"option-box__code\">One month policy</div>'\n                label.lastElementChild.innerText = 'One month policy'\n              }\n            })\n\n            const priceTags = document.querySelectorAll('.option-box__price');\n            priceTags.forEach((prices) => {\n              const price = parseInt(prices.innerText.slice(1));\n              prices.style.textAlign = 'right';\n              if (prices.previousElementSibling.innerText.includes('1 year coverage')) {\n                const p = document.createElement('p');\n                const monthlyPrice = price / 12;\n                p.innerText = `(equilvalent to £${monthlyPrice.toFixed(2)} a month)`;\n                prices.insertAdjacentElement('beforeend',p);\n              } else if (prices.previousElementSibling.innerText.includes('2 year coverage')){\n                const p = document.createElement('p');\n                const monthlyPrice = price / 24;\n                p.innerText = `(equilvalent to £${monthlyPrice.toFixed(2)} a month)`;\n                prices.insertAdjacentElement('beforeend',p);\n              }\n            })\n            const coverOptions = document.querySelectorAll('.mat-radio-label');\n            coverOptions.forEach((options) => {\n              if (options.innerText.includes('2 year coverage')) {\n                options.click()\n              }\n            })\n            cancelBtn.innerText = \"No Thanks\";\n            addToBasket.innerText = \"Add to order\";\n\t\t\t\t\t},1500)\n      }\n    });\n  }\n}","// ==========================================================================\n//  This is a boilerplate to use for target activities\n//\n//\tURL example: add in url of project for visibility here\n// ==========================================================================\n\n// ==========================================================================\n// Scripts, helper widgets - import below\n// ==========================================================================\nimport PopUpContent from \"./components/popUpContent\";\nimport AddElements from \"./components/addElements\";\nimport NewElements from \"./components/newElements\";\nvar cheillondon = cheillondon || {};\n\ncheillondon.targetBoilerplate = (function () {\n\n\t'use strict';\n\n\tvar main = {\n\n\t\t// ==========================================================================\n\t\t// Variables and config Properties add below\n\t\t// ==========================================================================\n\n\n\t\t//Init\n\t\tinit: function () {\n\t\t\tmain.doEverythingTimeout();\n\t\t},\n\n\n\t\t// ==========================================================================\n\t\t// Checking jQuery\n\t\t// ==========================================================================\n\t\tdoEverythingTimeout: function () {\n\t\t\tvar _self = this;\n\n\t\t\tconsole.log('XXX - doEverythingTimeout');\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tif (window.$) {\n\t\t\t\t\tconsole.log('doEverythingTimeout - jQuery loaded');\n\t\t\t\t\tconst cartSkus = document.querySelectorAll('.cart-item__sku');\n\t\t\t\t\tcartSkus.forEach((cartSku) => {\n\t\t\t\t\t\tif(cartSku.innerText.includes('SM-G99') || cartSku.innerText.includes('SM-F')) {\n\t\t\t\t\t\t\tconst popUpContent = new PopUpContent();\n\t\t\t\t\t\t\tconst addElements = new AddElements();\n\t\t\t\t\t\t\tmain.appendNewStyle();\n\t\t\t\t\t\t\taddElements.elementsAdded();\n\t\t\t\t\t\t\tpopUpContent.addConent();\n\t\t\t\t\t\t\tmain.elementObservation();\n\t\t\t\t\t\t\tmain.insureText();\n\t\t\t\t\t\t\tpopUpContent.iconBtnClick();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.log('not in range')\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('no jquery')\n\t\t\t\t\t_self.doEverythingTimeout();\n\t\t\t\t}\n\t\t\t}, 1000)\n\t\t},\n\n\n\t\t// ==========================================================================\n\t\t// Adding style\n\t\t// ==========================================================================\n\t\tappendNewStyle: function () {\n\n\t\t\t/* FYI: the CSS code is in separated file, in SCSS format that generates the CSS file. After, the gulp file finds the [CSS] and replaces with minified code from file */\n\n\t\t\t//To insert minified inline string uncomment this variable and paste here\n\t\t\t//Else, use default uncommented variable\n\t\t\t// var _css = '';\n\n\t\t\tvar _css = '[[CSS]]';\n\n\t\t\t//\n\t\t\t// Adding style definitions to DOM\n\t\t\t// --------------------------------------------------------------------------\n\t\t\tvar _head = document.head || document.getElementsByTagName('head')[0],\n\t\t\t\t_style = document.createElement('style');\n\n\t\t\t_style.type = 'text/css';\n\t\t\tif (_style.styleSheet) { // This is required for IE8 and below.\n\t\t\t\t_style.styleSheet.cssText = _css;\n\t\t\t} else {\n\t\t\t\t_style.appendChild(document.createTextNode(_css));\n\t\t\t}\n\t\t\t_head.appendChild(_style);\n\n\t\t},\n\n\t\tremoveStuff: function () {\n\t\t\tconst description = document.querySelectorAll('.opti__div');\n\t\t\tdescription.forEach((desc) => {\n\n\t\t\t\tif (desc.innerText.includes('insurance')) {\n\t\t\t\t\tdesc.previousElementSibling.style.display = 'block';\n\t\t\t\t\tdesc.previousSibling.style.color = '#000000';\n\t\t\t\t\tdesc.style.display = 'none';\n\t\t\t\t}\n\t\t\t\tif (desc.previousElementSibling.textContent === 'Add Samsung Care+') {\n\t\t\t\t\t// console.log('got in here as well')\n\t\t\t\t\tconst addingNewElements = new NewElements();\n\t\t\t\t\taddingNewElements.addingNewElements();\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\telementObservation: function () {\n\t\t\t\tconst eleToObserve = document.querySelector('.service-item')\n\t\t\t\t\tconst observer = new MutationObserver(() => {\n\t\t\t\t\t\tconsole.log('trigger')\n\t\t\t\t\t\tthis.removeStuff();\n\t\t\t\t\t});\n\t\t\t\t\tobserver.observe(eleToObserve, {subtree: true, childList: true});\n\n\n\t\t},\n\n\t\tinsureText: function () {\n\t\t\tconst insurance = document.querySelector('.service-item__actions');\n\t\t\tconst observer = new MutationObserver(() => {\n\t\t\t\t// console.log(document.querySelector('.action-text').innerText)\n\t\t\t\tif (document.querySelector('.action-text').innerText === \"Add\") {\n\t\t\t\t\tdocument.querySelector('.action-text').innerText = \"Add insurance\"\n\t\t\t\t}\n\t\t\t});\n\t\t\tobserver.observe(insurance, {subtree: true, childList: true});\n\t\t},\n\n\n\n\t\t// ==========================================================================\n\t\t// Set Events\n\t\t// ==========================================================================\n\t\tsetEvents: function (elm = '') {\n\n\t\t\tconsole.log('XXX - setEvents: ' + elm);\n\n\t\t\tswitch (elm) {\n\t\t\t\tcase 'modal':\n\t\t\t\t\t//code to open modal;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'financePopup':\n\t\t\t\t//code to open something else;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\n\n\t\t},\n\n\t\tresizeWindow: function () {\n\t\t\t// as new elements added to panel we need to resize window to activate amend height of Product Panels\n\t\t\tsetTimeout(function () {\n\t\t\t\t$(window).resize();\n\t\t\t\tconsole.log('window resized');\n\t\t\t}, 100);\n\t\t}\n\n\n\t};\n\treturn {\n\t\tmain: main\n\t};\n\n})();\n\ncheillondon.targetBoilerplate.main.init();\n\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29tcG9uZW50cy9hZGRFbGVtZW50cy5qcyIsInNyYy9qcy9jb21wb25lbnRzL25ld0VsZW1lbnRzLmpzIiwic3JjL2pzL2NvbXBvbmVudHMvcG9wVXBDb250ZW50LmpzIiwic3JjL2pzL21haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7b0xDQXFCLCtFQUNwQix5QkFDc0IsU0FBUyxpQkFBaUIsdUJBQ2xDLFFBQVEsU0FBQSxHQUNuQixHQUE2QixjQUF6QixFQUFXLFdBQXNELDJDQUF6QixFQUFXLFVBQXdELENBQzlHLElBQU0sRUFBTSxFQUFXLGNBQWMsY0FBYyxjQUFjLGNBQWMsY0FBYyxTQUFTLEdBQUcsU0FBUyxHQUFHLFVBQy9HLEVBQWUsRUFBVyxjQUFjLG1CQUFtQixTQUFTLEdBQUcsU0FBUyxHQUFHLFNBQVMsR0FFbEcsRUFBVyxVQUFZLHlDQUN2QixFQUFXLG1CQUFtQixNQUFNLFFBQVUsT0FDOUMsRUFBVyxtQkFBbUIsTUFBTSxNQUFRLFVBQzVDLElBQU0sRUFBQSxrRkFDSCxFQUFJLFNBQVMsVUFBYixxRkFBK0csSUFENUcsNkxBS04sRUFBVyxtQkFBbUIsbUJBQW1CLFdBQVcsR0FDNUQsRUFBVyxjQUFjLG1CQUFtQixTQUFTLEdBQUcsU0FBUyxHQUFHLFNBQVMsR0FBRyxVQUFZLGdCQU81RixTQUFTLGlCQUFpQiw0QkFBNEIsUUFBUSxTQUFDLEdBQzdELEVBQUksUUFBVSxXQUNkLEVBQWEsb0NBMUJDOzs7b0VDQXJCLElBQUEsY0FBQSxRQUFBLCtQQUNxQiwrRUFDcEIsNkJBQ0MsSUFBTSxFQUFlLElBQUksZUFBQSxRQUN6QixTQUFTLGNBQWMsY0FBYyxNQUFNLFFBQVUsUUFFcEQsT0FBTyxZQUFjLEtBQU8sRUFBYSxlQUN0QixTQUFTLGlCQUFpQixjQUNqQyxRQUFRLFNBQUEsR0FDNkIsc0JBQTVDLEVBQVksZ0JBQWdCLGNBQzVCLEVB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LFVBQVcsV0FBb0IsSUFBVixFQUFVLFVBQUEsT0FBQSxRQUFBLElBQUEsVUFBQSxHQUFBLFVBQUEsR0FBSixHQUUxQixRQUFRLElBQUksb0JBQXNCLElBZ0JuQyxhQUFjLFdBRWIsV0FBVyxXQUNWLEVBQUUsUUFBUSxTQUNWLFFBQVEsSUFBSSxtQkFDVixPQUtMLE9BQ0MsS0FBTSxHQTFKeUIsR0ErSmpDLFlBQVksa0JBQWtCLEtBQUsiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBZGRFbGVtZW50cyB7XG4gZWxlbWVudHNBZGRlZCAoKSB7XG5cdFx0XHRjb25zdCBjYXJ0T3B0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZXJ2aWNlLWl0ZW1fX25hbWUnKTtcblx0XHRcdGNhcnRPcHRpb25zLmZvckVhY2goY2FydE9wdGlvbiA9PiB7XG5cdFx0XHRcdGlmIChjYXJ0T3B0aW9uLmlubmVyVGV4dCA9PT0gXCJJbnN1cmFuY2VcIiB8fCBjYXJ0T3B0aW9uLmlubmVyVGV4dCA9PT0gXCJQcm90ZWN0IHlvdXIgR2FsYXh5IHdpdGggU2Ftc3VuZyBDYXJlK1wiKSB7XG5cdFx0XHRcdFx0Y29uc3Qgc2t1ID0gY2FydE9wdGlvbi5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2hpbGRyZW5bMl0uY2hpbGRyZW5bNF0uaW5uZXJUZXh0O1xuXHRcdFx0XHRcdGNvbnN0IGluc3VyYW5jZUJ0biA9IGNhcnRPcHRpb24ucGFyZW50RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV1cblxuXHRcdFx0XHRcdGNhcnRPcHRpb24uaW5uZXJUZXh0ID0gXCJQcm90ZWN0IHlvdXIgR2FsYXh5IHdpdGggU2Ftc3VuZyBDYXJlK1wiO1xuXHRcdFx0XHRcdGNhcnRPcHRpb24ubmV4dEVsZW1lbnRTaWJsaW5nLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgIGNhcnRPcHRpb24ubmV4dEVsZW1lbnRTaWJsaW5nLnN0eWxlLmNvbG9yID0gJyNmZmZmZmYnO1xuXHRcdFx0XHRcdGNvbnN0IGh0bWxDb250ZXh0ID0gYDxkaXYgY2xhc3M9XCJuZy1zdGFyLWluc2VydGVkIHNlcnZpY2UtaXRlbV9fZGVzY3JpcHRpb24gb3B0aV9fZGl2XCI+XG5cdFx0XHRcdFx0JHsoc2t1LmluY2x1ZGVzKCdTTS1HOTknKSA/IGA8cCBjbGFzcz1cIndhcm5pbmdfX3BvbGljeVwiPlRyeSBTYW1zdW5nIENhcmUrIGZyZWUgZm9yIDMwIGRheXMgKGRvZXMgbm90IHJlbmV3KTwvcD5gOiAnJyl9XG5cdFx0XHRcdFx0XHQ8cD5VcCB0byAyNCBtb250aHMgb2Ygd29ybGR3aWRlIGFjY2lkZW50YWwgZGFtYWdlIGluc3VyYW5jZSBmb3IgY29tcGxldGUgcGVhY2Ugb2YgbWluZC48L3A+XG5cdFx0XHRcdFx0XHQ8cCBjbGFzcz1cImxlYXJuX19tb3JlX19wb3BmZWF0dXJlXCI+TGVhcm4gbW9yZTwvcD5cblx0XHRcdFx0XHQ8L2Rpdj5gXG5cdFx0XHRcdFx0Y2FydE9wdGlvbi5uZXh0RWxlbWVudFNpYmxpbmcuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmVuZCcsaHRtbENvbnRleHQpXG5cdFx0XHRcdFx0Y2FydE9wdGlvbi5wYXJlbnRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZy5jaGlsZHJlblswXS5jaGlsZHJlblswXS5jaGlsZHJlblsxXS5pbm5lclRleHQgPSAnQWRkIEluc3VyYW5jZSc7XG5cblx0XHRcdFx0XHQvLyBjb25zdCBsZWFybm1vcmVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGVhcm5fX21vcmVfX3BvcGZlYXR1cmUnKVxuXHRcdFx0XHRcdC8vIGxlYXJubW9yZUJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdC8vIFx0aW5zdXJhbmNlQnRuLmNsaWNrKCk7XG5cdFx0XHRcdFx0Ly8gfVxuXG5cdFx0XHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmxlYXJuX19tb3JlX19wb3BmZWF0dXJlJykuZm9yRWFjaCgoYnRuKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRpbnN1cmFuY2VCdG4uY2xpY2soKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXG5cdFx0XHQvLyBjb25zdCBjYXJ0T3B0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZXJ2aWNlLWl0ZW1fX25hbWUnKTtcblx0XHRcdC8vIGNhcnRPcHRpb25zLmZvckVhY2goY2FydE9wdGlvbiA9PiB7XG5cdFx0XHQvLyBcdGlmIChjYXJ0T3B0aW9uLmlubmVyVGV4dCA9PT0gXCJJbnN1cmFuY2VcIiB8fCBjYXJ0T3B0aW9uLmlubmVyVGV4dCA9PT0gXCJQcm90ZWN0IHlvdXIgR2FsYXh5IHdpdGggU2Ftc3VuZyBDYXJlK1wiKSB7XG5cblx0XHRcdC8vIFx0XHRsZXQgc2t1cyA9IFtdXG5cdFx0XHQvLyBcdFx0Y29uc3QgYWxsU2t1cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJ0LWl0ZW1fX3NrdScpLmZvckVhY2goKHNrdSkgPT4ge3NrdXMucHVzaChza3UuaW5uZXJUZXh0KX0pO1xuXHRcdFx0Ly8gXHRcdGNvbnN0IGFsbEluc3VyZUJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWN0aW9uLXRleHQnKVxuXHRcdFx0Ly8gXHRcdGxldCBpbnN1cmVCdG5zID0gYWxsSW5zdXJlQnRucy5mb3JFYWNoKChpbnN1cmVCdG4pID0+IHtcblx0XHRcdC8vIFx0XHRcdChpbnN1cmVCdG4uaW5uZXJUZXh0LmluY2x1ZGVzKCdBZGQnKSA/IGluc3VyZUJ0bi5pbm5lclRleHQgPSAnQWRkIEluc3VyYW5jZScgOiBpbnN1cmVCdG4uaW5uZXJUZXh0ICk7XG5cdFx0XHQvLyBcdFx0fSk7XG5cdFx0XHQvLyBcdFx0Y29uc29sZS5sb2coaW5zdXJlQnRucylcblx0XHRcdC8vIFx0XHRjb25zdCBpbnN1cmFuY2VCdG4gPSBjYXJ0T3B0aW9uLnBhcmVudEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzFdXG5cdFx0XHQvLyBcdFx0Y2FydE9wdGlvbi5pbm5lclRleHQgPSBcIlByb3RlY3QgeW91ciBHYWxheHkgd2l0aCBTYW1zdW5nIENhcmUrXCI7XG5cdFx0XHQvLyBcdFx0Y2FydE9wdGlvbi5uZXh0RWxlbWVudFNpYmxpbmcuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHRcdC8vIFx0XHRjb25zb2xlLmxvZyhza3VzLmluY2x1ZGVzKCdTTS1HOTknKSwgc2t1cylcblxuXHRcdFx0Ly8gXHRcdGNvbnN0IGh0bWxDb250ZXh0ID0gYDxkaXYgY2xhc3M9XCJuZy1zdGFyLWluc2VydGVkIHNlcnZpY2UtaXRlbV9fZGVzY3JpcHRpb24gb3B0aV9fZGl2XCI+XG5cdFx0XHQvLyBcdFx0JHsoc2t1cy5tYXAocyA9PiBzLmluY2x1ZGVzKCdTTS1HOTknKSkgPyBgPHAgY2xhc3M9XCJ3YXJuaW5nX19wb2xpY3lcIj5UcnkgU2Ftc3VuZyBDYXJlKyBmcmVlIGZvciAzMCBkYXlzIChkb2VzIG5vdCByZW5ldykqPC9wPmA6ICcnKX1cblx0XHRcdC8vIFx0XHRcdDxwPlVwIHRvIDI0IG1vbnRocyBvZiB3b3JsZHdpZGUgYWNjaWRlbnRhbCBkYW1hZ2UgaW5zdXJhbmNlIGZvciBjb21wbGV0ZSBwZWFjZSBvZiBtaW5kLjwvcD5cblx0XHRcdC8vIFx0XHRcdDxwIGNsYXNzPVwibGVhcm5fX21vcmVfX3BvcGZlYXR1cmVcIj5MZWFybiBtb3JlPC9wPlxuXHRcdFx0Ly8gXHRcdDwvZGl2PmBcblx0XHRcdC8vIFx0XHRjYXJ0T3B0aW9uLm5leHRFbGVtZW50U2libGluZy5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyZW5kJyxodG1sQ29udGV4dCk7XG5cblx0XHRcdC8vIFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubGVhcm5fX21vcmVfX3BvcGZlYXR1cmUnKS5mb3JFYWNoKChidG4pID0+IHtcblxuXHRcdFx0Ly8gXHRcdFx0XHRidG4ub25jbGljayA9ICgpID0+IHtcblx0XHRcdC8vIFx0XHRcdFx0aW5zdXJhbmNlQnRuLmNsaWNrKCk7XG5cdFx0XHQvLyBcdFx0XHR9XG5cdFx0XHQvLyBcdFx0fSlcblxuXHRcdFx0Ly8gXHR9XG5cblxuXHRcdFx0Ly8gfSlcblx0XHR9XG59IiwiaW1wb3J0IFBvcFVwQ29udGVudCBmcm9tIFwiLi9wb3BVcENvbnRlbnRcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5ld0VsZW1lbnRzIHtcbiBhZGRpbmdOZXdFbGVtZW50cygpIHtcbiAgY29uc3QgcG9wVXBDb250ZW50ID0gbmV3IFBvcFVwQ29udGVudCgpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3B0aV9fZGl2Jykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cbiAgKHdpbmRvdy5pbm5lcldpZHRoIDw9IDkyMCkgPyBwb3BVcENvbnRlbnQuaWNvbkJ0bkNsaWNrKCkgOiAnJztcbiAgY29uc3Qgc2Ftc3VuZ0NhcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub3B0aV9fZGl2Jyk7XG5cdFx0XHRzYW1zdW5nQ2FyZS5mb3JFYWNoKHNhbXN1bmdDYXJlID0+IHtcbiAgICBpZiAoc2Ftc3VuZ0NhcmUucHJldmlvdXNTaWJsaW5nLnRleHRDb250ZW50ID09PSAnQWRkIFNhbXN1bmcgQ2FyZSsnKSB7XG4gICAgICAgIHNhbXN1bmdDYXJlLnByZXZpb3VzU2libGluZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBjb25zdCBsZWFybm1vcmVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGVhcm5fX21vcmVfX3BvcGZlYXR1cmUnKTtcblxuICAgICAgICBsZWFybm1vcmVCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keSA+IGFwcC1yb290ID4gY3gtc3RvcmVmcm9udCA+IG1haW4gPiBjeC1wYWdlLWxheW91dCA+IGN4LXBhZ2Utc2xvdC5Ub2tvTGVmdENvbnRlbnQuaGFzLWNvbXBvbmVudHMubmctc3Rhci1pbnNlcnRlZCA+IGN4LWNhcnQtZGV0YWlscyA+IGRpdiA+IGN4LWNhcnQtaXRlbS1saXN0ID4gZGl2ID4gZGl2ID4gY3gtY2FydC1pdGVtID4gZGl2ID4gZGl2LmNhcnQtaXRlbV9fc2VydmljZXMgPiBhcHAtY2FydC1hZGRlZC1zZXJ2aWNlcyA+IGRpdjpudGgtY2hpbGQoMSkgPiBkaXYuc2VydmljZS1pdGVtX19hY3Rpb25zID4gZGl2ID4gYnV0dG9uID4gc3Bhbi5hY3Rpb24tdGV4dC5hY3Rpb24tdGV4dC0tYmx1ZVwiKS5jbGljaygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cdFx0XHR9KTtcbiAgICAgIHBvcFVwQ29udGVudC5hZGRDb25lbnQoKTtcbiB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wVXBDb250ZW50IHtcbiAgYWRkQ29uZW50KCkge1xuICAgIGNvbnN0IGNhcnRPcHRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlcnZpY2UtaXRlbV9fbmFtZScpO1xuICAgIC8vIGNvbnN0IGluc3VyYW5jZUJ0biA9IGNhcnRPcHRpb25zWzBdLnBhcmVudEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzFdO1xuICAgIGNhcnRPcHRpb25zLmZvckVhY2goY2FydE9wdGlvbiA9PiB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhpbnN1cmFuY2VCdG4pXG4gICAgICBjb25zdCBpbnN1cmFuY2VCdG4gPSAoY2FydE9wdGlvbi5wYXJlbnRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZy5jaGlsZHJlblswXS5jaGlsZHJlblswXS5jaGlsZHJlblsxXS5pbm5lclRleHQgPT09ICdBZGQgSW5zdXJhbmNlJyk/IGNhcnRPcHRpb24ucGFyZW50RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV0gOiBjYXJ0T3B0aW9uLnBhcmVudEVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdXG4gICAgICBjb25zdCBza3UgPSBjYXJ0T3B0aW9uLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5jaGlsZHJlblsyXS5jaGlsZHJlbls0XS5pbm5lclRleHQ7XG4gICAgICBpbnN1cmFuY2VCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ3BvcCBuIGNsaWNrJylcblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLXRpdGxlJyk7XG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fZGVzY3JpcHRpb24nKVxuICAgICAgICAgICAgY29uc3QgbW9kZWxDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3JhZGlvJyk7XG4gICAgICAgICAgICBjb25zdCB0ZXJtc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fdGVybXMnKTtcbiAgICAgICAgICAgIGNvbnN0IGZvb3RlckNvbnRhaW5lciAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Zvb3RlcicpO1xuXHRcdFx0XHRcdFx0bW9kZWxDb250YWluZXIuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmVuZCcsIGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzYW1zdW5nX19jYXJlX19kZXRhaWxzXCI+XG4gICAgICAgICAgICAgICAgPGgyIGNsYXNzPVwibW9kYWxfX3RpdGxlXCI+U2Ftc3VuZyBDYXJlKyBpbmNsdWRlczo8L2gyPlxuICAgICAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgICAgIDxsaT5GYXN0IGFuZCBjb252ZW5pZW50IGV4cGVydCByZXBhaXJzIHVzaW5nIGdlbnVpbmUgU2Ftc3VuZyBwYXJ0czwvbGk+XG4gICAgICAgICAgICAgICAgICA8bGk+aWYgeW91ciBkZXZpY2UgaXNuJ3QgcnVubmluZyBzbW9vdGhseSwgd2UnbGwgY2hlY2sgYW5kIGZpeCBhbnkgaXNzdWVzPC9saT5cbiAgICAgICAgICAgICAgICAgIDxsaT5TdGF5IHBvd2VyZWQgdXAgd2l0aCBoYXNzbGUtZnJlZSBiYXR0ZXJ5IHJlcGxhY2VtZW50czwvbGk+XG4gICAgICAgICAgICAgICAgICA8bGk+VXAgdG8gZm91ciBjbGFpbXMgd2l0aGluIDI0IG1vbnRocywgb3IgdHdvIHdpdGhpbiAxMiBtb250aHM8L2xpPlxuICAgICAgICAgICAgICAgICAgPGxpPjxhIGhyZWY9XCJodHRwczovL3d3dy5zYW1zdW5nLmNvbS91ay9vZmZlci9zYW1zdW5nLWNhcmUtcGx1cy9cIj5TZWUgYWxsIGJlbmVmaXRzIGhlcmUuPC9hPiBLZXkgZGV0YWlscyBvZiB5b3VyIHBvbGljeSBjYW4gYmUgZm91bmQgaW4gdGhlIDxhIGhyZWY9XCJodHRwczovL2ltYWdlcy5zYW1zdW5nLmNvbS9pcy9jb250ZW50L3NhbXN1bmcvcDUvdWsvc2Ftc3VuZy1tb2JpbGUtY2FyZS1pcGlkLnBkZlwiPkluc3VyYW5jZSBQcm91ZGN0IEluZm9tYXRpb24gRG9jdW1lbnQoSVBJRCk8L2E+PC9saT5cbiAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzYW1zdW5nX19jYXJlX19kZXRhaWxzX18zMGRheXNcIiBzdHlsZT1cIiR7KHNrdS5pbmNsdWRlcygnU00tRzk5JykpID8gXCJkaXNwbGF5OiBibG9ja1wiIDogXCJkaXNwbGF5OiBub25lXCJ9XCI+XG4gICAgICAgICAgICAgICAgICA8aDIgY2xhc3M9XCJtb2RhbF9fdGl0bGVcIj5UcnkgU2Ftc3VuZyBDYXJlKyBmcmVlIGZvciAzMCBkYXlzPC9oMj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiaHViYmxlLXByb2R1Y3RfX29wdGlvbnMtY29udGVudC10ZXh0XCI+RG9lcyBub3QgcmVuZXcgYXV0b21hdGljYWxseS4gQ292ZXIgdGVybWluYXRlcyBhZnRlciAzMCBkYXlzIHVubGVzcyByZW5ld2VkIGF0IHNhbXN1bmdjYXJlcGx1cy5jb20uXG4gICAgICAgICAgICAgICAgICBTZXJ2aWNlIGZlZSBwZXIgY2xhaW0gc3RpbGwgYXBwbGllcy4gVmlldyB0aGUgSW5zdXJhbmNlIFByb2R1Y3QgSW5mb3JtYXRpb24gUGFjayhJUElEKSBmb3IgZnVsbCBwb2xpY3kgZGV0YWlscy5cbiAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgKTtcbiAgICAgICAgICAgIGZvb3RlckNvbnRhaW5lci5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyZW5kJywgdGVybXNDb250YWluZXIpO1xuICAgICAgICAgICAgY29uc3QgY2FuY2VsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9vdGVyLm1vZGFsX19idXR0b25zLS1pbmxpbmUgPiBidXR0b24uYnV0dG9uLnBpbGwtYnRuLnBpbGwtYnRuLS13aGl0ZS5yZXNldFwiKTtcbiAgICAgICAgICAgIGNvbnN0IGFkZFRvQmFza2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9vdGVyLm1vZGFsX19idXR0b25zLS1pbmxpbmUgPiBidXR0b24uYnV0dG9uLnByaW1hcnkucGlsbC1idG4ucGlsbC1idG4tLWJsYWNrLnZpZXctbW9yZVwiKTtcblxuICAgICAgICAgICAgdGl0bGUuaW5uZXJUZXh0ID0gJ1Byb3RleHQgeW91ciBHYWxheHkgd2l0aCBTYW1zdW5nIENhcmUrJztcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLmlubmVyVGV4dCA9ICdVcCB0byAyNCBtb250aHMgb2Ygd29ybGR3aWRlIGFjY2lkZW50YWwgZGFtYWdlIGluc3VyYW5jZSBmb3IgY29tcGxldGUgcGVhY2Ugb2YgbWluZCc7XG5cbiAgICAgICAgICAgIGNvbnN0IGxhYmVscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5vcHRpb24tYm94X19sYWJlbCcpO1xuICAgICAgICAgICAgbGFiZWxzLmZvckVhY2goKGxhYmVsKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBsYWJlbC5maXJzdENoaWxkLmlubmVyVGV4dDtcbiAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICcxIHllYXIgY292ZXJhZ2UnKSB7XG4gICAgICAgICAgICAgICAgbGFiZWwubGFzdEVsZW1lbnRDaGlsZC5pbm5lclRleHQgPSAnMTItbW9udGggcG9saWN5JztcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChuYW1lID09PSAnMiB5ZWFyIGNvdmVyYWdlJykge1xuICAgICAgICAgICAgICAgIGxhYmVsLmxhc3RFbGVtZW50Q2hpbGQuaW5uZXJUZXh0ID0gJzI0LW1vbnRoIHBvbGljeSc7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAobmFtZS5pbmNsdWRlcygnRnJlZScpKSB7XG4gICAgICAgICAgICAgICAgbGFiZWwuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJvcHRpb24tYm94X19uYW1lXCI+T25lIE1vbnRoIEZyZWUgKERvZXMgbm90IHJlbmV3KTwvZGl2PjxkaXYgY2xhc3M9XCJvcHRpb24tYm94X19jb2RlXCI+T25lIG1vbnRoIHBvbGljeTwvZGl2PidcbiAgICAgICAgICAgICAgICBsYWJlbC5sYXN0RWxlbWVudENoaWxkLmlubmVyVGV4dCA9ICdPbmUgbW9udGggcG9saWN5JztcblxuXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIGNvbnN0IHByaWNlVGFncyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5vcHRpb24tYm94X19wcmljZScpO1xuICAgICAgICAgICAgcHJpY2VUYWdzLmZvckVhY2goKHByaWNlcykgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBwcmljZSA9IHBhcnNlSW50KHByaWNlcy5pbm5lclRleHQuc2xpY2UoMSkpO1xuICAgICAgICAgICAgICBwcmljZXMuc3R5bGUudGV4dEFsaWduID0gJ3JpZ2h0JztcbiAgICAgICAgICAgICAgaWYgKHByaWNlcy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmlubmVyVGV4dC5pbmNsdWRlcygnMSB5ZWFyIGNvdmVyYWdlJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vbnRobHlQcmljZSA9IHByaWNlIC8gMTI7XG4gICAgICAgICAgICAgICAgcC5pbm5lclRleHQgPSBgKGVxdWlsdmFsZW50IHRvIMKjJHttb250aGx5UHJpY2UudG9GaXhlZCgyKX0gYSBtb250aClgO1xuICAgICAgICAgICAgICAgIHByaWNlcy5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2JlZm9yZWVuZCcscCk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJpY2VzLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuaW5uZXJUZXh0LmluY2x1ZGVzKCcyIHllYXIgY292ZXJhZ2UnKSl7XG4gICAgICAgICAgICAgICAgY29uc3QgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBtb250aGx5UHJpY2UgPSBwcmljZSAvIDI0O1xuICAgICAgICAgICAgICAgIHAuaW5uZXJUZXh0ID0gYChlcXVpbHZhbGVudCB0byDCoyR7bW9udGhseVByaWNlLnRvRml4ZWQoMil9IGEgbW9udGgpYDtcbiAgICAgICAgICAgICAgICBwcmljZXMuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdiZWZvcmVlbmQnLHApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgY29uc3QgY292ZXJPcHRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1hdC1yYWRpby1sYWJlbCcpO1xuICAgICAgICAgICAgY292ZXJPcHRpb25zLmZvckVhY2goKG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuaW5uZXJUZXh0LmluY2x1ZGVzKCcyIHllYXIgY292ZXJhZ2UnKSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuY2xpY2soKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgY2FuY2VsQnRuLmlubmVyVGV4dCA9IFwiTm8gVGhhbmtzXCI7XG4gICAgICAgICAgICBhZGRUb0Jhc2tldC5pbm5lclRleHQgPSBcIkFkZCB0byBvcmRlclwiO1xuXHRcdFx0XHRcdH0sMTUwMClcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGljb25CdG5DbGljaygpIHtcbiAgICBjb25zdCBjYXJ0T3B0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZXJ2aWNlLWl0ZW1fX25hbWUnKTtcbiAgICBjYXJ0T3B0aW9ucy5mb3JFYWNoKGNhcnRPcHRpb24gPT4ge1xuICAgICAgY29uc3QgaWNvbkluc3VyZUJ0biA9IGNhcnRPcHRpb24ucGFyZW50RWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF07XG4gICAgICBjb25zdCBza3UgPSBjYXJ0T3B0aW9uLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5jaGlsZHJlblsyXS5jaGlsZHJlbls0XS5pbm5lclRleHQ7XG4gICAgICBpY29uSW5zdXJlQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdwb3AgbiBjbGljayBpY29uJylcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC10aXRsZScpO1xuICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Rlc2NyaXB0aW9uJylcbiAgICAgICAgICAgIGNvbnN0IG1vZGVsQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19yYWRpbycpO1xuICAgICAgICAgICAgY29uc3QgdGVybXNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3Rlcm1zJyk7XG4gICAgICAgICAgICBjb25zdCBmb290ZXJDb250YWluZXIgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19mb290ZXInKTtcblx0XHRcdFx0XHRcdG1vZGVsQ29udGFpbmVyLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJlbmQnLCBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2Ftc3VuZ19fY2FyZV9fZGV0YWlsc1wiPlxuICAgICAgICAgICAgICAgIDxoMiBjbGFzcz1cIm1vZGFsX190aXRsZVwiPlNhbXN1bmcgQ2FyZSsgaW5jbHVkZXM6PC9oMj5cbiAgICAgICAgICAgICAgICA8dWw+XG4gICAgICAgICAgICAgICAgICA8bGk+RmFzdCBhbmQgY29udmVuaWVudCBleHBlcnQgcmVwYWlycyB1c2luZyBnZW51aW5lIFNhbXN1bmcgcGFydHM8L2xpPlxuICAgICAgICAgICAgICAgICAgPGxpPmlmIHlvdXIgZGV2aWNlIGlzbid0IHJ1bm5pbmcgc21vb3RobHksIHdlJ2xsIGNoZWNrIGFuZCBmaXggYW55IGlzc3VlczwvbGk+XG4gICAgICAgICAgICAgICAgICA8bGk+U3RheSBwb3dlcmVkIHVwIHdpdGggaGFzc2xlLWZyZWUgYmF0dGVyeSByZXBsYWNlbWVudHM8L2xpPlxuICAgICAgICAgICAgICAgICAgPGxpPlVwIHRvIGZvdXIgY2xhaW1zIHdpdGhpbiAyNCBtb250aHMsIG9yIHR3byB3aXRoaW4gMTIgbW9udGhzPC9saT5cbiAgICAgICAgICAgICAgICAgIDxsaT48YSBocmVmPVwiaHR0cHM6Ly93d3cuc2Ftc3VuZy5jb20vdWsvb2ZmZXIvc2Ftc3VuZy1jYXJlLXBsdXMvXCI+U2VlIGFsbCBiZW5lZml0cyBoZXJlLjwvYT4gS2V5IGRldGFpbHMgb2YgeW91ciBwb2xpY3kgY2FuIGJlIGZvdW5kIGluIHRoZSA8YSBocmVmPVwiaHR0cHM6Ly9pbWFnZXMuc2Ftc3VuZy5jb20vaXMvY29udGVudC9zYW1zdW5nL3A1L3VrL3NhbXN1bmctbW9iaWxlLWNhcmUtaXBpZC5wZGZcIj5JbnN1cmFuY2UgUHJvdWRjdCBJbmZvbWF0aW9uIERvY3VtZW50KElQSUQpPC9hPjwvbGk+XG4gICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2Ftc3VuZ19fY2FyZV9fZGV0YWlsc19fMzBkYXlzXCIgc3R5bGU9XCIkeyhza3UuaW5jbHVkZXMoJ1NNLUc5OScpKSA/IFwiZGlzcGxheTogYmxvY2tcIiA6IFwiZGlzcGxheTogbm9uZVwifVwiPlxuICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzPVwibW9kYWxfX3RpdGxlXCI+VHJ5IFNhbXN1bmcgQ2FyZSsgZnJlZSBmb3IgMzAgZGF5czwvaDI+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImh1YmJsZS1wcm9kdWN0X19vcHRpb25zLWNvbnRlbnQtdGV4dFwiPkRvZXMgbm90IHJlbmV3IGF1dG9tYXRpY2FsbHkuIENvdmVyIHRlcm1pbmF0ZXMgYWZ0ZXIgMzAgZGF5cyB1bmxlc3MgcmVuZXdlZCBhdCBzYW1zdW5nY2FyZXBsdXMuY29tLlxuICAgICAgICAgICAgICAgICAgU2VydmljZSBmZWUgcGVyIGNsYWltIHN0aWxsIGFwcGxpZXMuIFZpZXcgdGhlIEluc3VyYW5jZSBQcm9kdWN0IEluZm9ybWF0aW9uIFBhY2soSVBJRCkgZm9yIGZ1bGwgcG9saWN5IGRldGFpbHMuXG4gICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYCk7XG4gICAgICAgICAgICBmb290ZXJDb250YWluZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmVuZCcsIHRlcm1zQ29udGFpbmVyKTtcbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvb3Rlci5tb2RhbF9fYnV0dG9ucy0taW5saW5lID4gYnV0dG9uLmJ1dHRvbi5waWxsLWJ0bi5waWxsLWJ0bi0td2hpdGUucmVzZXRcIik7XG4gICAgICAgICAgICBjb25zdCBhZGRUb0Jhc2tldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvb3Rlci5tb2RhbF9fYnV0dG9ucy0taW5saW5lID4gYnV0dG9uLmJ1dHRvbi5wcmltYXJ5LnBpbGwtYnRuLnBpbGwtYnRuLS1ibGFjay52aWV3LW1vcmVcIik7XG5cbiAgICAgICAgICAgIHRpdGxlLmlubmVyVGV4dCA9ICdQcm90ZXh0IHlvdXIgR2FsYXh5IHdpdGggU2Ftc3VuZyBDYXJlKyc7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbi5pbm5lclRleHQgPSAnVXAgdG8gMjQgbW9udGhzIG9mIHdvcmxkd2lkZSBhY2NpZGVudGFsIGRhbWFnZSBpbnN1cmFuY2UgZm9yIGNvbXBsZXRlIHBlYWNlIG9mIG1pbmQnO1xuXG4gICAgICAgICAgICBjb25zdCBsYWJlbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub3B0aW9uLWJveF9fbGFiZWwnKTtcbiAgICAgICAgICAgIGxhYmVscy5mb3JFYWNoKChsYWJlbCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBuYW1lID0gbGFiZWwuZmlyc3RDaGlsZC5pbm5lclRleHQ7XG4gICAgICAgICAgICAgIGlmIChuYW1lID09PSAnMSB5ZWFyIGNvdmVyYWdlJykge1xuICAgICAgICAgICAgICAgIGxhYmVsLmxhc3RFbGVtZW50Q2hpbGQuaW5uZXJUZXh0ID0gJzEyLW1vbnRoIHBvbGljeSdcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChuYW1lID09PSAnMiB5ZWFyIGNvdmVyYWdlJykge1xuICAgICAgICAgICAgICAgIGxhYmVsLmxhc3RFbGVtZW50Q2hpbGQuaW5uZXJUZXh0ID0gJzI0LW1vbnRoIHBvbGljeSdcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChuYW1lLmluY2x1ZGVzKCdGcmVlJykpIHtcbiAgICAgICAgICAgICAgICBsYWJlbC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz1cIm9wdGlvbi1ib3hfX25hbWVcIj5PbmUgTW9udGggRnJlZSAoRG9lcyBub3QgcmVuZXcpPC9kaXY+PGRpdiBjbGFzcz1cIm9wdGlvbi1ib3hfX2NvZGVcIj5PbmUgbW9udGggcG9saWN5PC9kaXY+J1xuICAgICAgICAgICAgICAgIGxhYmVsLmxhc3RFbGVtZW50Q2hpbGQuaW5uZXJUZXh0ID0gJ09uZSBtb250aCBwb2xpY3knXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIGNvbnN0IHByaWNlVGFncyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5vcHRpb24tYm94X19wcmljZScpO1xuICAgICAgICAgICAgcHJpY2VUYWdzLmZvckVhY2goKHByaWNlcykgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBwcmljZSA9IHBhcnNlSW50KHByaWNlcy5pbm5lclRleHQuc2xpY2UoMSkpO1xuICAgICAgICAgICAgICBwcmljZXMuc3R5bGUudGV4dEFsaWduID0gJ3JpZ2h0JztcbiAgICAgICAgICAgICAgaWYgKHByaWNlcy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmlubmVyVGV4dC5pbmNsdWRlcygnMSB5ZWFyIGNvdmVyYWdlJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vbnRobHlQcmljZSA9IHByaWNlIC8gMTI7XG4gICAgICAgICAgICAgICAgcC5pbm5lclRleHQgPSBgKGVxdWlsdmFsZW50IHRvIMKjJHttb250aGx5UHJpY2UudG9GaXhlZCgyKX0gYSBtb250aClgO1xuICAgICAgICAgICAgICAgIHByaWNlcy5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2JlZm9yZWVuZCcscCk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJpY2VzLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuaW5uZXJUZXh0LmluY2x1ZGVzKCcyIHllYXIgY292ZXJhZ2UnKSl7XG4gICAgICAgICAgICAgICAgY29uc3QgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBtb250aGx5UHJpY2UgPSBwcmljZSAvIDI0O1xuICAgICAgICAgICAgICAgIHAuaW5uZXJUZXh0ID0gYChlcXVpbHZhbGVudCB0byDCoyR7bW9udGhseVByaWNlLnRvRml4ZWQoMil9IGEgbW9udGgpYDtcbiAgICAgICAgICAgICAgICBwcmljZXMuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdiZWZvcmVlbmQnLHApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgY29uc3QgY292ZXJPcHRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1hdC1yYWRpby1sYWJlbCcpO1xuICAgICAgICAgICAgY292ZXJPcHRpb25zLmZvckVhY2goKG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuaW5uZXJUZXh0LmluY2x1ZGVzKCcyIHllYXIgY292ZXJhZ2UnKSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuY2xpY2soKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgY2FuY2VsQnRuLmlubmVyVGV4dCA9IFwiTm8gVGhhbmtzXCI7XG4gICAgICAgICAgICBhZGRUb0Jhc2tldC5pbm5lclRleHQgPSBcIkFkZCB0byBvcmRlclwiO1xuXHRcdFx0XHRcdH0sMTUwMClcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSIsIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyAgVGhpcyBpcyBhIGJvaWxlcnBsYXRlIHRvIHVzZSBmb3IgdGFyZ2V0IGFjdGl2aXRpZXNcbi8vXG4vL1x0VVJMIGV4YW1wbGU6IGFkZCBpbiB1cmwgb2YgcHJvamVjdCBmb3IgdmlzaWJpbGl0eSBoZXJlXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gU2NyaXB0cywgaGVscGVyIHdpZGdldHMgLSBpbXBvcnQgYmVsb3dcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5pbXBvcnQgUG9wVXBDb250ZW50IGZyb20gXCIuL2NvbXBvbmVudHMvcG9wVXBDb250ZW50XCI7XG5pbXBvcnQgQWRkRWxlbWVudHMgZnJvbSBcIi4vY29tcG9uZW50cy9hZGRFbGVtZW50c1wiO1xuaW1wb3J0IE5ld0VsZW1lbnRzIGZyb20gXCIuL2NvbXBvbmVudHMvbmV3RWxlbWVudHNcIjtcbnZhciBjaGVpbGxvbmRvbiA9IGNoZWlsbG9uZG9uIHx8IHt9O1xuXG5jaGVpbGxvbmRvbi50YXJnZXRCb2lsZXJwbGF0ZSA9IChmdW5jdGlvbiAoKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBtYWluID0ge1xuXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHQvLyBWYXJpYWJsZXMgYW5kIGNvbmZpZyBQcm9wZXJ0aWVzIGFkZCBiZWxvd1xuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuXHRcdC8vSW5pdFxuXHRcdGluaXQ6IGZ1bmN0aW9uICgpIHtcblx0XHRcdG1haW4uZG9FdmVyeXRoaW5nVGltZW91dCgpO1xuXHRcdH0sXG5cblxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gQ2hlY2tpbmcgalF1ZXJ5XG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHRkb0V2ZXJ5dGhpbmdUaW1lb3V0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgX3NlbGYgPSB0aGlzO1xuXG5cdFx0XHRjb25zb2xlLmxvZygnWFhYIC0gZG9FdmVyeXRoaW5nVGltZW91dCcpO1xuXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0aWYgKHdpbmRvdy4kKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ2RvRXZlcnl0aGluZ1RpbWVvdXQgLSBqUXVlcnkgbG9hZGVkJyk7XG5cdFx0XHRcdFx0Y29uc3QgY2FydFNrdXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FydC1pdGVtX19za3UnKTtcblx0XHRcdFx0XHRjYXJ0U2t1cy5mb3JFYWNoKChjYXJ0U2t1KSA9PiB7XG5cdFx0XHRcdFx0XHRpZihjYXJ0U2t1LmlubmVyVGV4dC5pbmNsdWRlcygnU00tRzk5JykgfHwgY2FydFNrdS5pbm5lclRleHQuaW5jbHVkZXMoJ1NNLUYnKSkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBwb3BVcENvbnRlbnQgPSBuZXcgUG9wVXBDb250ZW50KCk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGFkZEVsZW1lbnRzID0gbmV3IEFkZEVsZW1lbnRzKCk7XG5cdFx0XHRcdFx0XHRcdG1haW4uYXBwZW5kTmV3U3R5bGUoKTtcblx0XHRcdFx0XHRcdFx0YWRkRWxlbWVudHMuZWxlbWVudHNBZGRlZCgpO1xuXHRcdFx0XHRcdFx0XHRwb3BVcENvbnRlbnQuYWRkQ29uZW50KCk7XG5cdFx0XHRcdFx0XHRcdG1haW4uZWxlbWVudE9ic2VydmF0aW9uKCk7XG5cdFx0XHRcdFx0XHRcdG1haW4uaW5zdXJlVGV4dCgpO1xuXHRcdFx0XHRcdFx0XHRwb3BVcENvbnRlbnQuaWNvbkJ0bkNsaWNrKCk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnbm90IGluIHJhbmdlJylcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KVxuXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ25vIGpxdWVyeScpXG5cdFx0XHRcdFx0X3NlbGYuZG9FdmVyeXRoaW5nVGltZW91dCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCAxMDAwKVxuXHRcdH0sXG5cblxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gQWRkaW5nIHN0eWxlXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHRhcHBlbmROZXdTdHlsZTogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHQvKiBGWUk6IHRoZSBDU1MgY29kZSBpcyBpbiBzZXBhcmF0ZWQgZmlsZSwgaW4gU0NTUyBmb3JtYXQgdGhhdCBnZW5lcmF0ZXMgdGhlIENTUyBmaWxlLiBBZnRlciwgdGhlIGd1bHAgZmlsZSBmaW5kcyB0aGUgW0NTU10gYW5kIHJlcGxhY2VzIHdpdGggbWluaWZpZWQgY29kZSBmcm9tIGZpbGUgKi9cblxuXHRcdFx0Ly9UbyBpbnNlcnQgbWluaWZpZWQgaW5saW5lIHN0cmluZyB1bmNvbW1lbnQgdGhpcyB2YXJpYWJsZSBhbmQgcGFzdGUgaGVyZVxuXHRcdFx0Ly9FbHNlLCB1c2UgZGVmYXVsdCB1bmNvbW1lbnRlZCB2YXJpYWJsZVxuXHRcdFx0Ly8gdmFyIF9jc3MgPSAnJztcblxuXHRcdFx0dmFyIF9jc3MgPSAnW1tDU1NdXSc7XG5cblx0XHRcdC8vXG5cdFx0XHQvLyBBZGRpbmcgc3R5bGUgZGVmaW5pdGlvbnMgdG8gRE9NXG5cdFx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdFx0dmFyIF9oZWFkID0gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLFxuXHRcdFx0XHRfc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuXG5cdFx0XHRfc3R5bGUudHlwZSA9ICd0ZXh0L2Nzcyc7XG5cdFx0XHRpZiAoX3N0eWxlLnN0eWxlU2hlZXQpIHsgLy8gVGhpcyBpcyByZXF1aXJlZCBmb3IgSUU4IGFuZCBiZWxvdy5cblx0XHRcdFx0X3N0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IF9jc3M7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRfc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoX2NzcykpO1xuXHRcdFx0fVxuXHRcdFx0X2hlYWQuYXBwZW5kQ2hpbGQoX3N0eWxlKTtcblxuXHRcdH0sXG5cblx0XHRyZW1vdmVTdHVmZjogZnVuY3Rpb24gKCkge1xuXHRcdFx0Y29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub3B0aV9fZGl2Jyk7XG5cdFx0XHRkZXNjcmlwdGlvbi5mb3JFYWNoKChkZXNjKSA9PiB7XG5cblx0XHRcdFx0aWYgKGRlc2MuaW5uZXJUZXh0LmluY2x1ZGVzKCdpbnN1cmFuY2UnKSkge1xuXHRcdFx0XHRcdGRlc2MucHJldmlvdXNFbGVtZW50U2libGluZy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblx0XHRcdFx0XHRkZXNjLnByZXZpb3VzU2libGluZy5zdHlsZS5jb2xvciA9ICcjMDAwMDAwJztcblx0XHRcdFx0XHRkZXNjLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGRlc2MucHJldmlvdXNFbGVtZW50U2libGluZy50ZXh0Q29udGVudCA9PT0gJ0FkZCBTYW1zdW5nIENhcmUrJykge1xuXHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKCdnb3QgaW4gaGVyZSBhcyB3ZWxsJylcblx0XHRcdFx0XHRjb25zdCBhZGRpbmdOZXdFbGVtZW50cyA9IG5ldyBOZXdFbGVtZW50cygpO1xuXHRcdFx0XHRcdGFkZGluZ05ld0VsZW1lbnRzLmFkZGluZ05ld0VsZW1lbnRzKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0fSxcblxuXHRcdGVsZW1lbnRPYnNlcnZhdGlvbjogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRjb25zdCBlbGVUb09ic2VydmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1pdGVtJylcblx0XHRcdFx0XHRjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCd0cmlnZ2VyJylcblx0XHRcdFx0XHRcdHRoaXMucmVtb3ZlU3R1ZmYoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRvYnNlcnZlci5vYnNlcnZlKGVsZVRvT2JzZXJ2ZSwge3N1YnRyZWU6IHRydWUsIGNoaWxkTGlzdDogdHJ1ZX0pO1xuXG5cblx0XHR9LFxuXG5cdFx0aW5zdXJlVGV4dDogZnVuY3Rpb24gKCkge1xuXHRcdFx0Y29uc3QgaW5zdXJhbmNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlcnZpY2UtaXRlbV9fYWN0aW9ucycpO1xuXHRcdFx0Y29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3Rpb24tdGV4dCcpLmlubmVyVGV4dClcblx0XHRcdFx0aWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3Rpb24tdGV4dCcpLmlubmVyVGV4dCA9PT0gXCJBZGRcIikge1xuXHRcdFx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3Rpb24tdGV4dCcpLmlubmVyVGV4dCA9IFwiQWRkIGluc3VyYW5jZVwiXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0b2JzZXJ2ZXIub2JzZXJ2ZShpbnN1cmFuY2UsIHtzdWJ0cmVlOiB0cnVlLCBjaGlsZExpc3Q6IHRydWV9KTtcblx0XHR9LFxuXG5cblxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gU2V0IEV2ZW50c1xuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0c2V0RXZlbnRzOiBmdW5jdGlvbiAoZWxtID0gJycpIHtcblxuXHRcdFx0Y29uc29sZS5sb2coJ1hYWCAtIHNldEV2ZW50czogJyArIGVsbSk7XG5cblx0XHRcdHN3aXRjaCAoZWxtKSB7XG5cdFx0XHRcdGNhc2UgJ21vZGFsJzpcblx0XHRcdFx0XHQvL2NvZGUgdG8gb3BlbiBtb2RhbDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAnZmluYW5jZVBvcHVwJzpcblx0XHRcdFx0Ly9jb2RlIHRvIG9wZW4gc29tZXRoaW5nIGVsc2U7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cblxuXG5cdFx0fSxcblxuXHRcdHJlc2l6ZVdpbmRvdzogZnVuY3Rpb24gKCkge1xuXHRcdFx0Ly8gYXMgbmV3IGVsZW1lbnRzIGFkZGVkIHRvIHBhbmVsIHdlIG5lZWQgdG8gcmVzaXplIHdpbmRvdyB0byBhY3RpdmF0ZSBhbWVuZCBoZWlnaHQgb2YgUHJvZHVjdCBQYW5lbHNcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQkKHdpbmRvdykucmVzaXplKCk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCd3aW5kb3cgcmVzaXplZCcpO1xuXHRcdFx0fSwgMTAwKTtcblx0XHR9XG5cblxuXHR9O1xuXHRyZXR1cm4ge1xuXHRcdG1haW46IG1haW5cblx0fTtcblxufSkoKTtcblxuY2hlaWxsb25kb24udGFyZ2V0Qm9pbGVycGxhdGUubWFpbi5pbml0KCk7XG5cbiJdfQ=="}