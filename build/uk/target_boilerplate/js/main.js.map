{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/components/popUpContent.js","src/js/main.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","export default class PopUpContent {\n  addContent() {\n   const cartSkus = document.querySelectorAll('.cart-item__sku');\n   let skusArr = [];\n   cartSkus.forEach((skus) => skusArr.push(skus.innerText));\n    setTimeout(() => {\n      const title = document.getElementById('modal-title');\n      const description = document.querySelector('.modal__description');\n      const modelContainer = document.querySelector('.modal__radio');\n      const modelContainerLength = modelContainer.children[0].children.length;\n      const termsContainer = document.querySelector('.modal__terms');\n      const footerContainer  = document.querySelector('.modal__footer');\n\t\t\t\t\t\tmodelContainer.insertAdjacentHTML('afterend', `\n            <div class=\"samsung__care__details\">\n                <h2 class=\"modal__title\">Samsung Care+ includes:</h2>\n                <ul>\n                  <li>Fast and convenient expert repairs using genuine Samsung parts</li>\n                  <li>if your device isn't running smoothly, we'll check and fix any issues</li>\n                  <li>Stay powered up with hassle-free battery replacements</li>\n                  <li>Up to four claims within 24 months, or two within 12 months</li>\n                  <li><a href=\"https://www.samsung.com/uk/offer/samsung-care-plus/\">See all benefits here.</a> Key details of your policy can be found in the <a href=\"https://images.samsung.com/is/content/samsung/p5/uk/samsung-mobile-care-ipid.pdf\">Insurance Proudct Infomation Document(IPID)</a></li>\n                </ul>\n                <div class=\"samsung__care__details__30days\" style=\"${(skusArr.includes('SM-G991BZVGEUA') && modelContainerLength >= 3) ? 'display: block' : 'display: none'}\">\n                  <h2 class=\"modal__title\">Try Samsung Care+ free for 30 days</h2>\n                  <p class=\"hubble-product__options-content-text\">Does not renew automatically. Cover terminates after 30 days unless renewed at samsungcareplus.com.\n                  Service fee per claim still applies. View the Insurance Product Information Pack(IPID) for full policy details.\n                  </p>\n                </div>\n              </div>\n            `);\n            footerContainer.insertAdjacentElement('afterend', termsContainer);\n            const cancelBtn = document.querySelector(\".modal__footer.modal__buttons--inline > button.button.pill-btn.pill-btn--white.reset\");\n            const addToBasket = document.querySelector(\".modal__footer.modal__buttons--inline > button.button.primary.pill-btn.pill-btn--black.view-more\");\n\n            title.innerText = 'Protext your Galaxy with Samsung Care+';\n            description.innerText = 'Up to 24 months of worldwide accidental damage insurance for complete peace of mind';\n\n            const labels = document.querySelectorAll('.option-box__label');\n            labels.forEach((label) => {\n              const name = label.firstChild.innerText;\n              if (name === '1 year coverage') {\n                label.lastElementChild.innerText = '12-month policy';\n              } else if (name === '2 year coverage') {\n                label.lastElementChild.innerText = '24-month policy';\n              } else if (name.includes('Free')) {\n                label.innerHTML = '<div class=\"option-box__name\">One Month Free (Does not renew)</div><div class=\"option-box__code\">One month policy</div>'\n                label.lastElementChild.innerText = 'One month policy';\n\n\n              }\n            })\n\n            const priceTags = document.querySelectorAll('.option-box__price');\n            priceTags.forEach((prices) => {\n              const price = parseInt(prices.innerText.slice(1));\n              prices.style.textAlign = 'right';\n              if (prices.previousElementSibling.innerText.includes('1 year coverage')) {\n                const p = document.createElement('p');\n                const monthlyPrice = price / 12;\n                p.innerText = `(equilvalent to £${monthlyPrice.toFixed(2)} a month)`;\n                prices.insertAdjacentElement('beforeend',p);\n              } else if (prices.previousElementSibling.innerText.includes('2 year coverage')){\n                const p = document.createElement('p');\n                const monthlyPrice = price / 24;\n                p.innerText = `(equilvalent to £${monthlyPrice.toFixed(2)} a month)`;\n                prices.insertAdjacentElement('beforeend',p);\n              }\n            })\n            const coverOptions = document.querySelectorAll('.mat-radio-label');\n            coverOptions.forEach((options) => {\n              if (options.innerText.includes('2 year coverage')) {\n                options.click()\n              }\n            })\n            cancelBtn.innerText = \"No Thanks\";\n            addToBasket.innerText = \"Add to order\";\n\t\t\t\t\t },1500)\n  }\n\n}","// ==========================================================================\n//  This is a boilerplate to use for target activities\n//\n//\tURL example: add in url of project for visibility here\n// ==========================================================================\n\n// ==========================================================================\n// Scripts, helper widgets - import below\n// ==========================================================================\nimport PopUpContent from \"./components/popUpContent\";\n\nvar cheillondon = cheillondon || {};\n\ncheillondon.targetBoilerplate = (function () {\n\n\t'use strict';\n\n\tvar main = {\n\n\t\t// ==========================================================================\n\t\t// Variables and config Properties add below\n\t\t// ==========================================================================\n\n\n\t\t//Init\n\t\tinit: function () {\n\t\t\tmain.doEverythingTimeout();\n\t\t},\n\n\n\t\t// ==========================================================================\n\t\t// Checking jQuery\n\t\t// ==========================================================================\n\t\tdoEverythingTimeout: function () {\n\t\t\tvar _self = this;\n\n\t\t\tconsole.log('XXX - doEverythingTimeout');\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tif (window.$) {\n\t\t\t\t\tconsole.log('doEverythingTimeout - jQuery loaded');\n\t\t\t\t\tmain.appendNewStyle();\n\t\t\t\t\tmain.tweakElements();\n\t\t\t\t\tmain.addElements();\n\t\t\t\t\tmain.insureButtons();\n\t\t\t\t\tmain.freeInsurance();\n\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('no jquery')\n\t\t\t\t\t_self.doEverythingTimeout();\n\t\t\t\t}\n\t\t\t}, 900)\n\t\t},\n\n\n\t\t// ==========================================================================\n\t\t// Adding style\n\t\t// ==========================================================================\n\t\tappendNewStyle: function () {\n\n\t\t\t/* FYI: the CSS code is in separated file, in SCSS format that generates the CSS file. After, the gulp file finds the [CSS] and replaces with minified code from file */\n\n\t\t\t//To insert minified inline string uncomment this variable and paste here\n\t\t\t//Else, use default uncommented variable\n\t\t\t// var _css = '';\n\n\t\t\tvar _css = '[[CSS]]';\n\n\t\t\t//\n\t\t\t// Adding style definitions to DOM\n\t\t\t// --------------------------------------------------------------------------\n\t\t\tvar _head = document.head || document.getElementsByTagName('head')[0],\n\t\t\t\t_style = document.createElement('style');\n\n\t\t\t_style.type = 'text/css';\n\t\t\tif (_style.styleSheet) { // This is required for IE8 and below.\n\t\t\t\t_style.styleSheet.cssText = _css;\n\t\t\t} else {\n\t\t\t\t_style.appendChild(document.createTextNode(_css));\n\t\t\t}\n\t\t\t_head.appendChild(_style);\n\n\t\t},\n\n\t\ttweakElements: function () {\n\n\t\t\tconst testedDevices = [\"S21\", \"S21+\", \"S21 Ultra\", \"Note 20\", \"Note20\", \"A72\", \"A52 5G\", \"Tab S7\", \"Z Flip3 5G\"];\n\t\t\tvar priceFormatter = new Intl.NumberFormat(\"en-UK\", { style: \"currency\", currency: \"GBP\" });\n\n\t\t\t var termsAsterisks = 0;\n    var terms = [];\n\n    $(\".cart-item\").each(function (index, element) {\n        if(testedDevices.filter((device) => (element.querySelector(\".cart-item__name\").innerText.includes(device))) && ($(element).find(\".service-item:contains(Insurance)\").length > 0)) {//If device name matches and has trade in text\n            //for whatever reason, do another loop to get the matched device keyword e.g. \"S21+\", but that makes the order of the testedDevices important\n            //for instance, if S21 was after S21 Ultra, S21 Ultra would be counted as S21 (because of the for loop below)\n            var matchedDevice;\n            testedDevices.forEach(function (device) {\n                if(element.querySelector(\".cart-item__name\").innerText.includes(device)) matchedDevice = device;\n            });\n\n            var $tradeInElement = $(element).find(\".service-item:contains(Insurance)\"),\n                $details = $tradeInElement.find(\".service-item__details\"),\n                $learnMoreButton = $(\"<p class='tradein__learnmore'>Learn More</p>\");\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet firstLoadDetails = new Array ($details[0].children);\n\n\n            if (!$tradeInElement.find(\".action-text.action-text--mobile.ng-star-inserted\").text().includes(\"-£\")) { //avoid repeats\n                termsAsterisks += 1;\n                $details.children()[0].innerText = \"Add Samsung Care+\";\n                var copy;\n                var legal;\n                switch (matchedDevice) {\n                    case \"S21+\":\n                    case \"S21 Ultra\":\n                        (copy = \"Up to 24 months of worldwide accidental damage insurance for complete peace of mind.\" );\n                        break;\n                    case \"S21\":\n                        (copy = \"Up to 24 months of worldwide accidental damage insurance for complete peace of mind.\");\n                        break;\n                    case \"Note 20\":\n                    case \"Note20\":\n                        (copy = \"Up to 24 months of worldwide accidental damage insurance for complete peace of mind.\");\n                        break;\n                    case \"A72\":\n                    case \"A52 5G\":\n                        (copy = \"Up to 24 months of worldwide accidental damage insurance for complete peace of mind.\");\n                        break;\n                    case \"Tab S7\":\n                        (copy = \"Up to 24 months of worldwide accidental damage insurance for complete peace of mind.\");\n                        break;\n                    case \"Z Flip3 5G\":\n                        (copy = \"Up to 24 months of worldwide accidental damage insurance for complete peace of mind.\");\n                        break;\n                    default:\n                        (copy = \"Trade In product\"), (legal = \"\"), console.error(\"Product outside expected product range.\");\n                }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(element.querySelector('.service-item__insurance-copy') === null ) ? $details.children().children().hide()  : $details.children().children().show();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$details.children()[1].insertAdjacentHTML('afterend', `<div class=\"service-item__insurance-copy\"><p>${copy}</p></div>`)\n                // terms.push(legal);\n                $details.append($learnMoreButton);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst popUpContent = new PopUpContent();\n                $learnMoreButton.on(\"click\", function () {\n                    $tradeInElement.find(\".action-button.ng-star-inserted\").click();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpopUpContent.addContent();\n                });\n\n                $tradeInElement.find(\".action-text.action-text--blue\").text(\"Add Insurance\");\n\n                var priceElement = $(element).find(\".price__current\")[0];\n                var Observer = window.MutationObserver || window.WebKitMutationObserver;\n\n                new Observer(function (n) {\n                    var modelPrice = element.getAttribute(\"data-modelprice\");\n                    var price = Number(priceElement.innerText.replace(/[^0-9.-]+/g, \"\"));\n                    modelPrice == price || isNaN(price)\n                        ? ($learnMoreButton.show(), $(element).find(\".price__current > div\").length > 0 && $(element).find(\".price__current > div\").remove(), $tradeInElement.find(\".action-text.action-text--blue\").text(\"Add Insurance\"))\n                        : ($learnMoreButton.hide(),\n                            $(element)\n                                .find(\".price__current\")\n                                .append('<div class=\"tradein__oldprice\">' + priceFormatter.format(modelPrice) + \"</div>\"));\n                }).observe(priceElement, { childList: !1, characterData: !0, attributes: !0, subtree: !0 });\n\n                new Observer(function () {\n                    $tradeInElement.find(\".service-item__applied-message.ng-star-inserted:contains(been successfully applied)\").text($tradeInElement);\n                }).observe($tradeInElement[0], { childList: !0, characterData: !0, attributes: !0, subtree: !0 });\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnew Observer(function () {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('observations here')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$details.children()[1].nextSibling.style.display = 'none';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$learnMoreButton.hide();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ($details.children()[1].innerText.includes('Add Samsung Care+')) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('we have now entered here')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$details.children()[1].nextSibling.style.display = 'block';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$learnMoreButton.show();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$details.children()[1].childNodes[0].style.color = 'white';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$details.children()[1].childNodes[0].style.height = '0px';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$tradeInElement.find(\".action-text.action-text--blue\").text(\"Add Insurance\");\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}).observe($details.children()[1], {attributes: true, childList: true, subtree: true})\n\n            }\n\n        }\n\n    })\n\n   main.processTermsFooter(terms);\n\n\n\t\t},\n\n\t\tinsureButtons: function () {\n\n\t\t\tconst allbtns = document.querySelectorAll('.action-text');\n\t\t\tconst popUpContent = new PopUpContent();\n\t\t\t\t\t\t\t\t\tallbtns.forEach((insureBtn) => {\n\t\t\t\t\t\t\t\t\tif (insureBtn.innerText.includes('Add Insurance')){\n\t\t\t\t\t\t\t\t\t\t\t\tinsureBtn.onclick = () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tpopUpContent.addContent();\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\n\t\t},\n\n\t\tfreeInsurance: function () {\n\t\t\tconst cartNames = document.querySelectorAll('.cart-item__name');\n\n\t\t\tcartNames.forEach((cartName) => {\n\t\t\t\tif (cartName.innerText.includes('Galaxy S21 5G')) {\n\t\t\t\t\tconst cartservicesContainer = cartName.parentElement.parentElement.parentElement.children[6]\n\t\t\t\t\tconst insuranceCopyContainer = cartservicesContainer.querySelector('.service-item__insurance-copy')\n\t\t\t\t\tconst paragraph = `<p class=\"warning__policy\">Try Samsung Care+ free for 30 days (does not renew)</p>`\n\t\t\t\t\tinsuranceCopyContainer.insertAdjacentHTML('afterbegin', paragraph)\n\t\t\t\t}\n\t\t\t})\n\n\t\t},\n\n\n\n\t\t// ==========================================================================\n\t\t// When page is already loaded we need to add the new elements\n\t\t// ==========================================================================\n\t\taddElements: function () {\n\n\t\t\tconsole.log('XXX - addElements');\n\n\n\n\t\t},\n\n\n\t\t// ==========================================================================\n\t\t// Set Events\n\t\t// ==========================================================================\n\t\tsetEvents: function (elm = '') {\n\n\t\t\tconsole.log('XXX - setEvents: ' + elm);\n\n\t\t\tswitch (elm) {\n\t\t\t\tcase 'modal':\n\t\t\t\t\t//code to open modal;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'financePopup':\n\t\t\t\t//code to open something else;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\n\n\t\t},\n\n\t\tresizeWindow: function () {\n\t\t\t// as new elements added to panel we need to resize window to activate amend height of Product Panels\n\t\t\tsetTimeout(function () {\n\t\t\t\t$(window).resize();\n\t\t\t\tconsole.log('window resized');\n\t\t\t}, 100);\n\t\t},\n\n\t\tprocessTermsFooter: function (n) {\n\t\t\t\tlet Terms = $(\"<p id='TradeInConditions'></p>\");\n\t\t\t\t\t\t\tdocument.body.contains(Terms[0]) || $(\".TermsConditionsSlotContent\").append(Terms), n && Terms.html(n.join(\"<br/>\"));\n\t\t\t},\n\t\t\tTerms: $(\"<p id='TradeInConditions'></p>\"),\n\n\n\t};\n\treturn {\n\t\tmain: main\n\t};\n\n})();\n\ncheillondon.targetBoilerplate.main.init();\n\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29tcG9uZW50cy9wb3BVcENvbnRlbnQuanMiLCJzcmMvanMvbWFpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtvTENBcUIsZ0ZBQ25CLHNCQUNDLElBQ0ksS0FEYSxTQUFTLGlCQUFpQixtQkFFbEMsUUFBUSxTQUFDLEdBQUQsT0FBVSxFQUFRLEtBQUssRUFBSyxhQUM1QyxXQUFXLFdBQ1QsSUFBTSxFQUFRLFNBQVMsZUFBZSxlQUNoQyxFQUFjLFNBQVMsY0FBYyx1QkFDckMsRUFBaUIsU0FBUyxjQUFjLGlCQUN4QyxFQUF1QixFQUFlLFNBQVMsR0FBRyxTQUFTLE9BQzNELEVBQWlCLFNBQVMsY0FBYyxpQkFDeEMsRUFBbUIsU0FBUyxjQUFjLGtCQUNoRCxFQUFlLG1CQUFtQixXQUFsQyx1NEJBVWdFLEVBQVEsU0FBUyxtQkFBcUIsR0FBd0IsRUFBSyxpQkFBbUIsaUJBVnRKLHdkQWtCTSxFQUFnQixzQkFBc0IsV0FBWSxHQUNsRCxJQUFNLEVBQVksU0FBUyxjQUFjLHdGQUNuQyxFQUFjLFNBQVMsY0FBYyxvR0FFM0MsRUFBTSxVQUFZLHlDQUNsQixFQUFZLFVBQVksc0ZBRVQsU0FBUyxpQkFBaUIsc0JBQ2xDLFFBQVEsU0FBQyxHQUNkLElBQU0sRUFBTyxFQUFNLFdBQVcsVUFDakIsb0JBQVQsRUFDRixFQUFNLGlCQUFpQixVQUFZLGtCQUNqQixvQkFBVCxFQUNULEVBQU0saUJBQWlCLFVBQVksa0JBQzFCLEVBQUssU0FBUyxVQUN2QixFQUFNLFVBQVksMEhBQ2xCLEVBQU0saUJBQWlCLFVBQVksc0JBTXJCLFNBQVMsaUJBQWlCLHNCQUNsQyxRQUFRLFNBQUMsR0FDakIsSUFBTSxFQUFRLFNBQVMsRUFBTyxVQUFVLE1BQU0sSUFFOUMsR0FEQSxFQUFPLE1BQU0sVUFBWSxRQUNyQixFQUFPLHVCQUF1QixVQUFVLFNBQVMsbUJBQW9CLENBQ3ZFLElBQU0s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UUFBUSxTQUFDLEdBQ2xCLEdBQUksRUFBUyxVQUFVLFNBQVMsaUJBQWtCLENBQ25CLEVBQVMsY0FBYyxjQUFjLGNBQWMsU0FBUyxHQUNyQyxjQUFjLGlDQUU1QyxtQkFBbUIsYUFEcEMsMEZBWVQsWUFBYSxXQUVaLFFBQVEsSUFBSSxzQkFVYixVQUFXLFdBQW9CLElBQVYsRUFBVSxVQUFBLE9BQUEsUUFBQSxJQUFBLFVBQUEsR0FBQSxVQUFBLEdBQUosR0FFMUIsUUFBUSxJQUFJLG9CQUFzQixJQWdCbkMsYUFBYyxXQUViLFdBQVcsV0FDVixFQUFFLFFBQVEsU0FDVixRQUFRLElBQUksbUJBQ1YsTUFHSixtQkFBb0IsU0FBVSxHQUM1QixJQUFJLEVBQVEsRUFBRSxrQ0FDWCxTQUFTLEtBQUssU0FBUyxFQUFNLEtBQU8sRUFBRSwrQkFBK0IsT0FBTyxHQUFRLEdBQUssRUFBTSxLQUFLLEVBQUUsS0FBSyxXQUUvRyxNQUFPLEVBQUUsbUNBSVgsT0FDQyxLQUFNLEdBclF5QixHQTBRakMsWUFBWSxrQkFBa0IsS0FBSyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcFVwQ29udGVudCB7XG4gIGFkZENvbnRlbnQoKSB7XG4gICBjb25zdCBjYXJ0U2t1cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJ0LWl0ZW1fX3NrdScpO1xuICAgbGV0IHNrdXNBcnIgPSBbXTtcbiAgIGNhcnRTa3VzLmZvckVhY2goKHNrdXMpID0+IHNrdXNBcnIucHVzaChza3VzLmlubmVyVGV4dCkpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwtdGl0bGUnKTtcbiAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19kZXNjcmlwdGlvbicpO1xuICAgICAgY29uc3QgbW9kZWxDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3JhZGlvJyk7XG4gICAgICBjb25zdCBtb2RlbENvbnRhaW5lckxlbmd0aCA9IG1vZGVsQ29udGFpbmVyLmNoaWxkcmVuWzBdLmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgIGNvbnN0IHRlcm1zQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX190ZXJtcycpO1xuICAgICAgY29uc3QgZm9vdGVyQ29udGFpbmVyICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fZm9vdGVyJyk7XG5cdFx0XHRcdFx0XHRtb2RlbENvbnRhaW5lci5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyZW5kJywgYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNhbXN1bmdfX2NhcmVfX2RldGFpbHNcIj5cbiAgICAgICAgICAgICAgICA8aDIgY2xhc3M9XCJtb2RhbF9fdGl0bGVcIj5TYW1zdW5nIENhcmUrIGluY2x1ZGVzOjwvaDI+XG4gICAgICAgICAgICAgICAgPHVsPlxuICAgICAgICAgICAgICAgICAgPGxpPkZhc3QgYW5kIGNvbnZlbmllbnQgZXhwZXJ0IHJlcGFpcnMgdXNpbmcgZ2VudWluZSBTYW1zdW5nIHBhcnRzPC9saT5cbiAgICAgICAgICAgICAgICAgIDxsaT5pZiB5b3VyIGRldmljZSBpc24ndCBydW5uaW5nIHNtb290aGx5LCB3ZSdsbCBjaGVjayBhbmQgZml4IGFueSBpc3N1ZXM8L2xpPlxuICAgICAgICAgICAgICAgICAgPGxpPlN0YXkgcG93ZXJlZCB1cCB3aXRoIGhhc3NsZS1mcmVlIGJhdHRlcnkgcmVwbGFjZW1lbnRzPC9saT5cbiAgICAgICAgICAgICAgICAgIDxsaT5VcCB0byBmb3VyIGNsYWltcyB3aXRoaW4gMjQgbW9udGhzLCBvciB0d28gd2l0aGluIDEyIG1vbnRoczwvbGk+XG4gICAgICAgICAgICAgICAgICA8bGk+PGEgaHJlZj1cImh0dHBzOi8vd3d3LnNhbXN1bmcuY29tL3VrL29mZmVyL3NhbXN1bmctY2FyZS1wbHVzL1wiPlNlZSBhbGwgYmVuZWZpdHMgaGVyZS48L2E+IEtleSBkZXRhaWxzIG9mIHlvdXIgcG9saWN5IGNhbiBiZSBmb3VuZCBpbiB0aGUgPGEgaHJlZj1cImh0dHBzOi8vaW1hZ2VzLnNhbXN1bmcuY29tL2lzL2NvbnRlbnQvc2Ftc3VuZy9wNS91ay9zYW1zdW5nLW1vYmlsZS1jYXJlLWlwaWQucGRmXCI+SW5zdXJhbmNlIFByb3VkY3QgSW5mb21hdGlvbiBEb2N1bWVudChJUElEKTwvYT48L2xpPlxuICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNhbXN1bmdfX2NhcmVfX2RldGFpbHNfXzMwZGF5c1wiIHN0eWxlPVwiJHsoc2t1c0Fyci5pbmNsdWRlcygnU00tRzk5MUJaVkdFVUEnKSAmJiBtb2RlbENvbnRhaW5lckxlbmd0aCA+PSAzKSA/ICdkaXNwbGF5OiBibG9jaycgOiAnZGlzcGxheTogbm9uZSd9XCI+XG4gICAgICAgICAgICAgICAgICA8aDIgY2xhc3M9XCJtb2RhbF9fdGl0bGVcIj5UcnkgU2Ftc3VuZyBDYXJlKyBmcmVlIGZvciAzMCBkYXlzPC9oMj5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiaHViYmxlLXByb2R1Y3RfX29wdGlvbnMtY29udGVudC10ZXh0XCI+RG9lcyBub3QgcmVuZXcgYXV0b21hdGljYWxseS4gQ292ZXIgdGVybWluYXRlcyBhZnRlciAzMCBkYXlzIHVubGVzcyByZW5ld2VkIGF0IHNhbXN1bmdjYXJlcGx1cy5jb20uXG4gICAgICAgICAgICAgICAgICBTZXJ2aWNlIGZlZSBwZXIgY2xhaW0gc3RpbGwgYXBwbGllcy4gVmlldyB0aGUgSW5zdXJhbmNlIFByb2R1Y3QgSW5mb3JtYXRpb24gUGFjayhJUElEKSBmb3IgZnVsbCBwb2xpY3kgZGV0YWlscy5cbiAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgKTtcbiAgICAgICAgICAgIGZvb3RlckNvbnRhaW5lci5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyZW5kJywgdGVybXNDb250YWluZXIpO1xuICAgICAgICAgICAgY29uc3QgY2FuY2VsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9vdGVyLm1vZGFsX19idXR0b25zLS1pbmxpbmUgPiBidXR0b24uYnV0dG9uLnBpbGwtYnRuLnBpbGwtYnRuLS13aGl0ZS5yZXNldFwiKTtcbiAgICAgICAgICAgIGNvbnN0IGFkZFRvQmFza2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9vdGVyLm1vZGFsX19idXR0b25zLS1pbmxpbmUgPiBidXR0b24uYnV0dG9uLnByaW1hcnkucGlsbC1idG4ucGlsbC1idG4tLWJsYWNrLnZpZXctbW9yZVwiKTtcblxuICAgICAgICAgICAgdGl0bGUuaW5uZXJUZXh0ID0gJ1Byb3RleHQgeW91ciBHYWxheHkgd2l0aCBTYW1zdW5nIENhcmUrJztcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLmlubmVyVGV4dCA9ICdVcCB0byAyNCBtb250aHMgb2Ygd29ybGR3aWRlIGFjY2lkZW50YWwgZGFtYWdlIGluc3VyYW5jZSBmb3IgY29tcGxldGUgcGVhY2Ugb2YgbWluZCc7XG5cbiAgICAgICAgICAgIGNvbnN0IGxhYmVscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5vcHRpb24tYm94X19sYWJlbCcpO1xuICAgICAgICAgICAgbGFiZWxzLmZvckVhY2goKGxhYmVsKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBsYWJlbC5maXJzdENoaWxkLmlubmVyVGV4dDtcbiAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICcxIHllYXIgY292ZXJhZ2UnKSB7XG4gICAgICAgICAgICAgICAgbGFiZWwubGFzdEVsZW1lbnRDaGlsZC5pbm5lclRleHQgPSAnMTItbW9udGggcG9saWN5JztcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChuYW1lID09PSAnMiB5ZWFyIGNvdmVyYWdlJykge1xuICAgICAgICAgICAgICAgIGxhYmVsLmxhc3RFbGVtZW50Q2hpbGQuaW5uZXJUZXh0ID0gJzI0LW1vbnRoIHBvbGljeSc7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAobmFtZS5pbmNsdWRlcygnRnJlZScpKSB7XG4gICAgICAgICAgICAgICAgbGFiZWwuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJvcHRpb24tYm94X19uYW1lXCI+T25lIE1vbnRoIEZyZWUgKERvZXMgbm90IHJlbmV3KTwvZGl2PjxkaXYgY2xhc3M9XCJvcHRpb24tYm94X19jb2RlXCI+T25lIG1vbnRoIHBvbGljeTwvZGl2PidcbiAgICAgICAgICAgICAgICBsYWJlbC5sYXN0RWxlbWVudENoaWxkLmlubmVyVGV4dCA9ICdPbmUgbW9udGggcG9saWN5JztcblxuXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIGNvbnN0IHByaWNlVGFncyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5vcHRpb24tYm94X19wcmljZScpO1xuICAgICAgICAgICAgcHJpY2VUYWdzLmZvckVhY2goKHByaWNlcykgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBwcmljZSA9IHBhcnNlSW50KHByaWNlcy5pbm5lclRleHQuc2xpY2UoMSkpO1xuICAgICAgICAgICAgICBwcmljZXMuc3R5bGUudGV4dEFsaWduID0gJ3JpZ2h0JztcbiAgICAgICAgICAgICAgaWYgKHByaWNlcy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmlubmVyVGV4dC5pbmNsdWRlcygnMSB5ZWFyIGNvdmVyYWdlJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vbnRobHlQcmljZSA9IHByaWNlIC8gMTI7XG4gICAgICAgICAgICAgICAgcC5pbm5lclRleHQgPSBgKGVxdWlsdmFsZW50IHRvIMKjJHttb250aGx5UHJpY2UudG9GaXhlZCgyKX0gYSBtb250aClgO1xuICAgICAgICAgICAgICAgIHByaWNlcy5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2JlZm9yZWVuZCcscCk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJpY2VzLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuaW5uZXJUZXh0LmluY2x1ZGVzKCcyIHllYXIgY292ZXJhZ2UnKSl7XG4gICAgICAgICAgICAgICAgY29uc3QgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBtb250aGx5UHJpY2UgPSBwcmljZSAvIDI0O1xuICAgICAgICAgICAgICAgIHAuaW5uZXJUZXh0ID0gYChlcXVpbHZhbGVudCB0byDCoyR7bW9udGhseVByaWNlLnRvRml4ZWQoMil9IGEgbW9udGgpYDtcbiAgICAgICAgICAgICAgICBwcmljZXMuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdiZWZvcmVlbmQnLHApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgY29uc3QgY292ZXJPcHRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1hdC1yYWRpby1sYWJlbCcpO1xuICAgICAgICAgICAgY292ZXJPcHRpb25zLmZvckVhY2goKG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuaW5uZXJUZXh0LmluY2x1ZGVzKCcyIHllYXIgY292ZXJhZ2UnKSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuY2xpY2soKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgY2FuY2VsQnRuLmlubmVyVGV4dCA9IFwiTm8gVGhhbmtzXCI7XG4gICAgICAgICAgICBhZGRUb0Jhc2tldC5pbm5lclRleHQgPSBcIkFkZCB0byBvcmRlclwiO1xuXHRcdFx0XHRcdCB9LDE1MDApXG4gIH1cblxufSIsIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyAgVGhpcyBpcyBhIGJvaWxlcnBsYXRlIHRvIHVzZSBmb3IgdGFyZ2V0IGFjdGl2aXRpZXNcbi8vXG4vL1x0VVJMIGV4YW1wbGU6IGFkZCBpbiB1cmwgb2YgcHJvamVjdCBmb3IgdmlzaWJpbGl0eSBoZXJlXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gU2NyaXB0cywgaGVscGVyIHdpZGdldHMgLSBpbXBvcnQgYmVsb3dcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5pbXBvcnQgUG9wVXBDb250ZW50IGZyb20gXCIuL2NvbXBvbmVudHMvcG9wVXBDb250ZW50XCI7XG5cbnZhciBjaGVpbGxvbmRvbiA9IGNoZWlsbG9uZG9uIHx8IHt9O1xuXG5jaGVpbGxvbmRvbi50YXJnZXRCb2lsZXJwbGF0ZSA9IChmdW5jdGlvbiAoKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBtYWluID0ge1xuXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHQvLyBWYXJpYWJsZXMgYW5kIGNvbmZpZyBQcm9wZXJ0aWVzIGFkZCBiZWxvd1xuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuXHRcdC8vSW5pdFxuXHRcdGluaXQ6IGZ1bmN0aW9uICgpIHtcblx0XHRcdG1haW4uZG9FdmVyeXRoaW5nVGltZW91dCgpO1xuXHRcdH0sXG5cblxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gQ2hlY2tpbmcgalF1ZXJ5XG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHRkb0V2ZXJ5dGhpbmdUaW1lb3V0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgX3NlbGYgPSB0aGlzO1xuXG5cdFx0XHRjb25zb2xlLmxvZygnWFhYIC0gZG9FdmVyeXRoaW5nVGltZW91dCcpO1xuXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0aWYgKHdpbmRvdy4kKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ2RvRXZlcnl0aGluZ1RpbWVvdXQgLSBqUXVlcnkgbG9hZGVkJyk7XG5cdFx0XHRcdFx0bWFpbi5hcHBlbmROZXdTdHlsZSgpO1xuXHRcdFx0XHRcdG1haW4udHdlYWtFbGVtZW50cygpO1xuXHRcdFx0XHRcdG1haW4uYWRkRWxlbWVudHMoKTtcblx0XHRcdFx0XHRtYWluLmluc3VyZUJ1dHRvbnMoKTtcblx0XHRcdFx0XHRtYWluLmZyZWVJbnN1cmFuY2UoKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdubyBqcXVlcnknKVxuXHRcdFx0XHRcdF9zZWxmLmRvRXZlcnl0aGluZ1RpbWVvdXQoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgOTAwKVxuXHRcdH0sXG5cblxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gQWRkaW5nIHN0eWxlXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHRhcHBlbmROZXdTdHlsZTogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHQvKiBGWUk6IHRoZSBDU1MgY29kZSBpcyBpbiBzZXBhcmF0ZWQgZmlsZSwgaW4gU0NTUyBmb3JtYXQgdGhhdCBnZW5lcmF0ZXMgdGhlIENTUyBmaWxlLiBBZnRlciwgdGhlIGd1bHAgZmlsZSBmaW5kcyB0aGUgW0NTU10gYW5kIHJlcGxhY2VzIHdpdGggbWluaWZpZWQgY29kZSBmcm9tIGZpbGUgKi9cblxuXHRcdFx0Ly9UbyBpbnNlcnQgbWluaWZpZWQgaW5saW5lIHN0cmluZyB1bmNvbW1lbnQgdGhpcyB2YXJpYWJsZSBhbmQgcGFzdGUgaGVyZVxuXHRcdFx0Ly9FbHNlLCB1c2UgZGVmYXVsdCB1bmNvbW1lbnRlZCB2YXJpYWJsZVxuXHRcdFx0Ly8gdmFyIF9jc3MgPSAnJztcblxuXHRcdFx0dmFyIF9jc3MgPSAnW1tDU1NdXSc7XG5cblx0XHRcdC8vXG5cdFx0XHQvLyBBZGRpbmcgc3R5bGUgZGVmaW5pdGlvbnMgdG8gRE9NXG5cdFx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdFx0dmFyIF9oZWFkID0gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLFxuXHRcdFx0XHRfc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuXG5cdFx0XHRfc3R5bGUudHlwZSA9ICd0ZXh0L2Nzcyc7XG5cdFx0XHRpZiAoX3N0eWxlLnN0eWxlU2hlZXQpIHsgLy8gVGhpcyBpcyByZXF1aXJlZCBmb3IgSUU4IGFuZCBiZWxvdy5cblx0XHRcdFx0X3N0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IF9jc3M7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRfc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoX2NzcykpO1xuXHRcdFx0fVxuXHRcdFx0X2hlYWQuYXBwZW5kQ2hpbGQoX3N0eWxlKTtcblxuXHRcdH0sXG5cblx0XHR0d2Vha0VsZW1lbnRzOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdGNvbnN0IHRlc3RlZERldmljZXMgPSBbXCJTMjFcIiwgXCJTMjErXCIsIFwiUzIxIFVsdHJhXCIsIFwiTm90ZSAyMFwiLCBcIk5vdGUyMFwiLCBcIkE3MlwiLCBcIkE1MiA1R1wiLCBcIlRhYiBTN1wiLCBcIlogRmxpcDMgNUdcIl07XG5cdFx0XHR2YXIgcHJpY2VGb3JtYXR0ZXIgPSBuZXcgSW50bC5OdW1iZXJGb3JtYXQoXCJlbi1VS1wiLCB7IHN0eWxlOiBcImN1cnJlbmN5XCIsIGN1cnJlbmN5OiBcIkdCUFwiIH0pO1xuXG5cdFx0XHQgdmFyIHRlcm1zQXN0ZXJpc2tzID0gMDtcbiAgICB2YXIgdGVybXMgPSBbXTtcblxuICAgICQoXCIuY2FydC1pdGVtXCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtZW50KSB7XG4gICAgICAgIGlmKHRlc3RlZERldmljZXMuZmlsdGVyKChkZXZpY2UpID0+IChlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FydC1pdGVtX19uYW1lXCIpLmlubmVyVGV4dC5pbmNsdWRlcyhkZXZpY2UpKSkgJiYgKCQoZWxlbWVudCkuZmluZChcIi5zZXJ2aWNlLWl0ZW06Y29udGFpbnMoSW5zdXJhbmNlKVwiKS5sZW5ndGggPiAwKSkgey8vSWYgZGV2aWNlIG5hbWUgbWF0Y2hlcyBhbmQgaGFzIHRyYWRlIGluIHRleHRcbiAgICAgICAgICAgIC8vZm9yIHdoYXRldmVyIHJlYXNvbiwgZG8gYW5vdGhlciBsb29wIHRvIGdldCB0aGUgbWF0Y2hlZCBkZXZpY2Uga2V5d29yZCBlLmcuIFwiUzIxK1wiLCBidXQgdGhhdCBtYWtlcyB0aGUgb3JkZXIgb2YgdGhlIHRlc3RlZERldmljZXMgaW1wb3J0YW50XG4gICAgICAgICAgICAvL2ZvciBpbnN0YW5jZSwgaWYgUzIxIHdhcyBhZnRlciBTMjEgVWx0cmEsIFMyMSBVbHRyYSB3b3VsZCBiZSBjb3VudGVkIGFzIFMyMSAoYmVjYXVzZSBvZiB0aGUgZm9yIGxvb3AgYmVsb3cpXG4gICAgICAgICAgICB2YXIgbWF0Y2hlZERldmljZTtcbiAgICAgICAgICAgIHRlc3RlZERldmljZXMuZm9yRWFjaChmdW5jdGlvbiAoZGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgaWYoZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcnQtaXRlbV9fbmFtZVwiKS5pbm5lclRleHQuaW5jbHVkZXMoZGV2aWNlKSkgbWF0Y2hlZERldmljZSA9IGRldmljZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgJHRyYWRlSW5FbGVtZW50ID0gJChlbGVtZW50KS5maW5kKFwiLnNlcnZpY2UtaXRlbTpjb250YWlucyhJbnN1cmFuY2UpXCIpLFxuICAgICAgICAgICAgICAgICRkZXRhaWxzID0gJHRyYWRlSW5FbGVtZW50LmZpbmQoXCIuc2VydmljZS1pdGVtX19kZXRhaWxzXCIpLFxuICAgICAgICAgICAgICAgICRsZWFybk1vcmVCdXR0b24gPSAkKFwiPHAgY2xhc3M9J3RyYWRlaW5fX2xlYXJubW9yZSc+TGVhcm4gTW9yZTwvcD5cIik7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRsZXQgZmlyc3RMb2FkRGV0YWlscyA9IG5ldyBBcnJheSAoJGRldGFpbHNbMF0uY2hpbGRyZW4pO1xuXG5cbiAgICAgICAgICAgIGlmICghJHRyYWRlSW5FbGVtZW50LmZpbmQoXCIuYWN0aW9uLXRleHQuYWN0aW9uLXRleHQtLW1vYmlsZS5uZy1zdGFyLWluc2VydGVkXCIpLnRleHQoKS5pbmNsdWRlcyhcIi3Co1wiKSkgeyAvL2F2b2lkIHJlcGVhdHNcbiAgICAgICAgICAgICAgICB0ZXJtc0FzdGVyaXNrcyArPSAxO1xuICAgICAgICAgICAgICAgICRkZXRhaWxzLmNoaWxkcmVuKClbMF0uaW5uZXJUZXh0ID0gXCJBZGQgU2Ftc3VuZyBDYXJlK1wiO1xuICAgICAgICAgICAgICAgIHZhciBjb3B5O1xuICAgICAgICAgICAgICAgIHZhciBsZWdhbDtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG1hdGNoZWREZXZpY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlMyMStcIjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlMyMSBVbHRyYVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgKGNvcHkgPSBcIlVwIHRvIDI0IG1vbnRocyBvZiB3b3JsZHdpZGUgYWNjaWRlbnRhbCBkYW1hZ2UgaW5zdXJhbmNlIGZvciBjb21wbGV0ZSBwZWFjZSBvZiBtaW5kLlwiICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlMyMVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgKGNvcHkgPSBcIlVwIHRvIDI0IG1vbnRocyBvZiB3b3JsZHdpZGUgYWNjaWRlbnRhbCBkYW1hZ2UgaW5zdXJhbmNlIGZvciBjb21wbGV0ZSBwZWFjZSBvZiBtaW5kLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiTm90ZSAyMFwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiTm90ZTIwXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAoY29weSA9IFwiVXAgdG8gMjQgbW9udGhzIG9mIHdvcmxkd2lkZSBhY2NpZGVudGFsIGRhbWFnZSBpbnN1cmFuY2UgZm9yIGNvbXBsZXRlIHBlYWNlIG9mIG1pbmQuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBNzJcIjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkE1MiA1R1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgKGNvcHkgPSBcIlVwIHRvIDI0IG1vbnRocyBvZiB3b3JsZHdpZGUgYWNjaWRlbnRhbCBkYW1hZ2UgaW5zdXJhbmNlIGZvciBjb21wbGV0ZSBwZWFjZSBvZiBtaW5kLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiVGFiIFM3XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAoY29weSA9IFwiVXAgdG8gMjQgbW9udGhzIG9mIHdvcmxkd2lkZSBhY2NpZGVudGFsIGRhbWFnZSBpbnN1cmFuY2UgZm9yIGNvbXBsZXRlIHBlYWNlIG9mIG1pbmQuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJaIEZsaXAzIDVHXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAoY29weSA9IFwiVXAgdG8gMjQgbW9udGhzIG9mIHdvcmxkd2lkZSBhY2NpZGVudGFsIGRhbWFnZSBpbnN1cmFuY2UgZm9yIGNvbXBsZXRlIHBlYWNlIG9mIG1pbmQuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAoY29weSA9IFwiVHJhZGUgSW4gcHJvZHVjdFwiKSwgKGxlZ2FsID0gXCJcIiksIGNvbnNvbGUuZXJyb3IoXCJQcm9kdWN0IG91dHNpZGUgZXhwZWN0ZWQgcHJvZHVjdCByYW5nZS5cIik7XG4gICAgICAgICAgICAgICAgfVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQoZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1pdGVtX19pbnN1cmFuY2UtY29weScpID09PSBudWxsICkgPyAkZGV0YWlscy5jaGlsZHJlbigpLmNoaWxkcmVuKCkuaGlkZSgpICA6ICRkZXRhaWxzLmNoaWxkcmVuKCkuY2hpbGRyZW4oKS5zaG93KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCRkZXRhaWxzLmNoaWxkcmVuKClbMV0uaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmVuZCcsIGA8ZGl2IGNsYXNzPVwic2VydmljZS1pdGVtX19pbnN1cmFuY2UtY29weVwiPjxwPiR7Y29weX08L3A+PC9kaXY+YClcbiAgICAgICAgICAgICAgICAvLyB0ZXJtcy5wdXNoKGxlZ2FsKTtcbiAgICAgICAgICAgICAgICAkZGV0YWlscy5hcHBlbmQoJGxlYXJuTW9yZUJ1dHRvbik7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgcG9wVXBDb250ZW50ID0gbmV3IFBvcFVwQ29udGVudCgpO1xuICAgICAgICAgICAgICAgICRsZWFybk1vcmVCdXR0b24ub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICR0cmFkZUluRWxlbWVudC5maW5kKFwiLmFjdGlvbi1idXR0b24ubmctc3Rhci1pbnNlcnRlZFwiKS5jbGljaygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHBvcFVwQ29udGVudC5hZGRDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAkdHJhZGVJbkVsZW1lbnQuZmluZChcIi5hY3Rpb24tdGV4dC5hY3Rpb24tdGV4dC0tYmx1ZVwiKS50ZXh0KFwiQWRkIEluc3VyYW5jZVwiKTtcblxuICAgICAgICAgICAgICAgIHZhciBwcmljZUVsZW1lbnQgPSAkKGVsZW1lbnQpLmZpbmQoXCIucHJpY2VfX2N1cnJlbnRcIilbMF07XG4gICAgICAgICAgICAgICAgdmFyIE9ic2VydmVyID0gd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIgfHwgd2luZG93LldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7XG5cbiAgICAgICAgICAgICAgICBuZXcgT2JzZXJ2ZXIoZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1vZGVsUHJpY2UgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtbW9kZWxwcmljZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByaWNlID0gTnVtYmVyKHByaWNlRWxlbWVudC5pbm5lclRleHQucmVwbGFjZSgvW14wLTkuLV0rL2csIFwiXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxQcmljZSA9PSBwcmljZSB8fCBpc05hTihwcmljZSlcbiAgICAgICAgICAgICAgICAgICAgICAgID8gKCRsZWFybk1vcmVCdXR0b24uc2hvdygpLCAkKGVsZW1lbnQpLmZpbmQoXCIucHJpY2VfX2N1cnJlbnQgPiBkaXZcIikubGVuZ3RoID4gMCAmJiAkKGVsZW1lbnQpLmZpbmQoXCIucHJpY2VfX2N1cnJlbnQgPiBkaXZcIikucmVtb3ZlKCksICR0cmFkZUluRWxlbWVudC5maW5kKFwiLmFjdGlvbi10ZXh0LmFjdGlvbi10ZXh0LS1ibHVlXCIpLnRleHQoXCJBZGQgSW5zdXJhbmNlXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiAoJGxlYXJuTW9yZUJ1dHRvbi5oaWRlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZChcIi5wcmljZV9fY3VycmVudFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCc8ZGl2IGNsYXNzPVwidHJhZGVpbl9fb2xkcHJpY2VcIj4nICsgcHJpY2VGb3JtYXR0ZXIuZm9ybWF0KG1vZGVsUHJpY2UpICsgXCI8L2Rpdj5cIikpO1xuICAgICAgICAgICAgICAgIH0pLm9ic2VydmUocHJpY2VFbGVtZW50LCB7IGNoaWxkTGlzdDogITEsIGNoYXJhY3RlckRhdGE6ICEwLCBhdHRyaWJ1dGVzOiAhMCwgc3VidHJlZTogITAgfSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgT2JzZXJ2ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkdHJhZGVJbkVsZW1lbnQuZmluZChcIi5zZXJ2aWNlLWl0ZW1fX2FwcGxpZWQtbWVzc2FnZS5uZy1zdGFyLWluc2VydGVkOmNvbnRhaW5zKGJlZW4gc3VjY2Vzc2Z1bGx5IGFwcGxpZWQpXCIpLnRleHQoJHRyYWRlSW5FbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9KS5vYnNlcnZlKCR0cmFkZUluRWxlbWVudFswXSwgeyBjaGlsZExpc3Q6ICEwLCBjaGFyYWN0ZXJEYXRhOiAhMCwgYXR0cmlidXRlczogITAsIHN1YnRyZWU6ICEwIH0pO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG5ldyBPYnNlcnZlcihmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ29ic2VydmF0aW9ucyBoZXJlJylcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQkZGV0YWlscy5jaGlsZHJlbigpWzFdLm5leHRTaWJsaW5nLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0JGxlYXJuTW9yZUJ1dHRvbi5oaWRlKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCRkZXRhaWxzLmNoaWxkcmVuKClbMV0uaW5uZXJUZXh0LmluY2x1ZGVzKCdBZGQgU2Ftc3VuZyBDYXJlKycpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnd2UgaGF2ZSBub3cgZW50ZXJlZCBoZXJlJylcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCRkZXRhaWxzLmNoaWxkcmVuKClbMV0ubmV4dFNpYmxpbmcuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQkbGVhcm5Nb3JlQnV0dG9uLnNob3coKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCRkZXRhaWxzLmNoaWxkcmVuKClbMV0uY2hpbGROb2Rlc1swXS5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQkZGV0YWlscy5jaGlsZHJlbigpWzFdLmNoaWxkTm9kZXNbMF0uc3R5bGUuaGVpZ2h0ID0gJzBweCc7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQkdHJhZGVJbkVsZW1lbnQuZmluZChcIi5hY3Rpb24tdGV4dC5hY3Rpb24tdGV4dC0tYmx1ZVwiKS50ZXh0KFwiQWRkIEluc3VyYW5jZVwiKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pLm9ic2VydmUoJGRldGFpbHMuY2hpbGRyZW4oKVsxXSwge2F0dHJpYnV0ZXM6IHRydWUsIGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZX0pXG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICB9KVxuXG4gICBtYWluLnByb2Nlc3NUZXJtc0Zvb3Rlcih0ZXJtcyk7XG5cblxuXHRcdH0sXG5cblx0XHRpbnN1cmVCdXR0b25zOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdGNvbnN0IGFsbGJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWN0aW9uLXRleHQnKTtcblx0XHRcdGNvbnN0IHBvcFVwQ29udGVudCA9IG5ldyBQb3BVcENvbnRlbnQoKTtcblx0XHRcdFx0XHRcdFx0XHRcdGFsbGJ0bnMuZm9yRWFjaCgoaW5zdXJlQnRuKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoaW5zdXJlQnRuLmlubmVyVGV4dC5pbmNsdWRlcygnQWRkIEluc3VyYW5jZScpKXtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGluc3VyZUJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwb3BVcENvbnRlbnQuYWRkQ29udGVudCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9KVxuXG5cdFx0fSxcblxuXHRcdGZyZWVJbnN1cmFuY2U6IGZ1bmN0aW9uICgpIHtcblx0XHRcdGNvbnN0IGNhcnROYW1lcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJ0LWl0ZW1fX25hbWUnKTtcblxuXHRcdFx0Y2FydE5hbWVzLmZvckVhY2goKGNhcnROYW1lKSA9PiB7XG5cdFx0XHRcdGlmIChjYXJ0TmFtZS5pbm5lclRleHQuaW5jbHVkZXMoJ0dhbGF4eSBTMjEgNUcnKSkge1xuXHRcdFx0XHRcdGNvbnN0IGNhcnRzZXJ2aWNlc0NvbnRhaW5lciA9IGNhcnROYW1lLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmNoaWxkcmVuWzZdXG5cdFx0XHRcdFx0Y29uc3QgaW5zdXJhbmNlQ29weUNvbnRhaW5lciA9IGNhcnRzZXJ2aWNlc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc2VydmljZS1pdGVtX19pbnN1cmFuY2UtY29weScpXG5cdFx0XHRcdFx0Y29uc3QgcGFyYWdyYXBoID0gYDxwIGNsYXNzPVwid2FybmluZ19fcG9saWN5XCI+VHJ5IFNhbXN1bmcgQ2FyZSsgZnJlZSBmb3IgMzAgZGF5cyAoZG9lcyBub3QgcmVuZXcpPC9wPmBcblx0XHRcdFx0XHRpbnN1cmFuY2VDb3B5Q29udGFpbmVyLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIHBhcmFncmFwaClcblx0XHRcdFx0fVxuXHRcdFx0fSlcblxuXHRcdH0sXG5cblxuXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHQvLyBXaGVuIHBhZ2UgaXMgYWxyZWFkeSBsb2FkZWQgd2UgbmVlZCB0byBhZGQgdGhlIG5ldyBlbGVtZW50c1xuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0YWRkRWxlbWVudHM6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0Y29uc29sZS5sb2coJ1hYWCAtIGFkZEVsZW1lbnRzJyk7XG5cblxuXG5cdFx0fSxcblxuXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHQvLyBTZXQgRXZlbnRzXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHRzZXRFdmVudHM6IGZ1bmN0aW9uIChlbG0gPSAnJykge1xuXG5cdFx0XHRjb25zb2xlLmxvZygnWFhYIC0gc2V0RXZlbnRzOiAnICsgZWxtKTtcblxuXHRcdFx0c3dpdGNoIChlbG0pIHtcblx0XHRcdFx0Y2FzZSAnbW9kYWwnOlxuXHRcdFx0XHRcdC8vY29kZSB0byBvcGVuIG1vZGFsO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdmaW5hbmNlUG9wdXAnOlxuXHRcdFx0XHQvL2NvZGUgdG8gb3BlbiBzb21ldGhpbmcgZWxzZTtcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblxuXG5cblx0XHR9LFxuXG5cdFx0cmVzaXplV2luZG93OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHQvLyBhcyBuZXcgZWxlbWVudHMgYWRkZWQgdG8gcGFuZWwgd2UgbmVlZCB0byByZXNpemUgd2luZG93IHRvIGFjdGl2YXRlIGFtZW5kIGhlaWdodCBvZiBQcm9kdWN0IFBhbmVsc1xuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCQod2luZG93KS5yZXNpemUoKTtcblx0XHRcdFx0Y29uc29sZS5sb2coJ3dpbmRvdyByZXNpemVkJyk7XG5cdFx0XHR9LCAxMDApO1xuXHRcdH0sXG5cblx0XHRwcm9jZXNzVGVybXNGb290ZXI6IGZ1bmN0aW9uIChuKSB7XG5cdFx0XHRcdGxldCBUZXJtcyA9ICQoXCI8cCBpZD0nVHJhZGVJbkNvbmRpdGlvbnMnPjwvcD5cIik7XG5cdFx0XHRcdFx0XHRcdGRvY3VtZW50LmJvZHkuY29udGFpbnMoVGVybXNbMF0pIHx8ICQoXCIuVGVybXNDb25kaXRpb25zU2xvdENvbnRlbnRcIikuYXBwZW5kKFRlcm1zKSwgbiAmJiBUZXJtcy5odG1sKG4uam9pbihcIjxici8+XCIpKTtcblx0XHRcdH0sXG5cdFx0XHRUZXJtczogJChcIjxwIGlkPSdUcmFkZUluQ29uZGl0aW9ucyc+PC9wPlwiKSxcblxuXG5cdH07XG5cdHJldHVybiB7XG5cdFx0bWFpbjogbWFpblxuXHR9O1xuXG59KSgpO1xuXG5jaGVpbGxvbmRvbi50YXJnZXRCb2lsZXJwbGF0ZS5tYWluLmluaXQoKTtcblxuIl19"}